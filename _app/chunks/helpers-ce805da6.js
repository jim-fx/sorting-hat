var f=Object.defineProperty,x=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var y=(s,i,t)=>i in s?f(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t,_=(s,i)=>{for(var t in i||(i={}))l.call(i,t)&&y(s,t,i[t]);if(a)for(var t of a(i))c.call(i,t)&&y(s,t,i[t]);return s},h=(s,i)=>x(s,z(i));import{ai as p}from"./vendor-4d1406ba.js";function d(s,i=[]){return s.type==="Bone"&&!i.includes(s)&&i.push(s),s.children.forEach(t=>{t.type==="Bone"&&!i.includes(t)&&i.push(t),t.children.length&&d(t,i)}),i}function e(s,i,t){return s*t+i*(1-t)}function B(s){const i={};return s.forEach(t=>{const{userData:{name:r}={}}=t;if(r){i[r]=t;const[n,o]=r.toLowerCase().split("_");o&&(i[n]=n in i?h(_({},i[n]),{[o]:t}):{[o]:t},i[n+"Array"]=n+"Array"in i?[...i[n+"Array"],t]:[t])}}),i}function g(s){let i=!1;return{name:s.name,get dirty(){return i},clear:()=>{i=!1},rotation:{_x:0,ox:s.rotation.x,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,i=!0)},_y:0,oy:s.rotation.y,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,this._dirty=!0)},_z:0,oz:s.rotation.z,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,i=!0)}},position:{ox:s.position.x,_x:0,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,i=!0)},oy:s.position.y,_y:0,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,i=!0)},oz:s.position.z,_z:0,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,i=!0)}},scale:{ox:s.scale.x,_x:0,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,i=!0)},oy:s.scale.y,_y:0,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,i=!0)},oz:s.scale.z,_z:0,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,i=!0)}},id:s.uuid}}function u(s,i={bones:{}},t=0){if(s instanceof p){if(s.uuid in i)return i[s.uuid];i.bones[s.uuid]=s;const o=g(s);return i[s.uuid]=o,o}if(Array.isArray(s))return s.map(o=>u(o,i,t+1));const r={},n=Object.keys(s);return n.length&&n.forEach(o=>{r[o]=u(s[o],i,t+1)}),t===0?{obj:r,cache:i}:r}function T(s){const{obj:i,cache:t}=u(s);return i._bones=t.bones,delete t.bones,i._all=Object.values(t),i}function E({_all:s,_bones:i}){s.forEach(t=>{if(!t.dirty)return;const r=i[t.id];!r||(r.rotation.x=e(t.rotation.x,r.rotation.x,.9),r.rotation.y=e(t.rotation.y,r.rotation.y,.9),r.rotation.z=e(t.rotation.z,r.rotation.z,.9),r.position.x=e(t.position.x,r.position.x,.9),r.position.y=e(t.position.y,r.position.y,.9),r.position.z=e(t.position.z,r.position.z,.9),r.scale.x=e(t.scale.x,r.scale.x,.9),r.scale.y=e(t.scale.y,r.scale.y,.9),r.scale.z=e(t.scale.z,r.scale.z,.9),t.clear())})}export{T as a,B as b,E as c,d as f,e as l};
