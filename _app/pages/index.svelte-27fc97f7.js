var rt=Object.defineProperty,at=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var De=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Se=(s,e,t)=>e in s?rt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,we=(s,e)=>{for(var t in e||(e={}))ot.call(e,t)&&Se(s,t,e[t]);if(De)for(var t of De(e))ct.call(e,t)&&Se(s,t,e[t]);return s},Ve=(s,e)=>at(s,lt(e));import{S as G,i as W,s as j,e as b,c as k,a as E,d as u,b as g,f as x,I as z,t as L,k as D,g as B,n as S,H as v,J as Ne,K as O,L as ye,h as be,M as ut,l as U,N as ht,x as $,u as V,A as ke,O as te,P as ue,Q as Re,R as he,T as Ee,U as xe,V as ft,W as fe,X as Ae,j as K,m as X,Y as Z,o as J,Z as He,v as Q,C as ze,_ as dt,$ as _t,a0 as pt,a1 as mt,a2 as gt,a3 as vt,a4 as wt,a5 as yt,a6 as bt,a7 as de,a8 as _e,a9 as kt,w as pe,aa as Et,ab as Le,ac as xt,ad as At,ae as $e,af as zt,ag as $t,ah as Tt,r as me,ai as Mt,aj as It}from"../chunks/vendor-dd92b9bc.js";function Dt(s){let e,t,n,i,r,a,o,l,c,h,d;return{c(){e=b("p"),t=L("Ganzen Namen eingeben:"),n=D(),i=b("input"),r=D(),a=b("br"),o=D(),l=b("button"),c=L("fertig"),this.h()},l(m){e=k(m,"P",{});var p=E(e);t=B(p,"Ganzen Namen eingeben:"),p.forEach(u),n=S(m),i=k(m,"INPUT",{placeholder:!0,type:!0}),r=S(m),a=k(m,"BR",{}),o=S(m),l=k(m,"BUTTON",{});var _=E(l);c=B(_,"fertig"),_.forEach(u),this.h()},h(){g(i,"placeholder","Namen..."),g(i,"type","text")},m(m,p){x(m,e,p),v(e,t),x(m,n,p),x(m,i,p),Ne(i,s[1]),x(m,r,p),x(m,a,p),x(m,o,p),x(m,l,p),v(l,c),h||(d=[O(i,"input",s[6]),O(i,"keydown",s[3]),O(l,"click",s[7])],h=!0)},p(m,p){p&2&&i.value!==m[1]&&Ne(i,m[1])},d(m){m&&u(e),m&&u(n),m&&u(i),m&&u(r),m&&u(a),m&&u(o),m&&u(l),h=!1,ye(d)}}}function St(s){let e,t,n,i,r,a,o,l,c,h,d,m,p,_,w,f;return{c(){e=b("p"),t=L("Alles klar, "),n=b("b"),i=L(s[1]),r=L(", ist das der richtige Name?"),a=D(),o=b("br"),l=D(),c=b("div"),h=b("button"),d=L("Ja"),m=D(),p=b("button"),_=L("Nein")},l(y){e=k(y,"P",{});var A=E(e);t=B(A,"Alles klar, "),n=k(A,"B",{});var N=E(n);i=B(N,s[1]),N.forEach(u),r=B(A,", ist das der richtige Name?"),A.forEach(u),a=S(y),o=k(y,"BR",{}),l=S(y),c=k(y,"DIV",{});var H=E(c);h=k(H,"BUTTON",{});var P=E(h);d=B(P,"Ja"),P.forEach(u),m=S(H),p=k(H,"BUTTON",{});var q=E(p);_=B(q,"Nein"),q.forEach(u),H.forEach(u)},m(y,A){x(y,e,A),v(e,t),v(e,n),v(n,i),v(e,r),x(y,a,A),x(y,o,A),x(y,l,A),x(y,c,A),v(c,h),v(h,d),v(c,m),v(c,p),v(p,_),w||(f=[O(h,"click",s[4]),O(p,"click",s[5])],w=!0)},p(y,A){A&2&&be(i,y[1])},d(y){y&&u(e),y&&u(a),y&&u(o),y&&u(l),y&&u(c),w=!1,ye(f)}}}function Vt(s){let e;function t(r,a){return r[2]?St:Dt}let n=t(s),i=n(s);return{c(){e=b("div"),i.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var a=E(e);i.l(a),a.forEach(u),this.h()},h(){g(e,"class","wrapper svelte-1terpu9")},m(r,a){x(r,e,a),i.m(e,null)},p(r,[a]){n===(n=t(r))&&i?i.p(r,a):(i.d(1),i=n(r),i&&(i.c(),i.m(e,null)))},i:z,o:z,d(r){r&&u(e),i.d()}}}function Nt(s,e,t){let{callback:n}=e,i,r=!1;function a({key:d}){d==="Enter"&&t(2,r=!0)}const o=()=>n(i),l=()=>{t(2,r=!1)};function c(){i=this.value,t(1,i)}const h=()=>{t(2,r=!0)};return s.$$set=d=>{"callback"in d&&t(0,n=d.callback)},[n,i,r,a,o,l,c,h]}class Rt extends G{constructor(e){super();W(this,e,Nt,Vt,j,{callback:0})}}const{VITE_API_URL:Ht=""}={VITE_API_URL:"https://si21.herokuapp.com",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};async function Be(s,e,t){const n={method:e};t&&(n.body=JSON.stringify(t));const i=Ht+"/"+s;return fetch(i,n)}function Oe(s){return Be(s,"GET")}Oe("api/houses");function Lt(s,e){return Be(s,"POST",e)}function Bt(s){return{c:z,l:z,m:z,p:z,i:z,o:z,d:z}}function Ot(s){let e,t=s[6]+"",n,i,r,a,o,l,c,h,d,m,p;function _(){return s[3](s[6])}return{c(){e=b("h1"),n=L(t),i=D(),r=b("img"),l=D(),c=b("button"),h=L("Okay"),this.h()},l(w){e=k(w,"H1",{class:!0});var f=E(e);n=B(f,t),f.forEach(u),i=S(w),r=k(w,"IMG",{src:!0,alt:!0,class:!0}),l=S(w),c=k(w,"BUTTON",{});var y=E(c);h=B(y,"Okay"),y.forEach(u),this.h()},h(){g(e,"class","svelte-16th1rs"),te(r.src,a="icons/"+s[6]+".svg")||g(r,"src",a),g(r,"alt","crest of house "+s[1]),g(r,"class","svelte-16th1rs")},m(w,f){x(w,e,f),v(e,n),x(w,i,f),x(w,r,f),x(w,l,f),x(w,c,f),v(c,h),d=!0,m||(p=O(c,"click",_),m=!0)},p(w,f){s=w},i(w){d||(ue(()=>{o||(o=Re(r,he,{},!0)),o.run(1)}),d=!0)},o(w){o||(o=Re(r,he,{},!1)),o.run(0),d=!1},d(w){w&&u(e),w&&u(i),w&&u(r),w&&o&&o.end(),w&&u(l),w&&u(c),m=!1,p()}}}function Ct(s){return{c:z,l:z,m:z,p:z,i:z,o:z,d:z}}function Ft(s){let e,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Ct,then:Ot,catch:Bt,value:6,blocks:[,,,]};return ut(s[1],n),{c(){e=U(),n.block.c()},l(i){e=U(),n.block.l(i)},m(i,r){x(i,e,r),n.block.m(i,n.anchor=r),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,[r]){s=i,ht(n,s,r)},i(i){t||($(n.block),t=!0)},o(i){for(let r=0;r<3;r+=1){const a=n.blocks[r];V(a)}t=!1},d(i){i&&u(e),n.block.d(i),n.token=null,n=null}}}function qt(s,e,t){const n=!1,i=["ravenclaw","gryffindor","slytherin","hufflepuff"];async function r(){const c=await(await Oe("api/houses")).text();return c.length>20?i[Math.floor(Math.random()*i.length)]:c}let a=r(),{callback:o}=e;ke(async()=>{const c=await a,h=new Audio("audio/"+c+".mp3");h.play();const d=new Audio("audio/cheers.mp3"),m=setInterval(()=>{h.currentTime/h.duration>.2&&d.paused&&(d.play(),clearInterval(m))},50);h.addEventListener("progress",()=>{})});const l=c=>o(c);return s.$$set=c=>{"callback"in c&&t(0,o=c.callback)},[o,a,n,l]}class Pt extends G{constructor(e){super();W(this,e,qt,Ft,j,{showText:2,callback:0})}get showText(){return this.$$.ctx[2]}}function Ce(s,e,t){const n=s.slice();return n[4]=e[t],n[6]=t,n}function Fe(s){let e,t,n,i,r,a;function o(){return s[3](s[4])}return{c(){e=b("img"),this.h()},l(l){e=k(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){te(e.src,t="icons/"+s[4]+".svg")||g(e,"src",t),g(e,"alt",n="crest of house "+s[4]),g(e,"class","svelte-16fuc7d")},m(l,c){x(l,e,c),r||(a=O(e,"click",o),r=!0)},p(l,c){s=l},i(l){i||ue(()=>{i=Ee(e,he,{delay:s[6]*200,duration:1200}),i.start()})},o:z,d(l){l&&u(e),r=!1,a()}}}function Ut(s){let e,t=s[0],n=[];for(let i=0;i<t.length;i+=1)n[i]=Fe(Ce(s,t,i));return{c(){e=b("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var r=E(e);for(let a=0;a<n.length;a+=1)n[a].l(r);r.forEach(u),this.h()},h(){g(e,"class","wrapper svelte-16fuc7d")},m(i,r){x(i,e,r);for(let a=0;a<n.length;a+=1)n[a].m(e,null)},p(i,[r]){if(r&3){t=i[0];let a;for(a=0;a<t.length;a+=1){const o=Ce(i,t,a);n[a]?(n[a].p(o,r),$(n[a],1)):(n[a]=Fe(o),n[a].c(),$(n[a],1),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i(i){for(let r=0;r<t.length;r+=1)$(n[r])},o:z,d(i){i&&u(e),xe(n,i)}}}function Gt(s,e,t){let{callback:n}=e;const i=["ravenclaw","gryffindor","slytherin","hufflepuff"];function r(o){const l=new Audio("audio/"+o+".mp3");l.play(),l.addEventListener("ended",()=>{setTimeout(()=>{n(o)},200)})}const a=o=>r(o);return s.$$set=o=>{"callback"in o&&t(2,n=o.callback)},[i,r,n,a]}class Wt extends G{constructor(e){super();W(this,e,Gt,Ut,j,{callback:2})}}function jt(s){let e,t,n,i,r,a,o,l,c,h,d;function m(_){s[3](_)}let p={max:10,pips:!0,id:"range-slider",all:"label"};return s[1]!==void 0&&(p.values=s[1]),n=new ft({props:p}),fe.push(()=>Ae(n,"values",m)),{c(){e=b("div"),t=b("div"),i=b("div"),K(n.$$.fragment),a=D(),o=b("button"),l=L("Okay"),this.h()},l(_){e=k(_,"DIV",{class:!0});var w=E(e);t=k(w,"DIV",{class:!0});var f=E(t);i=k(f,"DIV",{style:!0});var y=E(i);X(n.$$.fragment,y),f.forEach(u),a=S(w),o=k(w,"BUTTON",{});var A=E(o);l=B(A,"Okay"),A.forEach(u),w.forEach(u),this.h()},h(){Z(i,"display","contents"),Z(i,"--handle-focus","white"),Z(i,"--range-slider","black"),Z(i,"--range-handle","black"),Z(i,"--range-float-text","white"),g(t,"class","range-wrapper svelte-1ni4obk"),g(e,"class","wrapper svelte-1ni4obk")},m(_,w){x(_,e,w),v(e,t),v(t,i),J(n,i,null),v(e,a),v(e,o),v(o,l),c=!0,h||(d=O(o,"click",s[4]),h=!0)},p(_,[w]){const f={};!r&&w&2&&(r=!0,f.values=_[1],He(()=>r=!1)),n.$set(f)},i(_){c||($(n.$$.fragment,_),c=!0)},o(_){V(n.$$.fragment,_),c=!1},d(_){_&&u(e),Q(n),h=!1,d()}}}function Kt(s,e,t){let{callback:n}=e;const i=!0;let r=[5];function a(l){r=l,t(1,r)}const o=()=>n(r[0]);return s.$$set=l=>{"callback"in l&&t(0,n=l.callback)},[n,r,i,a,o]}class Jt extends G{constructor(e){super();W(this,e,Kt,jt,j,{callback:0,showText:2})}get showText(){return this.$$.ctx[2]}}function Qt(s){let e,t,n,i,r,a;return{c(){e=b("video"),t=b("source"),i=b("source"),a=b("track"),this.h()},l(o){e=k(o,"VIDEO",{width:!0,height:!0,class:!0});var l=E(e);t=k(l,"SOURCE",{src:!0,type:!0}),i=k(l,"SOURCE",{src:!0,type:!0}),a=k(l,"TRACK",{kind:!0}),l.forEach(u),this.h()},h(){te(t.src,n=""+(s[0]+"video/video.webm"))||g(t,"src",n),g(t,"type","video/webm"),te(i.src,r=""+(s[0]+"video/video.mp4"))||g(i,"src",r),g(i,"type","video/mp4"),g(a,"kind","captions"),g(e,"width","500"),g(e,"height","281"),e.controls=!0,e.autoplay=!0,g(e,"class","svelte-k2j555")},m(o,l){x(o,e,l),v(e,t),v(e,i),v(e,a)},p(o,[l]){l&1&&!te(t.src,n=""+(o[0]+"video/video.webm"))&&g(t,"src",n),l&1&&!te(i.src,r=""+(o[0]+"video/video.mp4"))&&g(i,"src",r)},i:z,o:z,d(o){o&&u(e)}}}function Yt(s,e,t){const n=!1;let i="";return ke(()=>{t(0,i=window.location.pathname)}),[i,n]}class Xt extends G{constructor(e){super();W(this,e,Yt,Qt,j,{showText:1})}get showText(){return this.$$.ctx[1]}}const qe=ze();class C{constructor({audioFile:e,element:t,text:n}){this.duration=5,this.state=ze("suspended"),this.nextActions=[],this.events={},this.text=n,this.element=t,e&&(this.audio=new Audio("audio/"+e))}async start(){if(this.setActive(),await dt(),this.emit("start"),this.audio){this.duration=this.audio.duration,this.state.set("running"),this.audio.play(),C.anim.params.wiggleMouth=1;const e=setInterval(()=>{this.emit("progress",this.audio.currentTime/this.audio.duration)},200);this.audio.addEventListener("ended",()=>{clearInterval(e),setTimeout(()=>{this.speechEnded()},500)},{once:!0})}else this.duration=5,this.text&&(this.duration=Math.max(this.text.split(" ").length*.08,2),console.log(this.duration)),this.state.set("running"),setTimeout(()=>{this.speechEnded()},this.duration*1e3)}speechEnded(){this.emit("speech-ended"),C.anim.params.wiggleMouth=0,this.element?this.state.set("input"):this.finish()}handleElementCallback(e){console.log("Got Data: ",e),this.data=e,this.emit("data",e),this.finish()}finish(){this.state.set("finished"),this.emit("end"),console.log("Finished",this.nextActions),this.nextActions.length===1&&!("name"in this.nextActions[0])&&this.nextActions[0].action.start()}emit(e,t){e in this.events&&this.events[e].forEach(n=>n(t))}addEventListener(e,t){return this.events[e]=e in this.events?[...this.events[e],t]:[t],()=>{this.events[e]=this.events[e].filter(n=>n!==t)}}setActive(){qe.set(this)}addAction(e,t){typeof e!="string"?this.nextActions.push({action:e}):this.nextActions.push({name:e,action:t})}}var Zt=(s,e)=>{s="local-store-"+s;{let t=e;if(s in localStorage)try{t=JSON.parse(localStorage.getItem(s))}catch(i){console.log(i)}const n=ze(t);return n.subscribe(i=>{localStorage.setItem(s,JSON.stringify(i))}),n}};const re=Zt("user-data",{name:"",confidence:"",house:""});function en(s){C.anim=s;const e=new C({audioFile:"teilnehmen.mp3",text:"So so, du willst also an der Silvesterparty im Dungeon teilnehmen?"});e.addEventListener("start",()=>{s.params.wiggleMouth=1}),e.addEventListener("end",()=>{s.params.wiggleMouth=0,s.params.wiggleEyes=1});const t=new C({audioFile:"namen.mp3",text:"Sehr sch\xF6n, verstanden, jetzt br\xE4uchte ich noch deinen Namen?",element:Rt});t.addEventListener("data",h=>{console.log("Got Name",h),re.update(d=>(d.name=h,d))});const n=new C({audioFile:"unterhaltung.mp3",text:"Das ist nat\xFCrlich auch in Ordnung, damit du aber trotzdem nicht leer ausgehst habe ich hier etwas Unterhaltung f\xFCr dich:",element:Xt}),i=new C({audioFile:"exzellenter_gast.mp3",text:"Naja, okay, wenn das sooo ist? Dann werden wir mal schauen... Verstanden, du siehst wie ein exzellenter Gast aus."}),r=new C({audioFile:"welches_haus.mp3",text:"Weisst du den schon zu welchem der vier H\xE4user du geh\xF6rst?"});r.addEventListener("data",h=>{re.update(d=>(d.house=h,d))});const a=new C({audioFile:"random_haus.mp3",text:"Okay, um das herauszufinden bin ich ja hier. Dann werde ich mal  schauen, hmm, ich sehe Mut, aber auch Intelligenz, oh, und hier ist auch noch Empathie. Schwierige Entscheidung, aber ich denke:",element:Pt});a.addEventListener("start",()=>{s.params.wiggleMouth=1}),a.addEventListener("progress",h=>{h>.34&&(s.params.wiggleRim=2,s.params.wiggleHat=2,s.params.wiggleEyes=1)}),a.addEventListener("speech-ended",()=>{s.params.wiggleMouth=0,s.params.wiggleHat=.2,s.params.wiggleEyes=0,s.params.wiggleRim=.2}),a.addEventListener("data",h=>{re.update(d=>(d.house=h,d))});const o=new C({text:"W\xE4hle nun dein Haus aus:",element:Wt});o.addEventListener("data",h=>{re.update(d=>(d.house=h,d))});const l=new C({audioFile:"sicherheit.mp3",text:"Nun zu letzten Frage, auf einer Skala von 0 bis 10, wie sicher k\xF6nnen wir mit deinem Erscheinen rechnen?",element:Jt});l.addEventListener("data",h=>{re.update(d=>(d.confidence=h/10,Lt("api",d),d))});const c=new C({audioFile:"final.mp3",text:"So, das war auch schon alles. Wir freuen uns, dich am 31.12 willkommen zu hei\xDFen, und w\xFCnschen dir bis dahin eine sch\xF6ne Weihnachtszeit."});return e.addAction("Auf jeden Fall!",t),e.addAction("Ne, eher nicht",n),t.addAction(i),i.addAction(r),r.addAction("Aber nat\xFCrlich!",o),r.addAction("Nein, dass wei\xDF ich noch nicht...",a),a.addAction(l),o.addAction(l),l.addAction(c),e}function Pe(s,e=[]){return s.type==="Bone"&&!e.includes(s)&&e.push(s),s.children.forEach(t=>{t.type==="Bone"&&!e.includes(t)&&e.push(t),t.children.length&&Pe(t,e)}),e}function F(s,e,t){return s*t+e*(1-t)}function tn(s){const e={};return s.forEach(t=>{const{userData:{name:n}={}}=t;if(n){e[n]=t;const[i,r]=n.toLowerCase().split("_");r&&(e[i]=i in e?Ve(we({},e[i]),{[r]:t}):{[r]:t},e[i+"Array"]=i+"Array"in e?[...e[i+"Array"],t]:[t])}}),e}function nn(s){let e=!1;return{name:s.name,get dirty(){return e},clear:()=>{e=!1},rotation:{_x:0,ox:s.rotation.x,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,e=!0)},_y:0,oy:s.rotation.y,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,this._dirty=!0)},_z:0,oz:s.rotation.z,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,e=!0)}},position:{ox:s.position.x,_x:0,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,e=!0)},oy:s.position.y,_y:0,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,e=!0)},oz:s.position.z,_z:0,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,e=!0)}},scale:{ox:s.scale.x,_x:0,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,e=!0)},oy:s.scale.y,_y:0,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,e=!0)},oz:s.scale.z,_z:0,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,e=!0)}},id:s.uuid}}function Te(s,e={bones:{}},t=0){if(s instanceof _t){if(s.uuid in e)return e[s.uuid];e.bones[s.uuid]=s;const r=nn(s);return e[s.uuid]=r,r}if(Array.isArray(s))return s.map(r=>Te(r,e,t+1));const n={},i=Object.keys(s);return i.length&&i.forEach(r=>{n[r]=Te(s[r],e,t+1)}),t===0?{obj:n,cache:e}:n}function sn(s){const{obj:e,cache:t}=Te(s);return e._bones=t.bones,delete t.bones,e._all=Object.values(t),e}function rn({_all:s,_bones:e}){s.forEach(t=>{if(!t.dirty)return;const n=e[t.id];!n||(n.rotation.x=F(t.rotation.x,n.rotation.x,.9),n.rotation.y=F(t.rotation.y,n.rotation.y,.9),n.rotation.z=F(t.rotation.z,n.rotation.z,.9),n.position.x=F(t.position.x,n.position.x,.9),n.position.y=F(t.position.y,n.position.y,.9),n.position.z=F(t.position.z,n.position.z,.9),n.scale.x=F(t.scale.x,n.scale.x,.9),n.scale.y=F(t.scale.y,n.scale.y,.9),n.scale.z=F(t.scale.z,n.scale.z,.9),t.clear())})}class an{constructor({scene:e,camera:t,renderer:n}){this.boneArray=[],this._bones={circleArray:[],spineArray:[],mouthArray:[]},this.bones={},this.loaded=!1,this.conf={wiggleRim:.05,wiggleHat:.05,wiggleMouth:.05,wiggleEyes:.05},this.confKeys=[],this.controls=new pt(t,n.domElement),e.add(this.controls),this.params=we({},this.conf),this.confKeys=Object.keys(this.conf),window.c=this.controls,this.setActiveBone=this.setActiveBone.bind(this)}setActiveBone(e){const t=this.boneArray.find(n=>n.userData.name===e);this.controls.attach(t)}setSkeleton(e){!e||(this.boneArray=Pe(e),this._bones=tn(this.boneArray),this.bones=sn(this._bones),this.loaded=!!this.boneArray.length,console.log(this),window.anim=this)}update(e){if(!this.loaded)return;const{bones:t,conf:n,confKeys:i,params:r}=this;if(i.forEach(a=>{r[a]!==n[a]&&(n[a]=F(r[a],n[a],.05))}),n.wiggleRim&&t.circleArray.forEach((a,o)=>{a.position.y=Math.sin(e/300+o*2)/100*n.wiggleRim}),n.wiggleHat&&t.spineArray.forEach((a,o)=>{a.rotation.x=Math.sin(e/300+o*2)/100*n.wiggleHat,a.rotation.y=Math.sin(e/300+o*1)/100*n.wiggleHat,a.rotation.z=Math.sin(e/300+o*0)/100*n.wiggleHat}),n.wiggleMouth&&(t.mouth.r1.scale.x=Math.sin(e/100+10)/10*n.wiggleMouth,t.mouth.l2.scale.x=Math.sin(e/100+5)/10*n.wiggleMouth,t.mouth.l1.scale.x=Math.sin(e/100+1)/4*n.wiggleMouth-.2,t.mouth.r2.scale.x=Math.sin(e/100+2)/4*n.wiggleMouth-.2,t.mouth.l1.position.y=Math.sin(e/100)/300*n.wiggleMouth-.01,t.mouth.r1.position.y=Math.sin(e/100)/300*n.wiggleMouth-.01),n.wiggleEyes){const a=e/400;t.eyes.l1.scale.x=Math.sin(a+1)/4*n.wiggleEyes-.2,t.eyes.r2.scale.x=Math.sin(a+2)/4*n.wiggleEyes-.2,t.eyes.l1.position.y=Math.sin(a)/300*n.wiggleEyes+.01,t.eyes.r1.position.y=Math.sin(e/200)/300*n.wiggleEyes+.01}rn(this.bones)}}const Ue=new mt,Ge=new gt;Ge.setDecoderPath("draco/");Ue.setDRACOLoader(Ge);async function ln(){const s=new vt,e=s.load("textures/SortingHat_col.jpg"),t=s.load("textures/env_map.jpg");t.mapping=wt,e.flipY=!1;const n=new yt({map:e,envMapIntensity:1,normalScale:new bt(1,1)}),i=await Ue.loadAsync("sorting_hat.glb",a=>{console.log(a.loaded/a.total*100+"% loaded")}),r=i.scene.children[0].children[1];return r.material=n,i}function on(s){let e,t,n,i;return{c(){e=de("svg"),t=de("path"),n=de("path"),i=de("path"),this.h()},l(r){e=_e(r,"svg",{viewBox:!0,style:!0,fill:!0,xmlns:!0});var a=E(e);t=_e(a,"path",{d:!0,stroke:!0,"stroke-width":!0}),E(t).forEach(u),n=_e(a,"path",{d:!0,stroke:!0,"stroke-width":!0}),E(n).forEach(u),i=_e(a,"path",{d:!0,stroke:!0,"stroke-width":!0}),E(i).forEach(u),a.forEach(u),this.h()},h(){g(t,"d","M68.8424 -13.5778V5.30176H27.4473C27.4473 18.0806 27.4473 24.2029 27.4473 35.5006C21.9253 42.4032 19.5381 59.3721 19.0348 66.9937V5.30176H7.17095V16.7342C32.6243 16.7342 80.1659 16.7342 66.7059 16.7342C53.2458 16.7342 41.684 22.6302 37.5855 25.5781H7.17095V66.9937H-15.0309"),g(t,"stroke","black"),g(t,"stroke-width","1"),g(n,"d","M55.6489 17.8342C55.6489 36.7637 40.3035 52.1091 21.374 52.1091"),g(n,"stroke","black"),g(n,"stroke-width","1"),g(i,"d","M41.8151 23.0153V39.6404H25.19"),g(i,"stroke","black"),g(i,"stroke-width","1"),g(e,"viewBox","0 0 70 68"),Z(e,"transform","rotate("+s[0]+")"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){x(r,e,a),v(e,t),v(e,n),v(e,i)},p(r,[a]){a&1&&Z(e,"transform","rotate("+r[0]+")")},i:z,o:z,d(r){r&&u(e)}}}function cn(s,e,t){let{rotate:n="0deg"}=e;return s.$$set=i=>{"rotate"in i&&t(0,n=i.rotate)},[n]}class ge extends G{constructor(e){super();W(this,e,cn,on,j,{rotate:0})}}function un(s){let e,t,n,i,r,a,o,l,c,h,d,m,p,_,w,f,y,A,N,H,P,q,R;return n=new ge({}),a=new ge({props:{rotate:"90deg"}}),c=new ge({props:{rotate:"180deg"}}),m=new ge({props:{rotate:"-90deg"}}),{c(){e=b("div"),t=b("div"),K(n.$$.fragment),i=D(),r=b("div"),K(a.$$.fragment),o=D(),l=b("div"),K(c.$$.fragment),h=D(),d=b("div"),K(m.$$.fragment),p=D(),_=b("div"),w=D(),f=b("div"),y=D(),A=b("div"),N=D(),H=b("div"),P=D(),q=b("div"),this.h()},l(T){e=k(T,"DIV",{class:!0});var M=E(e);t=k(M,"DIV",{class:!0});var ae=E(t);X(n.$$.fragment,ae),ae.forEach(u),i=S(M),r=k(M,"DIV",{class:!0});var le=E(r);X(a.$$.fragment,le),le.forEach(u),o=S(M),l=k(M,"DIV",{class:!0});var oe=E(l);X(c.$$.fragment,oe),oe.forEach(u),h=S(M),d=k(M,"DIV",{class:!0});var ce=E(d);X(m.$$.fragment,ce),ce.forEach(u),p=S(M),_=k(M,"DIV",{class:!0}),E(_).forEach(u),w=S(M),f=k(M,"DIV",{class:!0}),E(f).forEach(u),y=S(M),A=k(M,"DIV",{class:!0}),E(A).forEach(u),N=S(M),H=k(M,"DIV",{class:!0}),E(H).forEach(u),P=S(M),q=k(M,"DIV",{class:!0}),E(q).forEach(u),M.forEach(u),this.h()},h(){g(t,"class","pattern-wrapper svelte-1qzm7t1"),g(r,"class","pattern-wrapper p-tr svelte-1qzm7t1"),g(l,"class","pattern-wrapper p-br svelte-1qzm7t1"),g(d,"class","pattern-wrapper p-bl svelte-1qzm7t1"),g(_,"class","bar b-t svelte-1qzm7t1"),g(f,"class","bar b-r svelte-1qzm7t1"),g(A,"class","bar b-l svelte-1qzm7t1"),g(H,"class","bar b-b svelte-1qzm7t1"),g(q,"class","overlay svelte-1qzm7t1"),g(e,"class","wrapper svelte-1qzm7t1")},m(T,M){x(T,e,M),v(e,t),J(n,t,null),v(e,i),v(e,r),J(a,r,null),v(e,o),v(e,l),J(c,l,null),v(e,h),v(e,d),J(m,d,null),v(e,p),v(e,_),v(e,w),v(e,f),v(e,y),v(e,A),v(e,N),v(e,H),v(e,P),v(e,q),R=!0},p:z,i(T){R||($(n.$$.fragment,T),$(a.$$.fragment,T),$(c.$$.fragment,T),$(m.$$.fragment,T),R=!0)},o(T){V(n.$$.fragment,T),V(a.$$.fragment,T),V(c.$$.fragment,T),V(m.$$.fragment,T),R=!1},d(T){T&&u(e),Q(n),Q(a),Q(c),Q(m)}}}class hn extends G{constructor(e){super();W(this,e,null,un,j,{})}}function We(s,e,t){const n=s.slice();return n[5]=e[t],n[7]=t,n}function je(s){let e,t=s[0],n=[];for(let i=0;i<t.length;i+=1)n[i]=Ke(We(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=U()},l(i){for(let r=0;r<n.length;r+=1)n[r].l(i);e=U()},m(i,r){for(let a=0;a<n.length;a+=1)n[a].m(i,r);x(i,e,r)},p(i,r){if(r&1){t=i[0];let a;for(a=0;a<t.length;a+=1){const o=We(i,t,a);n[a]?(n[a].p(o,r),$(n[a],1)):(n[a]=Ke(o),n[a].c(),$(n[a],1),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i(i){for(let r=0;r<t.length;r+=1)$(n[r])},o:z,d(i){xe(n,i),i&&u(e)}}}function Ke(s){let e,t=s[5]+"",n,i;return{c(){e=b("span"),n=L(t)},l(r){e=k(r,"SPAN",{});var a=E(e);n=B(a,t),a.forEach(u)},m(r,a){x(r,e,a),v(e,n)},p(r,a){s=r,a&1&&t!==(t=s[5]+"")&&be(n,t)},i(r){i||ue(()=>{i=Ee(e,kt,{duration:s[2],delay:s[7]*s[2]}),i.start()})},o:z,d(r){r&&u(e)}}}function fn(s){let e,t=s[1]&&je(s);return{c(){e=b("div"),t&&t.c(),this.h()},l(n){e=k(n,"DIV",{class:!0});var i=E(e);t&&t.l(i),i.forEach(u),this.h()},h(){g(e,"class","wrapper svelte-zdezep")},m(n,i){x(n,e,i),t&&t.m(e,null)},p(n,[i]){n[1]?t?(t.p(n,i),i&2&&$(t,1)):(t=je(n),t.c(),$(t,1),t.m(e,null)):t&&(t.d(1),t=null)},i(n){$(t)},o:z,d(n){n&&u(e),t&&t.d()}}}function dn(s,e,t){let n,i,r,{text:a}=e,{duration:o}=e;return s.$$set=l=>{"text"in l&&t(3,a=l.text),"duration"in l&&t(4,o=l.duration)},s.$$.update=()=>{s.$$.dirty&8&&t(0,n=a.split(" ").map(l=>" "+l)),s.$$.dirty&17&&t(2,i=(o-.5)/n.length*1e3),s.$$.dirty&1&&t(1,r=!(n==null?void 0:n.length)),s.$$.dirty&1&&n.length&&setTimeout(()=>{t(1,r=!0)},200)},[n,r,i,a,o]}class _n extends G{constructor(e){super();W(this,e,dn,fn,j,{text:3,duration:4})}}function pn(s){window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(){s([event.beta,event.gamma])},!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",function(){s([event.acceleration.x*2,event.acceleration.y*2])},!0):window.addEventListener("MozOrientation",function(){s([orientation.x*50,orientation.y*50])},!0)}const{window:Je}=Tt;function Qe(s,e,t){const n=s.slice();return n[29]=e[t],n[31]=t,n}function Ye(s){let e,t;return e=new _n({props:{text:s[1].text,duration:s[1].duration}}),{c(){K(e.$$.fragment)},l(n){X(e.$$.fragment,n)},m(n,i){J(e,n,i),t=!0},p(n,i){const r={};i[0]&2&&(r.text=n[1].text),i[0]&2&&(r.duration=n[1].duration),e.$set(r)},i(n){t||($(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Xe(s){let e,t,n,i;const r=[vn,gn,mn],a=[];function o(l,c){return l[7]==="suspended"?0:l[7]==="finished"?1:l[7]==="input"?2:-1}return~(e=o(s))&&(t=a[e]=r[e](s)),{c(){t&&t.c(),n=U()},l(l){t&&t.l(l),n=U()},m(l,c){~e&&a[e].m(l,c),x(l,n,c),i=!0},p(l,c){let h=e;e=o(l),e===h?~e&&a[e].p(l,c):(t&&(me(),V(a[h],1,1,()=>{a[h]=null}),pe()),~e?(t=a[e],t?t.p(l,c):(t=a[e]=r[e](l),t.c()),$(t,1),t.m(n.parentNode,n)):t=null)},i(l){i||($(t),i=!0)},o(l){V(t),i=!1},d(l){~e&&a[e].d(l),l&&u(n)}}}function mn(s){let e,t,n,i;function r(l){s[15](l)}var a=s[1].element;function o(l){let c={callback:l[14]};return l[0]!==void 0&&(c.showText=l[0]),{props:c}}return a&&(e=new a(o(s)),fe.push(()=>Ae(e,"showText",r))),{c(){e&&K(e.$$.fragment),n=U()},l(l){e&&X(e.$$.fragment,l),n=U()},m(l,c){e&&J(e,l,c),x(l,n,c),i=!0},p(l,c){const h={};if(c[0]&2&&(h.callback=l[14]),!t&&c[0]&1&&(t=!0,h.showText=l[0],He(()=>t=!1)),a!==(a=l[1].element)){if(e){me();const d=e;V(d.$$.fragment,1,0,()=>{Q(d,1)}),pe()}a?(e=new a(o(l)),fe.push(()=>Ae(e,"showText",r)),K(e.$$.fragment),$(e.$$.fragment,1),J(e,n.parentNode,n)):e=null}else a&&e.$set(h)},i(l){i||(e&&$(e.$$.fragment,l),i=!0)},o(l){e&&V(e.$$.fragment,l),i=!1},d(l){l&&u(n),e&&Q(e,l)}}}function gn(s){var n,i;let e,t=((i=(n=s[1])==null?void 0:n.nextActions)==null?void 0:i.length)&&Ze(s);return{c(){t&&t.c(),e=U()},l(r){t&&t.l(r),e=U()},m(r,a){t&&t.m(r,a),x(r,e,a)},p(r,a){var o,l;((l=(o=r[1])==null?void 0:o.nextActions)==null?void 0:l.length)?t?(t.p(r,a),a[0]&2&&$(t,1)):(t=Ze(r),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i(r){$(t)},o:z,d(r){t&&t.d(r),r&&u(e)}}}function vn(s){let e,t,n,i;return{c(){e=b("button"),t=L("Starten")},l(r){e=k(r,"BUTTON",{});var a=E(e);t=B(a,"Starten"),a.forEach(u)},m(r,a){x(r,e,a),v(e,t),n||(i=O(e,"click",s[12]),n=!0)},p:z,i:z,o:z,d(r){r&&u(e),n=!1,i()}}}function Ze(s){let e,t=s[1].nextActions,n=[];for(let i=0;i<t.length;i+=1)n[i]=et(Qe(s,t,i));return{c(){e=b("div");for(let i=0;i<n.length;i+=1)n[i].c()},l(i){e=k(i,"DIV",{});var r=E(e);for(let a=0;a<n.length;a+=1)n[a].l(r);r.forEach(u)},m(i,r){x(i,e,r);for(let a=0;a<n.length;a+=1)n[a].m(e,null)},p(i,r){if(r[0]&2){t=i[1].nextActions;let a;for(a=0;a<t.length;a+=1){const o=Qe(i,t,a);n[a]?(n[a].p(o,r),$(n[a],1)):(n[a]=et(o),n[a].c(),$(n[a],1),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i(i){for(let r=0;r<t.length;r+=1)$(n[r])},o:z,d(i){i&&u(e),xe(n,i)}}}function et(s){let e,t=s[29].name+"",n,i,r,a;function o(){return s[13](s[29])}return{c(){e=b("button"),n=L(t)},l(l){e=k(l,"BUTTON",{});var c=E(e);n=B(c,t),c.forEach(u)},m(l,c){x(l,e,c),v(e,n),r||(a=O(e,"click",o),r=!0)},p(l,c){s=l,c[0]&2&&t!==(t=s[29].name+"")&&be(n,t)},i(l){i||ue(()=>{i=Ee(e,he,{duration:200,delay:200*s[31]}),i.start()})},o:z,d(l){l&&u(e),r=!1,a()}}}function wn(s){var w;let e,t,n,i,r,a,o,l,c,h,d,m;t=new hn({});let p=((w=s[1])==null?void 0:w.text)&&(s[7]==="running"||s[7]==="finished"||s[7]==="input")&&s[6]&&Ye(s),_=s[7]&&Xe(s);return{c(){e=D(),K(t.$$.fragment),n=D(),i=b("main"),r=b("canvas"),o=D(),l=b("div"),p&&p.c(),c=D(),_&&_.c(),this.h()},l(f){Et('[data-svelte="svelte-tqpvny"]',document.head).forEach(u),e=S(f),X(t.$$.fragment,f),n=S(f),i=k(f,"MAIN",{class:!0});var A=E(i);r=k(A,"CANVAS",{style:!0,class:!0}),E(r).forEach(u),o=S(A),l=k(A,"DIV",{class:!0});var N=E(l);p&&p.l(N),c=S(N),_&&_.l(N),N.forEach(u),A.forEach(u),this.h()},h(){document.title="Dungeon Entry",g(r,"style",a=`display:${s[3]?"block":"none"}`),g(r,"class","svelte-5os1af"),Le(r,"loaded",s[3]),g(l,"class","content svelte-5os1af"),g(i,"class","svelte-5os1af")},m(f,y){x(f,e,y),J(t,f,y),x(f,n,y),x(f,i,y),v(i,r),s[10](r),v(i,o),v(i,l),p&&p.m(l,null),v(l,c),_&&_.m(l,null),h=!0,d||(m=[O(Je,"mousemove",s[8]),O(Je,"resize",s[9]),O(r,"click",s[11])],d=!0)},p(f,y){var A;(!h||y[0]&8&&a!==(a=`display:${f[3]?"block":"none"}`))&&g(r,"style",a),y[0]&8&&Le(r,"loaded",f[3]),((A=f[1])==null?void 0:A.text)&&(f[7]==="running"||f[7]==="finished"||f[7]==="input")&&f[6]?p?(p.p(f,y),y[0]&194&&$(p,1)):(p=Ye(f),p.c(),$(p,1),p.m(l,c)):p&&(me(),V(p,1,1,()=>{p=null}),pe()),f[7]?_?(_.p(f,y),y[0]&128&&$(_,1)):(_=Xe(f),_.c(),$(_,1),_.m(l,null)):_&&(me(),V(_,1,1,()=>{_=null}),pe())},i(f){h||($(t.$$.fragment,f),$(p),$(_),h=!0)},o(f){V(t.$$.fragment,f),V(p),V(_),h=!1},d(f){f&&u(e),Q(t,f),f&&u(n),f&&u(i),s[10](null),p&&p.d(),_&&_.d(),d=!1,ye(m)}}}const ve=500;function yn(s,e,t){let n,i,r,a,o=z,l=()=>(o(),o=$t(i,I=>t(7,a=I)),i);xt(s,qe,I=>t(1,r=I)),s.$$.on_destroy.push(()=>o());let c;const h=new At,d=new $e(12626431,.8);d.position.set(2.5,2.5,2),h.add(d);const m=new $e(16765393,.8);m.position.set(-2.5,2.5,2),h.add(m);const p=new $e(16777215,1);p.position.set(1,1,-1.5),h.add(p);let _=!0;const w=ve;let f=ve,y=w,A=0,N=0,H=0,P=0,q=!1;const R=new zt(50,ve/w,.1,1e3);R.position.set(0,0,1);let T;function M({clientX:I,clientY:Y}){H=2-I/y*2-1,P=Y/f*2-1}async function ae(){const I=await ln(),Y=I.scene.children[0].children[1],ne=I.scene.children[0].children[0];T.setSkeleton(ne),Y.geometry.computeBoundingBox();const ie=new It,se=Y.geometry.boundingBox;se.getCenter(ie),R.position.x=ie.x,R.position.y=ie.y;const ee=(se.max.y-ie.y)*4/2/Math.tan(Math.PI*R.fov/360);R.position.z=ee,h.add(I.scene),t(3,q=!0)}function le(){f=window.innerHeight,y=window.innerWidth}ke(()=>{f=window.innerHeight,y=window.innerWidth;let I,Y;pn(([ee,Ie,bn])=>{I||(I=ee),Y||(Y=Ie),H=(Y-Ie)/100,P=(I-ee)/100}),ae();const ne=new Mt({canvas:c,alpha:!0});ne.setSize(ve,w),t(4,T=new an({scene:h,renderer:ne,camera:R})),en(T).setActive();function se(ee){requestAnimationFrame(se),T==null||T.update(ee),A=F(H,A,.1),N=F(P,N,.1),R.position.x=A*.8,R.position.y=N*.3+.1,R.lookAt(0,.2,0),Me()}function Me(){ne.render(h,R)}se(0)});function oe(I){fe[I?"unshift":"push"](()=>{c=I,t(2,c)})}const ce=()=>{T.params.wiggleRim<1&&(t(4,T.params.wiggleRim=5,T),t(4,T.params.wiggleEyes=1,T),setTimeout(()=>{t(4,T.params.wiggleRim=0,T),t(4,T.params.wiggleEyes=0,T)},1e3))},tt=()=>r.start(),nt=I=>I.action.start(),it=I=>{r.handleElementCallback(I)};function st(I){_=I,t(0,_)}return s.$$.update=()=>{s.$$.dirty[0]&1&&t(6,n=_===!0||_===void 0),s.$$.dirty[0]&2&&l(t(5,i=r&&r.state))},[_,r,c,q,T,i,n,a,M,le,oe,ce,tt,nt,it,st]}class xn extends G{constructor(e){super();W(this,e,yn,wn,j,{},null,[-1,-1])}}export{xn as default};
