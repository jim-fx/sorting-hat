import{S as N,i as Q,s as S,an as K,e as $,t as w,k as A,l as R,c as g,a as b,g as z,d as m,n as I,f as k,G as v,h as j,j as V,m as H,b as y,o as C,x as q,u as E,v as P,ab as T,r as B,w as F,U as G,X as L,W as Z,ao as x,Y as ee,A as te}from"../chunks/vendor-4e2f73f3.js";import{p as M,q as se}from"../chunks/stores-182682cd.js";import{g as re}from"../chunks/index-21c51c30.js";import{C as O}from"../chunks/Crest-665c9bfc.js";import{T as le}from"../chunks/Crest.svelte_svelte_type_style_lang-238b461c.js";function ne(a,e,s){let{quiz:t}=e;return a.$$set=l=>{"quiz"in l&&s(0,t=l.quiz)},[t]}class ie extends N{constructor(e){super();Q(this,e,ne,null,S,{quiz:0})}}const U={gryffindor:"#75262A",hufflepuff:"#F1DE16",ravenclaw:"#1F4963",slytherin:"#437845"};function ae(a){let e,s,t,l,n,u=a[7].pts+"",c,r,_,i;return t=new O({props:{house:a[7].name,showName:!0}}),{c(){e=$("div"),s=$("div"),V(t.$$.fragment),l=A(),n=$("h2"),c=w(u),r=w(" Punkte"),this.h()},l(o){e=g(o,"DIV",{class:!0,style:!0});var d=b(e);s=g(d,"DIV",{class:!0});var f=b(s);H(t.$$.fragment,f),f.forEach(m),l=I(d),n=g(d,"H2",{class:!0});var p=b(n);c=z(p,u),r=z(p," Punkte"),p.forEach(m),d.forEach(m),this.h()},h(){y(s,"class","crest svelte-avrmqx"),y(n,"class","svelte-avrmqx"),y(e,"class","house svelte-avrmqx"),y(e,"style",_=`--color: ${U[a[7].name]}`)},m(o,d){k(o,e,d),v(e,s),C(t,s,null),v(e,l),v(e,n),v(n,c),v(n,r),i=!0},p(o,d){const f={};d&128&&(f.house=o[7].name),t.$set(f),(!i||d&128)&&u!==(u=o[7].pts+"")&&j(c,u),(!i||d&128&&_!==(_=`--color: ${U[o[7].name]}`))&&y(e,"style",_)},i(o){i||(q(t.$$.fragment,o),i=!0)},o(o){E(t.$$.fragment,o),i=!1},d(o){o&&m(e),P(t)}}}function X(a){var _;let e,s=((_=a[1])==null?void 0:_.description)+"",t,l,n;function u(i,o){return i[4]?oe:ue}let c=u(a),r=c(a);return{c(){e=$("h1"),t=w(s),l=A(),r.c(),n=R()},l(i){e=g(i,"H1",{});var o=b(e);t=z(o,s),o.forEach(m),l=I(i),r.l(i),n=R()},m(i,o){k(i,e,o),v(e,t),k(i,l,o),r.m(i,o),k(i,n,o)},p(i,o){var d;o&2&&s!==(s=((d=i[1])==null?void 0:d.description)+"")&&j(t,s),c===(c=u(i))&&r?r.p(i,o):(r.d(1),r=c(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){i&&m(e),i&&m(l),r.d(i),i&&m(n)}}}function ue(a){let e,s,t,l=a[0].users.length+"",n;return{c(){e=$("p"),s=w(a[3]),t=w("/"),n=w(l)},l(u){e=g(u,"P",{});var c=b(e);s=z(c,a[3]),t=z(c,"/"),n=z(c,l),c.forEach(m)},m(u,c){k(u,e,c),v(e,s),v(e,t),v(e,n)},p(u,c){c&8&&j(s,u[3]),c&1&&l!==(l=u[0].users.length+"")&&j(n,l)},d(u){u&&m(e)}}}function oe(a){let e,s=a[4].value+"",t;return{c(){e=$("p"),t=w(s)},l(l){e=g(l,"P",{});var n=b(e);t=z(n,s),n.forEach(m)},m(l,n){k(l,e,n),v(e,t)},p(l,n){n&16&&s!==(s=l[4].value+"")&&j(t,s)},d(l){l&&m(e)}}}function ce(a){let e,s,t,l,n,u;t=new K({props:{list:a[2],key:"name",$$slots:{default:[ae,({item:r})=>({7:r}),({item:r})=>r?128:0]},$$scope:{ctx:a}}});let c=a[1]&&X(a);return{c(){e=$("div"),s=$("div"),V(t.$$.fragment),l=A(),n=$("div"),c&&c.c(),this.h()},l(r){e=g(r,"DIV",{class:!0});var _=b(e);s=g(_,"DIV",{class:!0});var i=b(s);H(t.$$.fragment,i),i.forEach(m),l=I(_),n=g(_,"DIV",{class:!0});var o=b(n);c&&c.l(o),o.forEach(m),_.forEach(m),this.h()},h(){y(s,"class","house-wrapper svelte-avrmqx"),y(n,"class","current-question svelte-avrmqx"),y(e,"class","container svelte-avrmqx")},m(r,_){k(r,e,_),v(e,s),C(t,s,null),v(e,l),v(e,n),c&&c.m(n,null),u=!0},p(r,[_]){const i={};_&4&&(i.list=r[2]),_&384&&(i.$$scope={dirty:_,ctx:r}),t.$set(i),r[1]?c?c.p(r,_):(c=X(r),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i(r){u||(q(t.$$.fragment,r),u=!0)},o(r){E(t.$$.fragment,r),u=!1},d(r){r&&m(e),P(t),c&&c.d()}}}function fe(a,e,s){let t,l,n,u,c,r;T(a,M,i=>s(6,r=i));let{quiz:_}=e;return a.$$set=i=>{"quiz"in i&&s(0,_=i.quiz)},a.$$.update=()=>{a.$$.dirty&1&&s(1,t=_==null?void 0:_.activeQuestion),a.$$.dirty&2&&s(4,l=t==null?void 0:t.answers.find(i=>(i==null?void 0:i.id)===(t==null?void 0:t.correctAnswer))),a.$$.dirty&2&&s(3,n=t.type==="multiple"?t.answers.map(i=>i.votes.length).reduce((i,o)=>i+o,0):t.answers.length),a.$$.dirty&64&&s(5,u=Object.entries(r==null?void 0:r.house).map(([i,o])=>({name:i,pts:o}))),a.$$.dirty&32&&s(2,c=u.sort((i,o)=>i.pts>o.pts?-1:1))},[_,t,c,n,l,u,r]}class _e extends N{constructor(e){super();Q(this,e,fe,ce,S,{quiz:0})}}function Y(a,e,s){const t=a.slice();return t[3]=e[s],t}function pe(a){let e,s,t,l,n=a[0].description+"",u,c,r,_,i=a[1],o=[];for(let f=0;f<i.length;f+=1)o[f]=J(Y(a,i,f));const d=f=>E(o[f],1,1,()=>{o[f]=null});return{c(){e=$("h3"),s=w("Registriert euch f\xFCr"),t=A(),l=$("h1"),u=w(n),c=A(),r=$("div");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=g(f,"H3",{class:!0});var p=b(e);s=z(p,"Registriert euch f\xFCr"),p.forEach(m),t=I(f),l=g(f,"H1",{class:!0});var h=b(l);u=z(h,n),h.forEach(m),c=I(f),r=g(f,"DIV",{class:!0});var D=b(r);for(let W=0;W<o.length;W+=1)o[W].l(D);D.forEach(m),this.h()},h(){y(e,"class","svelte-2bu6ux"),y(l,"class","svelte-2bu6ux"),y(r,"class","users svelte-2bu6ux")},m(f,p){k(f,e,p),v(e,s),k(f,t,p),k(f,l,p),v(l,u),k(f,c,p),k(f,r,p);for(let h=0;h<o.length;h+=1)o[h].m(r,null);_=!0},p(f,p){if((!_||p&1)&&n!==(n=f[0].description+"")&&j(u,n),p&2){i=f[1];let h;for(h=0;h<i.length;h+=1){const D=Y(f,i,h);o[h]?(o[h].p(D,p),q(o[h],1)):(o[h]=J(D),o[h].c(),q(o[h],1),o[h].m(r,null))}for(B(),h=i.length;h<o.length;h+=1)d(h);F()}},i(f){if(!_){for(let p=0;p<i.length;p+=1)q(o[p]);_=!0}},o(f){o=o.filter(Boolean);for(let p=0;p<o.length;p+=1)E(o[p]);_=!1},d(f){f&&m(e),f&&m(t),f&&m(l),f&&m(c),f&&m(r),ee(o,f)}}}function me(a){let e,s;return e=new le({props:{endsAt:a[0].startsAt,$$slots:{default:[he,({secondsLeft:t})=>({2:t}),({secondsLeft:t})=>t?4:0]},$$scope:{ctx:a}}}),{c(){V(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){C(e,t,l),s=!0},p(t,l){const n={};l&1&&(n.endsAt=t[0].startsAt),l&68&&(n.$$scope={dirty:l,ctx:t}),e.$set(n)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function J(a){let e,s,t,l,n,u,c=a[3].name+"",r,_,i,o,d;return t=new O({props:{house:a[3].house}}),{c(){e=$("div"),s=$("div"),V(t.$$.fragment),n=A(),u=$("p"),r=w(c),_=w(" registered"),i=A(),this.h()},l(f){e=g(f,"DIV",{class:!0});var p=b(e);s=g(p,"DIV",{class:!0});var h=b(s);H(t.$$.fragment,h),h.forEach(m),n=I(p),u=g(p,"P",{class:!0});var D=b(u);r=z(D,c),_=z(D," registered"),D.forEach(m),i=I(p),p.forEach(m),this.h()},h(){y(s,"class","crest svelte-2bu6ux"),y(u,"class","svelte-2bu6ux"),y(e,"class","user svelte-2bu6ux")},m(f,p){k(f,e,p),v(e,s),C(t,s,null),v(e,n),v(e,u),v(u,r),v(u,_),v(e,i),d=!0},p(f,p){const h={};p&2&&(h.house=f[3].house),t.$set(h),(!d||p&2)&&c!==(c=f[3].name+"")&&j(r,c)},i(f){d||(q(t.$$.fragment,f),l||G(()=>{l=L(s,Z,{delay:500}),l.start()}),o||G(()=>{o=L(e,x,{}),o.start()}),d=!0)},o(f){E(t.$$.fragment,f),d=!1},d(f){f&&m(e),P(t)}}}function he(a){let e,s,t=a[2]+"",l;return{c(){e=$("h1"),s=w("Quiz startet in "),l=w(t),this.h()},l(n){e=g(n,"H1",{class:!0});var u=b(e);s=z(u,"Quiz startet in "),l=z(u,t),u.forEach(m),this.h()},h(){y(e,"class","svelte-2bu6ux")},m(n,u){k(n,e,u),v(e,s),v(e,l)},p(n,u){u&4&&t!==(t=n[2]+"")&&j(l,t)},d(n){n&&m(e)}}}function de(a){let e,s,t,l;const n=[me,pe],u=[];function c(r,_){return r[0].startsAt?0:1}return e=c(a),s=u[e]=n[e](a),{c(){s.c(),t=R()},l(r){s.l(r),t=R()},m(r,_){u[e].m(r,_),k(r,t,_),l=!0},p(r,[_]){let i=e;e=c(r),e===i?u[e].p(r,_):(B(),E(u[i],1,1,()=>{u[i]=null}),F(),s=u[e],s?s.p(r,_):(s=u[e]=n[e](r),s.c()),q(s,1),s.m(t.parentNode,t))},i(r){l||(q(s),l=!0)},o(r){E(s),l=!1},d(r){u[e].d(r),r&&m(t)}}}function ve(a,e,s){let t,{quiz:l}=e;return a.$$set=n=>{"quiz"in n&&s(0,l=n.quiz)},a.$$.update=()=>{a.$$.dirty&1&&s(1,t=(l==null?void 0:l.users)||[])},[l,t]}class $e extends N{constructor(e){super();Q(this,e,ve,de,S,{quiz:0})}}function ge(a){let e,s;return e=new ie({props:{quiz:a[0]}}),{c(){V(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){C(e,t,l),s=!0},p(t,l){const n={};l&1&&(n.quiz=t[0]),e.$set(n)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function be(a){let e,s;return e=new _e({props:{quiz:a[0]}}),{c(){V(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){C(e,t,l),s=!0},p(t,l){const n={};l&1&&(n.quiz=t[0]),e.$set(n)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function ke(a){let e,s;return e=new $e({props:{quiz:a[0]}}),{c(){V(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,l){C(e,t,l),s=!0},p(t,l){const n={};l&1&&(n.quiz=t[0]),e.$set(n)},i(t){s||(q(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function ye(a){let e,s,t,l;const n=[ke,be,ge],u=[];function c(r,_){var i,o,d;return((i=r[0])==null?void 0:i.state)==="registration"?0:((o=r[0])==null?void 0:o.state)==="running"?1:((d=r[0])==null?void 0:d.state)==="results"?2:-1}return~(e=c(a))&&(s=u[e]=n[e](a)),{c(){s&&s.c(),t=R()},l(r){s&&s.l(r),t=R()},m(r,_){~e&&u[e].m(r,_),k(r,t,_),l=!0},p(r,[_]){let i=e;e=c(r),e===i?~e&&u[e].p(r,_):(s&&(B(),E(u[i],1,1,()=>{u[i]=null}),F()),~e?(s=u[e],s?s.p(r,_):(s=u[e]=n[e](r),s.c()),q(s,1),s.m(t.parentNode,t)):s=null)},i(r){l||(q(s),l=!0)},o(r){E(s),l=!1},d(r){~e&&u[e].d(r),r&&m(t)}}}function qe(a,e,s){let t;return T(a,se,l=>s(0,t=l)),te(async()=>{const n=await(await re("api/quiz/points")).json();M.set(n)}),[t]}class Ae extends N{constructor(e){super();Q(this,e,qe,ye,S,{})}}export{Ae as default};
