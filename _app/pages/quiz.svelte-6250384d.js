import{S as qe,i as ye,s as Ae,e as k,t as C,k as T,l as ne,c as g,a as w,g as I,d as u,n as $,b as v,f as q,G as m,h as L,H as O,a9 as _e,ak as bt,ag as Oe,ao as x,X as Pe,a8 as Y,N as de,M as Ue,O as kt,A as gt,Z as oe,_ as he,I as Te,j as re,m as ae,F as fe,o as ue,$ as pe,J as $e,K as ze,L as je,x as M,T as He,W as wt,V as Et,u as U,v as ce,af as qt,w as Qe,U as Je,r as Ke,ae as Le}from"../chunks/vendor-3c54998b.js";import{q as Xe,l as Ze,u as yt}from"../chunks/stores-b0045d4a.js";import{p as Re,d as At}from"../chunks/index-76bbb2a0.js";import{s as Ge}from"../chunks/pointerStore-2d83d93d.js";import{T as Vt}from"../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{C as Dt}from"../chunks/Crest-599c5571.js";function Ye(l,e,s){const t=l.slice();return t[20]=e[s],t[24]=s,t}function xe(l,e,s){const t=l.slice();return t[20]=e[s],t}function et(l,e,s){const t=l.slice();return t[17]=e[s],t}function St(l){let e,s=l[1].answers.sort(it),t=[];for(let n=0;n<s.length;n+=1)t[n]=tt(Ye(l,s,n));return{c(){e=k("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var o=w(e);for(let i=0;i<t.length;i+=1)t[i].l(o);o.forEach(u),this.h()},h(){v(e,"class","vote-wrapper svelte-13h57us")},m(n,o){q(n,e,o);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(n,o){if(o&514){s=n[1].answers.sort(it);let i;for(i=0;i<s.length;i+=1){const r=Ye(n,s,i);t[i]?t[i].p(r,o):(t[i]=tt(r),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){n&&u(e),Pe(t,n)}}}function Nt(l){let e,s=l[1].answers,t=[];for(let n=0;n<s.length;n+=1)t[n]=nt(xe(l,s,n));return{c(){e=k("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var o=w(e);for(let i=0;i<t.length;i+=1)t[i].l(o);o.forEach(u),this.h()},h(){v(e,"class","vote-wrapper svelte-13h57us")},m(n,o){q(n,e,o);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(n,o){if(o&278){s=n[1].answers;let i;for(i=0;i<s.length;i+=1){const r=xe(n,s,i);t[i]?t[i].p(r,o):(t[i]=nt(r),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){n&&u(e),Pe(t,n)}}}function Ct(l){let e,s,t,n,o,i,r;return{c(){e=k("textarea"),s=T(),t=k("button"),n=C("abschicken"),this.h()},l(a){e=g(a,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,class:!0}),w(e).forEach(u),s=$(a),t=g(a,"BUTTON",{});var f=w(t);n=I(f,"abschicken"),f.forEach(u),this.h()},h(){var a;v(e,"name",""),v(e,"id",""),v(e,"cols","30"),v(e,"rows","10"),v(e,"class","svelte-13h57us"),t.disabled=o=!((a=l[0])==null?void 0:a.length)},m(a,f){q(a,e,f),Ue(e,l[0]),q(a,s,f),q(a,t,f),m(t,n),i||(r=[de(e,"input",l[11]),de(t,"click",l[12])],i=!0)},p(a,f){var c;f&1&&Ue(e,a[0]),f&1&&o!==(o=!((c=a[0])==null?void 0:c.length))&&(t.disabled=o)},d(a){a&&u(e),a&&u(s),a&&u(t),i=!1,kt(r)}}}function It(l){let e,s=l[1].answers,t=[];for(let n=0;n<s.length;n+=1)t[n]=lt(et(l,s,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=ne()},l(n){for(let o=0;o<t.length;o+=1)t[o].l(n);e=ne()},m(n,o){for(let i=0;i<t.length;i+=1)t[i].m(n,o);q(n,e,o)},p(n,o){if(o&82){s=n[1].answers;let i;for(i=0;i<s.length;i+=1){const r=et(n,s,i);t[i]?t[i].p(r,o):(t[i]=lt(r),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){Pe(t,n),n&&u(e)}}}function Pt(l){let e,s,t=l[9](l[20].userId)+"",n,o;return{c(){e=k("br"),s=C(`
					(`),n=C(t),o=C(")")},l(i){e=g(i,"BR",{}),s=I(i,`
					(`),n=I(i,t),o=I(i,")")},m(i,r){q(i,e,r),q(i,s,r),q(i,n,r),q(i,o,r)},p(i,r){r&2&&t!==(t=i[9](i[20].userId)+"")&&L(n,t)},d(i){i&&u(e),i&&u(s),i&&u(n),i&&u(o)}}}function tt(l){let e,s=l[20].votes.length+"",t,n,o,i=l[20].value+"",r,a,f,c=l[24]===0&&Pt(l);return{c(){e=k("p"),t=C(s),n=T(),o=k("p"),r=C(i),a=T(),c&&c.c(),f=T(),this.h()},l(d){e=g(d,"P",{class:!0});var h=w(e);t=I(h,s),h.forEach(u),n=$(d),o=g(d,"P",{class:!0});var b=w(o);r=I(b,i),a=$(b),c&&c.l(b),f=$(b),b.forEach(u),this.h()},h(){v(e,"class","vote-amount svelte-13h57us"),v(o,"class","vote-value svelte-13h57us")},m(d,h){q(d,e,h),m(e,t),q(d,n,h),q(d,o,h),m(o,r),m(o,a),c&&c.m(o,null),m(o,f)},p(d,h){h&2&&s!==(s=d[20].votes.length+"")&&L(t,s),h&2&&i!==(i=d[20].value+"")&&L(r,i),d[24]===0&&c.p(d,h)},d(d){d&&u(e),d&&u(n),d&&u(o),c&&c.d()}}}function st(l){let e,s=(l[4].vote!==l[20].id?"\u2610":"\u2612")+"",t,n,o,i=l[20].value+"",r,a,f;function c(){return l[13](l[20])}return{c(){e=k("button"),t=C(s),n=T(),o=k("p"),r=C(i),this.h()},l(d){e=g(d,"BUTTON",{class:!0});var h=w(e);t=I(h,s),h.forEach(u),n=$(d),o=g(d,"P",{class:!0});var b=w(o);r=I(b,i),b.forEach(u),this.h()},h(){v(e,"class","vote-button svelte-13h57us"),Y(e,"selected",l[4].vote===l[20].id),v(o,"class","vote-value svelte-13h57us")},m(d,h){q(d,e,h),m(e,t),q(d,n,h),q(d,o,h),m(o,r),a||(f=de(e,"click",c),a=!0)},p(d,h){l=d,h&18&&s!==(s=(l[4].vote!==l[20].id?"\u2610":"\u2612")+"")&&L(t,s),h&18&&Y(e,"selected",l[4].vote===l[20].id),h&2&&i!==(i=l[20].value+"")&&L(r,i)},d(d){d&&u(e),d&&u(n),d&&u(o),a=!1,f()}}}function nt(l){let e,s=l[20].userId!==l[2].id&&st(l);return{c(){s&&s.c(),e=ne()},l(t){s&&s.l(t),e=ne()},m(t,n){s&&s.m(t,n),q(t,e,n)},p(t,n){t[20].userId!==t[2].id?s?s.p(t,n):(s=st(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){s&&s.d(t),t&&u(e)}}}function lt(l){let e,s=l[17].value+"",t,n,o;function i(){return l[10](l[17])}return{c(){e=k("button"),t=C(s),this.h()},l(r){e=g(r,"BUTTON",{class:!0});var a=w(e);t=I(a,s),a.forEach(u),this.h()},h(){var r,a,f;v(e,"class","answer svelte-13h57us"),Y(e,"showAnswer",(r=l[1])==null?void 0:r.correctAnswer),Y(e,"correct",l[17].id===((a=l[1])==null?void 0:a.correctAnswer)),Y(e,"selected",((f=l[4])==null?void 0:f.aid)===l[17].id)},m(r,a){q(r,e,a),m(e,t),n||(o=de(e,"click",i),n=!0)},p(r,a){var f,c,d;l=r,a&2&&s!==(s=l[17].value+"")&&L(t,s),a&2&&Y(e,"showAnswer",(f=l[1])==null?void 0:f.correctAnswer),a&2&&Y(e,"correct",l[17].id===((c=l[1])==null?void 0:c.correctAnswer)),a&18&&Y(e,"selected",((d=l[4])==null?void 0:d.aid)===l[17].id)},d(r){r&&u(e),n=!1,o()}}}function Tt(l){let e,s,t=l[1].index+1+"",n,o,i=l[5].amount+"",r,a,f=l[1].description+"",c,d,h;function b(p,V){if(p[1].type==="multiple")return It;if(p[1].state==="open")return Ct;if(p[1].state==="voting-open")return Nt;if(p[1].state==="closed")return St}let _=b(l),y=_&&_(l);return{c(){e=k("p"),s=C("("),n=C(t),o=C("/"),r=C(i),a=C(") "),c=C(f),d=T(),y&&y.c(),h=ne(),this.h()},l(p){e=g(p,"P",{class:!0});var V=w(e);s=I(V,"("),n=I(V,t),o=I(V,"/"),r=I(V,i),a=I(V,") "),c=I(V,f),V.forEach(u),d=$(p),y&&y.l(p),h=ne(),this.h()},h(){v(e,"class","description svelte-13h57us")},m(p,V){q(p,e,V),m(e,s),m(e,n),m(e,o),m(e,r),m(e,a),m(e,c),q(p,d,V),y&&y.m(p,V),q(p,h,V)},p(p,[V]){V&2&&t!==(t=p[1].index+1+"")&&L(n,t),V&32&&i!==(i=p[5].amount+"")&&L(r,i),V&2&&f!==(f=p[1].description+"")&&L(c,f),_===(_=b(p))&&y?y.p(p,V):(y&&y.d(1),y=_&&_(p),y&&(y.c(),y.m(h.parentNode,h)))},i:O,o:O,d(p){p&&u(e),p&&u(d),y&&y.d(p),p&&u(h)}}}const it=(l,e)=>l.votes.length>e.votes.length?-1:1;function $t(l,e,s){let t,n,o=O,i=()=>(o(),o=Oe(d,A=>s(4,n=A)),d),r;_e(l,Xe,A=>s(5,r=A)),l.$$.on_destroy.push(()=>o());const a=bt();let{question:f}=e,{userData:c}=e;const d=Ze("active-question",{qid:"",aid:"",value:"",vote:""});i();let{textValue:h}=e;function b(A){A!==n.qid&&f.state==="open"&&(x(d,n.qid=f.id,n),x(d,n.aid=A,n),a("answer",A))}function _(A){a("text",A)}function y(A){x(d,n.vote=A,n),a("vote",A)}function p(A){const N=t.find(F=>F.id===A);return N?N==null?void 0:N.name:""}const V=A=>b(A.id);function D(){h=this.value,s(0,h)}const z=()=>_(h),j=A=>y(A.id);return l.$$set=A=>{"question"in A&&s(1,f=A.question),"userData"in A&&s(2,c=A.userData),"textValue"in A&&s(0,h=A.textValue)},l.$$.update=()=>{l.$$.dirty&32&&(t=r.users),l.$$.dirty&18&&(f==null||f.correctAnswer,n.aid)},[h,f,c,d,n,r,b,_,y,p,V,D,z,j]}class zt extends qe{constructor(e){super();ye(this,e,$t,Tt,Ae,{question:1,userData:2,questionStore:3,textValue:0})}get questionStore(){return this.$$.ctx[3]}}function jt(l){let e;return{c(){e=k("canvas"),this.h()},l(s){e=g(s,"CANVAS",{width:!0,height:!0,style:!0,class:!0}),w(e).forEach(u),this.h()},h(){v(e,"width",l[0]),v(e,"height",l[1]),v(e,"style","transform: translateZ(var(--z))"),v(e,"class","svelte-m0dfni")},m(s,t){q(s,e,t),l[5](e)},p(s,[t]){t&1&&v(e,"width",s[0]),t&2&&v(e,"height",s[1])},i:O,o:O,d(s){s&&u(e),l[5](null)}}}const me=9;function Rt(l,e,s){let t,n;_e(l,Ge,D=>s(9,n=D));let{width:o=200}=e,{height:i=400}=e,{amount:r=200}=e,a,f;function c(D,z){t.splice(D,z.length,...z)}function d(D){return t.slice(D,D+me)}const h=()=>Math.random();function b(){for(let D=0;D<t.length-me;D+=me){const z=o/2,j=i-10,A=5+Math.random()*7,N=A/12,F=(h()-.5)*(N*N)*5,H=1+Math.random()*5,B=1+Math.random()*5,Q=Math.random(),W=Math.random()*.1,S=.1+Math.random()*.4;c(D,[z,j,F,A,H,B,Q,W,S])}_||(_=!0,p())}let _=!1;function y(){b()}function p(){if(_)requestAnimationFrame(p);else{f.clearRect(0,0,o,i);return}f.clearRect(0,0,o,i);const D=n.x;n.y;let z=0;for(let j=0;j<r;j++){let[A,N,F,H,B,Q,W,S,R]=d(j*me);if(A===0)continue;z++;const J=R+W/10%.5;f.fillStyle=`hsl(34, 100%, ${J*100}%, 1)`,f.save(),f.translate(A+B/2,N+Q/2),f.rotate(W),f.fillRect(-B/2,-Q/2,B,Q),f.restore(),A-=F-D,N-=H-.2,H>-2&&(H-=.2),W+=S,N>i&&(A=0),c(j*me,[A,N,F,H,B,Q,W,S])}_=z>1}gt(()=>{f=a.getContext("2d")});function V(D){oe[D?"unshift":"push"](()=>{a=D,s(2,a)})}return l.$$set=D=>{"width"in D&&s(0,o=D.width),"height"in D&&s(1,i=D.height),"amount"in D&&s(3,r=D.amount)},l.$$.update=()=>{l.$$.dirty&8&&(t=new Array(r*me).fill(null))},[o,i,a,r,y,V]}class ot extends qe{constructor(e){super();ye(this,e,Rt,jt,Ae,{width:0,height:1,amount:3,show:4})}get show(){return this.$$.ctx[4]}}const Mt=l=>({}),rt=l=>({}),Ft=l=>({}),at=l=>({}),Bt=l=>({}),ft=l=>({});function Wt(l){let e,s;return{c(){e=k("p"),s=C("No Frontside")},l(t){e=g(t,"P",{});var n=w(e);s=I(n,"No Frontside"),n.forEach(u)},m(t,n){q(t,e,n),m(e,s)},d(t){t&&u(e)}}}function Ot(l){let e;return{c(){e=k("p")},l(s){e=g(s,"P",{}),w(e).forEach(u)},m(s,t){q(s,e,t)},d(s){s&&u(e)}}}function Ut(l){let e;return{c(){e=k("span")},l(s){e=g(s,"SPAN",{}),w(e).forEach(u)},m(s,t){q(s,e,t)},d(s){s&&u(e)}}}function Ht(l){let e,s,t,n,o,i,r,a,f,c,d,h,b,_,y,p,V,D,z,j,A,N,F,H,B,Q,W,S,R,J,le,Ve,ie,ve,De,Se,K;function mt(E){l[8](E)}let Me={amount:200};l[1]!==void 0&&(Me.show=l[1]),s=new ot({props:Me}),oe.push(()=>he(s,"show",mt));function vt(E){l[9](E)}let Fe={amount:50};l[2]!==void 0&&(Fe.show=l[2]),r=new ot({props:Fe}),oe.push(()=>he(r,"show",vt));const Ne=l[7].front,be=Te(Ne,l,l[6],ft),X=be||Wt(),Ce=l[7].back,ke=Te(Ce,l,l[6],at),Z=ke||Ot(),Ie=l[7].info,ge=Te(Ie,l,l[6],rt),G=ge||Ut();return{c(){e=k("div"),t=k("div"),re(s.$$.fragment),i=T(),a=k("div"),re(r.$$.fragment),d=T(),h=k("div"),b=k("div"),_=k("span"),y=T(),p=k("span"),V=T(),D=k("span"),z=T(),j=k("span"),A=T(),N=k("div"),F=k("span"),H=T(),B=k("span"),Q=T(),W=k("span"),S=T(),R=k("span"),J=T(),le=k("div"),X&&X.c(),Ve=T(),ie=k("div"),Z&&Z.c(),De=T(),G&&G.c(),this.h()},l(E){e=g(E,"DIV",{class:!0});var P=w(e);t=g(P,"DIV",{style:!0});var we=w(t);ae(s.$$.fragment,we),i=$(P),a=g(P,"DIV",{style:!0});var Ee=w(a);ae(r.$$.fragment,Ee),d=$(P),h=g(P,"DIV",{class:!0,style:!0});var ee=w(h);b=g(ee,"DIV",{class:!0});var te=w(b);_=g(te,"SPAN",{class:!0}),w(_).forEach(u),y=$(te),p=g(te,"SPAN",{class:!0}),w(p).forEach(u),V=$(te),D=g(te,"SPAN",{class:!0}),w(D).forEach(u),z=$(te),j=g(te,"SPAN",{class:!0}),w(j).forEach(u),te.forEach(u),A=$(ee),N=g(ee,"DIV",{class:!0});var se=w(N);F=g(se,"SPAN",{class:!0}),w(F).forEach(u),H=$(se),B=g(se,"SPAN",{class:!0}),w(B).forEach(u),Q=$(se),W=g(se,"SPAN",{class:!0}),w(W).forEach(u),S=$(se),R=g(se,"SPAN",{class:!0}),w(R).forEach(u),se.forEach(u),J=$(ee),le=g(ee,"DIV",{class:!0,id:!0});var Be=w(le);X&&X.l(Be),Be.forEach(u),Ve=$(ee),ie=g(ee,"DIV",{class:!0,id:!0});var We=w(ie);Z&&Z.l(We),We.forEach(u),ee.forEach(u),De=$(P),G&&G.l(P),P.forEach(u),this.h()},h(){fe(t,"display","contents"),fe(t,"--opacity","0.4"),fe(t,"--z",o=l[0]?"-30px":"30px"),fe(a,"display","contents"),fe(a,"--z",c=l[0]?"-70px":"70px"),v(_,"class","corner tr svelte-1i0ke7m"),v(p,"class","corner tl svelte-1i0ke7m"),v(D,"class","corner br svelte-1i0ke7m"),v(j,"class","corner bl svelte-1i0ke7m"),v(b,"class","corner-wrapper svelte-1i0ke7m"),v(F,"class","corner tr svelte-1i0ke7m"),v(B,"class","corner tl svelte-1i0ke7m"),v(W,"class","corner br svelte-1i0ke7m"),v(R,"class","corner bl svelte-1i0ke7m"),v(N,"class","corner-wrapper back svelte-1i0ke7m"),v(le,"class","card-face svelte-1i0ke7m"),v(le,"id","front"),v(ie,"class","card-face svelte-1i0ke7m"),v(ie,"id","back"),v(h,"class","card svelte-1i0ke7m"),v(h,"style",ve=`
		--x:${l[4].x*l[3]}deg;
		--y:${l[4].y*-l[3]}deg;
		`),v(e,"class","scene svelte-1i0ke7m"),Y(e,"flipped",l[0])},m(E,P){q(E,e,P),m(e,t),ue(s,t,null),m(e,i),m(e,a),ue(r,a,null),m(e,d),m(e,h),m(h,b),m(b,_),m(b,y),m(b,p),m(b,V),m(b,D),m(b,z),m(b,j),m(h,A),m(h,N),m(N,F),m(N,H),m(N,B),m(N,Q),m(N,W),m(N,S),m(N,R),m(h,J),m(h,le),X&&X.m(le,null),m(h,Ve),m(h,ie),Z&&Z.m(ie,null),m(e,De),G&&G.m(e,null),K=!0},p(E,[P]){P&1&&o!==(o=E[0]?"-30px":"30px")&&fe(t,"--z",o);const we={};!n&&P&2&&(n=!0,we.show=E[1],pe(()=>n=!1)),s.$set(we),P&1&&c!==(c=E[0]?"-70px":"70px")&&fe(a,"--z",c);const Ee={};!f&&P&4&&(f=!0,Ee.show=E[2],pe(()=>f=!1)),r.$set(Ee),be&&be.p&&(!K||P&64)&&$e(be,Ne,E,E[6],K?je(Ne,E[6],P,Bt):ze(E[6]),ft),ke&&ke.p&&(!K||P&64)&&$e(ke,Ce,E,E[6],K?je(Ce,E[6],P,Ft):ze(E[6]),at),(!K||P&24&&ve!==(ve=`
		--x:${E[4].x*E[3]}deg;
		--y:${E[4].y*-E[3]}deg;
		`))&&v(h,"style",ve),ge&&ge.p&&(!K||P&64)&&$e(ge,Ie,E,E[6],K?je(Ie,E[6],P,Mt):ze(E[6]),rt),P&1&&Y(e,"flipped",E[0])},i(E){K||(M(s.$$.fragment,E),M(r.$$.fragment,E),M(X,E),M(Z,E),M(G,E),Se||He(()=>{Se=wt(e,Et,{}),Se.start()}),K=!0)},o(E){U(s.$$.fragment,E),U(r.$$.fragment,E),U(X,E),U(Z,E),U(G,E),K=!1},d(E){E&&u(e),ce(s),ce(r),X&&X.d(E),Z&&Z.d(E),G&&G.d(E)}}}function Qt(l,e,s){let t,n;_e(l,Ge,_=>s(4,n=_));let{$$slots:o={},$$scope:i}=e,{flipped:r=!1}=e,a,f,c;const d=()=>{a==null||a(),f==null||f(),c==null||c()};function h(_){a=_,s(1,a)}function b(_){c=_,s(2,c)}return l.$$set=_=>{"flipped"in _&&s(0,r=_.flipped),"$$scope"in _&&s(6,i=_.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&s(3,t=r?1:10)},[r,a,c,t,n,d,i,o,h,b]}class ut extends qe{constructor(e){super();ye(this,e,Qt,Ht,Ae,{flipped:0,showConfetti:5})}get showConfetti(){return this.$$.ctx[5]}}function Jt(l){let e,s;return{c(){e=k("p"),s=C("Quiz Already started")},l(t){e=g(t,"P",{});var n=w(e);s=I(n,"Quiz Already started"),n.forEach(u)},m(t,n){q(t,e,n),m(e,s)},p:O,i:O,o:O,d(t){t&&u(e)}}}function Kt(l){let e,s;return{c(){e=k("p"),s=C("Results")},l(t){e=g(t,"P",{});var n=w(e);s=I(n,"Results"),n.forEach(u)},m(t,n){q(t,e,n),m(e,s)},p:O,i:O,o:O,d(t){t&&u(e)}}}function Lt(l){let e,s,t;function n(i){l[22](i)}let o={flipped:l[1]!=="closed"&&l[8]&&l[1]!=="voting-open",$$slots:{info:[Yt],back:[Gt],front:[Zt]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.showConfetti=l[0]),e=new ut({props:o}),oe.push(()=>he(e,"showConfetti",n)),{c(){re(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,r){ue(e,i,r),t=!0},p(i,r){const a={};r&258&&(a.flipped=i[1]!=="closed"&&i[8]&&i[1]!=="voting-open"),r&33554750&&(a.$$scope={dirty:r,ctx:i}),!s&&r&1&&(s=!0,a.showConfetti=i[0],pe(()=>s=!1)),e.$set(a)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){ce(e,i)}}}function Xt(l){let e,s,t;function n(i){l[19](i)}let o={flipped:l[7],$$slots:{info:[ls],back:[ns],front:[ts]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.showConfetti=l[0]),e=new ut({props:o}),oe.push(()=>he(e,"showConfetti",n)),{c(){re(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,r){ue(e,i,r),t=!0},p(i,r){const a={};r&128&&(a.flipped=i[7]),r&33555652&&(a.$$scope={dirty:r,ctx:i}),!s&&r&1&&(s=!0,a.showConfetti=i[0],pe(()=>s=!1)),e.$set(a)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){ce(e,i)}}}function Zt(l){let e,s,t,n,o;function i(f){l[20](f)}function r(f){l[21](f)}let a={userData:l[3],question:l[2].activeQuestion};return l[5]!==void 0&&(a.textValue=l[5]),l[4]!==void 0&&(a.questionStore=l[4]),s=new zt({props:a}),oe.push(()=>he(s,"textValue",i)),oe.push(()=>he(s,"questionStore",r)),s.$on("vote",l[14]),s.$on("answer",l[13]),s.$on("text",l[13]),{c(){e=k("div"),re(s.$$.fragment),this.h()},l(f){e=g(f,"DIV",{slot:!0,class:!0});var c=w(e);ae(s.$$.fragment,c),c.forEach(u),this.h()},h(){v(e,"slot","front"),v(e,"class","svelte-1ek19qe")},m(f,c){q(f,e,c),ue(s,e,null),o=!0},p(f,c){const d={};c&8&&(d.userData=f[3]),c&4&&(d.question=f[2].activeQuestion),!t&&c&32&&(t=!0,d.textValue=f[5],pe(()=>t=!1)),!n&&c&16&&(n=!0,d.questionStore=f[4],pe(()=>n=!1)),s.$set(d)},i(f){o||(M(s.$$.fragment,f),o=!0)},o(f){U(s.$$.fragment,f),o=!1},d(f){f&&u(e),ce(s)}}}function ct(l){let e,s;return{c(){e=k("p"),s=C("Vote for the best answer")},l(t){e=g(t,"P",{});var n=w(e);s=I(n,"Vote for the best answer"),n.forEach(u)},m(t,n){q(t,e,n),m(e,s)},d(t){t&&u(e)}}}function Gt(l){let e,s=l[1]==="voting-open"&&ct();return{c(){e=k("div"),s&&s.c(),this.h()},l(t){e=g(t,"DIV",{slot:!0,class:!0});var n=w(e);s&&s.l(n),n.forEach(u),this.h()},h(){v(e,"slot","back"),v(e,"class","svelte-1ek19qe")},m(t,n){q(t,e,n),s&&s.m(e,null)},p(t,n){t[1]==="voting-open"?s||(s=ct(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),s&&s.d()}}}function _t(l){let e,s;return{c(){e=k("p"),s=C("Warte bis die Frage beendet wird.")},l(t){e=g(t,"P",{});var n=w(e);s=I(n,"Warte bis die Frage beendet wird."),n.forEach(u)},m(t,n){q(t,e,n),m(e,s)},d(t){t&&u(e)}}}function Yt(l){let e,s=l[8]&&l[1]!=="closed"&&l[1]!=="voting-open"&&_t();return{c(){e=k("div"),s&&s.c(),this.h()},l(t){e=g(t,"DIV",{slot:!0});var n=w(e);s&&s.l(n),n.forEach(u),this.h()},h(){v(e,"slot","info")},m(t,n){q(t,e,n),s&&s.m(e,null)},p(t,n){t[8]&&t[1]!=="closed"&&t[1]!=="voting-open"?s||(s=_t(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),s&&s.d()}}}function xt(l){let e,s=l[2].description+"",t,n,o,i=!l[6]&&!l[7]&&dt(l);return{c(){e=k("h2"),t=C(s),n=T(),i&&i.c(),o=ne()},l(r){e=g(r,"H2",{});var a=w(e);t=I(a,s),a.forEach(u),n=$(r),i&&i.l(r),o=ne()},m(r,a){q(r,e,a),m(e,t),q(r,n,a),i&&i.m(r,a),q(r,o,a)},p(r,a){a&4&&s!==(s=r[2].description+"")&&L(t,s),!r[6]&&!r[7]?i?i.p(r,a):(i=dt(r),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(r){r&&u(e),r&&u(n),i&&i.d(r),r&&u(o)}}}function es(l){let e,s;return{c(){e=k("a"),s=C("Need to input your name"),this.h()},l(t){e=g(t,"A",{href:!0,class:!0});var n=w(e);s=I(n,"Need to input your name"),n.forEach(u),this.h()},h(){v(e,"href","/"),v(e,"class","svelte-1ek19qe")},m(t,n){q(t,e,n),m(e,s)},p:O,d(t){t&&u(e)}}}function dt(l){let e,s,t,n;return{c(){e=k("button"),s=C("Beitreten")},l(o){e=g(o,"BUTTON",{});var i=w(e);s=I(i,"Beitreten"),i.forEach(u)},m(o,i){q(o,e,i),m(e,s),t||(n=de(e,"click",l[12]),t=!0)},p:O,d(o){o&&u(e),t=!1,n()}}}function ts(l){let e,s,t,n;function o(a,f){return!a[10].name||!a[10].house?es:xt}let i=o(l),r=i(l);return{c(){e=k("div"),s=k("h1"),t=C("Registration"),n=T(),r.c(),this.h()},l(a){e=g(a,"DIV",{slot:!0,class:!0});var f=w(e);s=g(f,"H1",{});var c=w(s);t=I(c,"Registration"),c.forEach(u),n=$(f),r.l(f),f.forEach(u),this.h()},h(){v(e,"slot","front"),v(e,"class","svelte-1ek19qe")},m(a,f){q(a,e,f),m(e,s),m(s,t),m(e,n),r.m(e,null)},p(a,f){i===(i=o(a))&&r?r.p(a,f):(r.d(1),r=i(a),r&&(r.c(),r.m(e,null)))},d(a){a&&u(e),r.d()}}}function ht(l){let e,s;return e=new Vt({props:{endsAt:l[2].startsAt,$$slots:{default:[ss,({secondsLeft:t})=>({24:t}),({secondsLeft:t})=>t?16777216:0]},$$scope:{ctx:l}}}),{c(){re(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,n){ue(e,t,n),s=!0},p(t,n){const o={};n&4&&(o.endsAt=t[2].startsAt),n&50331648&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){U(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function ss(l){let e,s=l[24]+"",t;return{c(){e=k("h1"),t=C(s)},l(n){e=g(n,"H1",{});var o=w(e);t=I(o,s),o.forEach(u)},m(n,o){q(n,e,o),m(e,t)},p(n,o){o&16777216&&s!==(s=n[24]+"")&&L(t,s)},d(n){n&&u(e)}}}function ns(l){let e,s,t=l[2].startsAt&&ht(l);return{c(){e=k("div"),t&&t.c(),this.h()},l(n){e=g(n,"DIV",{slot:!0,class:!0});var o=w(e);t&&t.l(o),o.forEach(u),this.h()},h(){v(e,"slot","back"),v(e,"class","svelte-1ek19qe")},m(n,o){q(n,e,o),t&&t.m(e,null),s=!0},p(n,o){n[2].startsAt?t?(t.p(n,o),o&4&&M(t,1)):(t=ht(n),t.c(),M(t,1),t.m(e,null)):t&&(Ke(),U(t,1,1,()=>{t=null}),Qe())},i(n){s||(M(t),s=!0)},o(n){U(t),s=!1},d(n){n&&u(e),t&&t.d()}}}function pt(l){let e,s;return{c(){e=k("p"),s=C("Warte bis das Quiz beginnt")},l(t){e=g(t,"P",{});var n=w(e);s=I(n,"Warte bis das Quiz beginnt"),n.forEach(u)},m(t,n){q(t,e,n),m(e,s)},d(t){t&&u(e)}}}function ls(l){let e,s=l[7]&&!l[2].startsAt&&pt();return{c(){e=k("div"),s&&s.c(),this.h()},l(t){e=g(t,"DIV",{slot:!0,id:!0,class:!0});var n=w(e);s&&s.l(n),n.forEach(u),this.h()},h(){v(e,"slot","info"),v(e,"id","registration-success"),v(e,"class","svelte-1ek19qe")},m(t,n){q(t,e,n),s&&s.m(e,null)},p(t,n){t[7]&&!t[2].startsAt?s||(s=pt(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),s&&s.d()}}}function is(l){let e,s,t,n,o,i,r,a,f,c;const d=[Xt,Lt,Kt,Jt],h=[];function b(_,y){var p,V;return _[9]==="registration"?0:_[9]==="running"&&((V=(p=_[2])==null?void 0:p.activeQuestion)==null?void 0:V.id)&&_[7]?1:_[9]==="results"&&_[7]?2:3}return s=b(l),t=h[s]=d[s](l),i=new Dt({props:{house:l[10].house}}),{c(){e=T(),t.c(),n=T(),o=k("div"),re(i.$$.fragment),this.h()},l(_){qt('[data-svelte="svelte-aqh7sr"]',document.head).forEach(u),e=$(_),t.l(_),n=$(_),o=g(_,"DIV",{class:!0});var p=w(o);ae(i.$$.fragment,p),p.forEach(u),this.h()},h(){document.title="Dungeon Quiz",v(o,"class","crest svelte-1ek19qe")},m(_,y){q(_,e,y),h[s].m(_,y),q(_,n,y),q(_,o,y),ue(i,o,null),a=!0,f||(c=de(window,"keydown",l[15]),f=!0)},p(_,[y]){let p=s;s=b(_),s===p?h[s].p(_,y):(Ke(),U(h[p],1,1,()=>{h[p]=null}),Qe(),t=h[s],t?t.p(_,y):(t=h[s]=d[s](_),t.c()),M(t,1),t.m(n.parentNode,n));const V={};y&1024&&(V.house=_[10].house),i.$set(V)},i(_){a||(M(t),M(i.$$.fragment,_),He(()=>{r||(r=Je(o,Le,{duration:5e3},!0)),r.run(1)}),a=!0)},o(_){U(t),U(i.$$.fragment,_),r||(r=Je(o,Le,{duration:5e3},!1)),r.run(0),a=!1},d(_){_&&u(e),h[s].d(_),_&&u(n),_&&u(o),ce(i),_&&r&&r.end(),f=!1,c()}}}function os(l,e,s){let t,n,o,i,r,a,f,c,d=O,h=()=>(d(),d=Oe(p,S=>s(18,c=S)),p),b,_;_e(l,Xe,S=>s(2,f=S)),_e(l,yt,S=>s(10,_=S)),l.$$.on_destroy.push(()=>d());let y,p;const V=Ze("quiz-user-data",{id:"",qid:"",token:""});_e(l,V,S=>s(3,b=S));let D,z=!1;async function j(){if(z||i)return;s(6,z=!0);const R=await(await Re("api/quiz/register",{name:_.name,house:_.house})).json(),J=At(R.token);x(V,b.token=R.token,b),x(V,b.id=J.id,b),x(V,b.qid=J.qid,b),s(6,z=!1)}async function A({detail:S}){const R=await Re("api/quiz/answer",S,b.token);if(!R.ok)return;const J=await R.json();x(p,c.qid=n.id,c),x(p,c.value=S,c),n.type==="voting"&&J.id&&x(p,c.aid=J.id,c)}async function N({detail:S}){const R=await Re("api/quiz/vote",S,b.token);console.log(await R.json())}function F({key:S}){S==="L"&&console.log(c,f)}function H(S){y=S,s(0,y)}function B(S){D=S,s(5,D)}function Q(S){p=S,h(s(4,p))}function W(S){y=S,s(0,y)}return l.$$.update=()=>{l.$$.dirty&4&&s(9,t=f==null?void 0:f.state),l.$$.dirty&4&&s(16,n=f==null?void 0:f.activeQuestion),l.$$.dirty&65536&&s(1,o=n==null?void 0:n.state),l.$$.dirty&4&&(f==null||f.users),l.$$.dirty&12&&s(7,i=(b==null?void 0:b.id)&&(b==null?void 0:b.qid)===(f==null?void 0:f.id)),l.$$.dirty&327680&&s(8,r=(n==null?void 0:n.type)==="multiple"?(c==null?void 0:c.qid)===(n==null?void 0:n.id):(c==null?void 0:c.qid)===(n==null?void 0:n.id)&&(c==null?void 0:c.value)),l.$$.dirty&327680&&s(17,a=(n==null?void 0:n.correctAnswer)===(c==null?void 0:c.aid)),l.$$.dirty&131075&&o==="closed"&&a&&setTimeout(()=>{y()},1e3)},[y,o,f,b,p,D,z,i,r,t,_,V,j,A,N,F,n,a,c,H,B,Q,W]}class ds extends qe{constructor(e){super();ye(this,e,os,is,Ae,{})}}export{ds as default};
