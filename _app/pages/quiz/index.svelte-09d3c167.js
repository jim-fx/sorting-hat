import{S as Se,i as ye,s as Ce,e as k,t as I,k as C,l as ne,c as w,a as E,g as N,d as a,n as P,b as A,f as q,G as p,h as H,H as R,a7 as ke,aj as dt,ag as Je,al as x,ae as Pe,a6 as z,N as he,M as Ke,O as pt,X as oe,Y as re,I as Te,j as fe,m as ae,F as ue,o as ce,Z as _e,J as $e,K as Fe,L as ze,x as $,u as F,v as de,af as ht,w as Be,T as vt,A as mt,r as Qe,ac as bt,ad as gt}from"../../chunks/vendor-4d1406ba.js";import{q as Re,l as Le,e as kt,u as wt}from"../../chunks/index-5d576dff.js";import{p as Oe,d as Et}from"../../chunks/index-d0b67739.js";import{a as Me,C as At}from"../../chunks/Confetti-6f158ebc.js";import{T as qt}from"../../chunks/Timer-d5988874.js";import{g as Vt}from"../../chunks/navigation-51f4a605.js";import"../../chunks/singletons-12a22614.js";function Xe(n,e,s){const t=n.slice();return t[20]=e[s],t[24]=s,t}function Ge(n,e,s){const t=n.slice();return t[20]=e[s],t}function Ye(n,e,s){const t=n.slice();return t[17]=e[s],t}function jt(n){let e,s=n[1].answers.sort(st),t=[];for(let l=0;l<s.length;l+=1)t[l]=Ze(Xe(n,s,l));return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var r=E(e);for(let i=0;i<t.length;i+=1)t[i].l(r);r.forEach(a),this.h()},h(){A(e,"class","vote-wrapper svelte-13h57us")},m(l,r){q(l,e,r);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(l,r){if(r&514){s=l[1].answers.sort(st);let i;for(i=0;i<s.length;i+=1){const f=Xe(l,s,i);t[i]?t[i].p(f,r):(t[i]=Ze(f),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(l){l&&a(e),Pe(t,l)}}}function Dt(n){let e,s=n[1].answers,t=[];for(let l=0;l<s.length;l+=1)t[l]=et(Ge(n,s,l));return{c(){e=k("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=w(l,"DIV",{class:!0});var r=E(e);for(let i=0;i<t.length;i+=1)t[i].l(r);r.forEach(a),this.h()},h(){A(e,"class","vote-wrapper svelte-13h57us")},m(l,r){q(l,e,r);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(l,r){if(r&278){s=l[1].answers;let i;for(i=0;i<s.length;i+=1){const f=Ge(l,s,i);t[i]?t[i].p(f,r):(t[i]=et(f),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(l){l&&a(e),Pe(t,l)}}}function It(n){let e,s,t,l,r,i,f;return{c(){e=k("textarea"),s=C(),t=k("button"),l=I("abschicken"),this.h()},l(o){e=w(o,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,class:!0}),E(e).forEach(a),s=P(o),t=w(o,"BUTTON",{});var _=E(t);l=N(_,"abschicken"),_.forEach(a),this.h()},h(){var o;A(e,"name",""),A(e,"id",""),A(e,"cols","30"),A(e,"rows","10"),A(e,"class","svelte-13h57us"),t.disabled=r=!((o=n[0])==null?void 0:o.length)},m(o,_){q(o,e,_),Ke(e,n[0]),q(o,s,_),q(o,t,_),p(t,l),i||(f=[he(e,"input",n[11]),he(t,"click",n[12])],i=!0)},p(o,_){var d;_&1&&Ke(e,o[0]),_&1&&r!==(r=!((d=o[0])==null?void 0:d.length))&&(t.disabled=r)},d(o){o&&a(e),o&&a(s),o&&a(t),i=!1,pt(f)}}}function Nt(n){let e,s=n[1].answers,t=[];for(let l=0;l<s.length;l+=1)t[l]=tt(Ye(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ne()},l(l){for(let r=0;r<t.length;r+=1)t[r].l(l);e=ne()},m(l,r){for(let i=0;i<t.length;i+=1)t[i].m(l,r);q(l,e,r)},p(l,r){if(r&82){s=l[1].answers;let i;for(i=0;i<s.length;i+=1){const f=Ye(l,s,i);t[i]?t[i].p(f,r):(t[i]=tt(f),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(l){Pe(t,l),l&&a(e)}}}function St(n){let e,s,t=n[9](n[20].userId)+"",l,r;return{c(){e=k("br"),s=I(`
					(`),l=I(t),r=I(")")},l(i){e=w(i,"BR",{}),s=N(i,`
					(`),l=N(i,t),r=N(i,")")},m(i,f){q(i,e,f),q(i,s,f),q(i,l,f),q(i,r,f)},p(i,f){f&2&&t!==(t=i[9](i[20].userId)+"")&&H(l,t)},d(i){i&&a(e),i&&a(s),i&&a(l),i&&a(r)}}}function Ze(n){let e,s=n[20].votes.length+"",t,l,r,i=n[20].value+"",f,o,_,d=n[24]===0&&St(n);return{c(){e=k("p"),t=I(s),l=C(),r=k("p"),f=I(i),o=C(),d&&d.c(),_=C(),this.h()},l(c){e=w(c,"P",{class:!0});var u=E(e);t=N(u,s),u.forEach(a),l=P(c),r=w(c,"P",{class:!0});var V=E(r);f=N(V,i),o=P(V),d&&d.l(V),_=P(V),V.forEach(a),this.h()},h(){A(e,"class","vote-amount svelte-13h57us"),A(r,"class","vote-value svelte-13h57us")},m(c,u){q(c,e,u),p(e,t),q(c,l,u),q(c,r,u),p(r,f),p(r,o),d&&d.m(r,null),p(r,_)},p(c,u){u&2&&s!==(s=c[20].votes.length+"")&&H(t,s),u&2&&i!==(i=c[20].value+"")&&H(f,i),c[24]===0&&d.p(c,u)},d(c){c&&a(e),c&&a(l),c&&a(r),d&&d.d()}}}function xe(n){let e,s=(n[4].vote!==n[20].id?"\u2610":"\u2612")+"",t,l,r,i=n[20].value+"",f,o,_;function d(){return n[13](n[20])}return{c(){e=k("button"),t=I(s),l=C(),r=k("p"),f=I(i),this.h()},l(c){e=w(c,"BUTTON",{class:!0});var u=E(e);t=N(u,s),u.forEach(a),l=P(c),r=w(c,"P",{class:!0});var V=E(r);f=N(V,i),V.forEach(a),this.h()},h(){A(e,"class","vote-button svelte-13h57us"),z(e,"selected",n[4].vote===n[20].id),A(r,"class","vote-value svelte-13h57us")},m(c,u){q(c,e,u),p(e,t),q(c,l,u),q(c,r,u),p(r,f),o||(_=he(e,"click",d),o=!0)},p(c,u){n=c,u&18&&s!==(s=(n[4].vote!==n[20].id?"\u2610":"\u2612")+"")&&H(t,s),u&18&&z(e,"selected",n[4].vote===n[20].id),u&2&&i!==(i=n[20].value+"")&&H(f,i)},d(c){c&&a(e),c&&a(l),c&&a(r),o=!1,_()}}}function et(n){let e,s=n[20].userId!==n[2].id&&xe(n);return{c(){s&&s.c(),e=ne()},l(t){s&&s.l(t),e=ne()},m(t,l){s&&s.m(t,l),q(t,e,l)},p(t,l){t[20].userId!==t[2].id?s?s.p(t,l):(s=xe(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){s&&s.d(t),t&&a(e)}}}function tt(n){let e,s=n[17].value+"",t,l,r;function i(){return n[10](n[17])}return{c(){e=k("button"),t=I(s),this.h()},l(f){e=w(f,"BUTTON",{class:!0});var o=E(e);t=N(o,s),o.forEach(a),this.h()},h(){var f,o,_;A(e,"class","answer svelte-13h57us"),z(e,"showAnswer",(f=n[1])==null?void 0:f.correctAnswer),z(e,"correct",n[17].id===((o=n[1])==null?void 0:o.correctAnswer)),z(e,"selected",((_=n[4])==null?void 0:_.aid)===n[17].id)},m(f,o){q(f,e,o),p(e,t),l||(r=he(e,"click",i),l=!0)},p(f,o){var _,d,c;n=f,o&2&&s!==(s=n[17].value+"")&&H(t,s),o&2&&z(e,"showAnswer",(_=n[1])==null?void 0:_.correctAnswer),o&2&&z(e,"correct",n[17].id===((d=n[1])==null?void 0:d.correctAnswer)),o&18&&z(e,"selected",((c=n[4])==null?void 0:c.aid)===n[17].id)},d(f){f&&a(e),l=!1,r()}}}function yt(n){let e,s,t=n[1].index+1+"",l,r,i=n[5].amount+"",f,o,_=n[1].description+"",d,c,u;function V(v,b){if(v[1].type==="multiple")return Nt;if(v[1].state==="open")return It;if(v[1].state==="voting-open")return Dt;if(v[1].state==="closed")return jt}let m=V(n),h=m&&m(n);return{c(){e=k("p"),s=I("("),l=I(t),r=I("/"),f=I(i),o=I(") "),d=I(_),c=C(),h&&h.c(),u=ne(),this.h()},l(v){e=w(v,"P",{class:!0});var b=E(e);s=N(b,"("),l=N(b,t),r=N(b,"/"),f=N(b,i),o=N(b,") "),d=N(b,_),b.forEach(a),c=P(v),h&&h.l(v),u=ne(),this.h()},h(){A(e,"class","description svelte-13h57us")},m(v,b){q(v,e,b),p(e,s),p(e,l),p(e,r),p(e,f),p(e,o),p(e,d),q(v,c,b),h&&h.m(v,b),q(v,u,b)},p(v,[b]){b&2&&t!==(t=v[1].index+1+"")&&H(l,t),b&32&&i!==(i=v[5].amount+"")&&H(f,i),b&2&&_!==(_=v[1].description+"")&&H(d,_),m===(m=V(v))&&h?h.p(v,b):(h&&h.d(1),h=m&&m(v),h&&(h.c(),h.m(u.parentNode,u)))},i:R,o:R,d(v){v&&a(e),v&&a(c),h&&h.d(v),v&&a(u)}}}const st=(n,e)=>n.votes.length>e.votes.length?-1:1;function Ct(n,e,s){let t,l,r=R,i=()=>(r(),r=Je(c,D=>s(4,l=D)),c),f;ke(n,Re,D=>s(5,f=D)),n.$$.on_destroy.push(()=>r());const o=dt();let{question:_}=e,{userData:d}=e;const c=Le("active-question",{qid:"",aid:"",value:"",vote:""});i();let{textValue:u}=e;function V(D){D!==l.qid&&_.state==="open"&&(x(c,l.qid=_.id,l),x(c,l.aid=D,l),o("answer",D))}function m(D){o("text",D)}function h(D){x(c,l.vote=D,l),o("vote",D)}function v(D){const T=t.find(G=>G.id===D);return T?T==null?void 0:T.name:""}const b=D=>V(D.id);function B(){u=this.value,s(0,u)}const X=()=>m(u),Q=D=>h(D.id);return n.$$set=D=>{"question"in D&&s(1,_=D.question),"userData"in D&&s(2,d=D.userData),"textValue"in D&&s(0,u=D.textValue)},n.$$.update=()=>{n.$$.dirty&32&&(t=f.users),n.$$.dirty&18&&(_==null||_.correctAnswer,l.aid)},[u,_,d,c,l,f,V,m,h,v,b,B,X,Q]}class Pt extends Se{constructor(e){super();ye(this,e,Ct,yt,Ce,{question:1,userData:2,questionStore:3,textValue:0})}get questionStore(){return this.$$.ctx[3]}}const Tt=n=>({}),lt=n=>({}),$t=n=>({}),nt=n=>({}),Ft=n=>({}),it=n=>({});function zt(n){let e,s;return{c(){e=k("p"),s=I("No Frontside")},l(t){e=w(t,"P",{});var l=E(e);s=N(l,"No Frontside"),l.forEach(a)},m(t,l){q(t,e,l),p(e,s)},d(t){t&&a(e)}}}function Bt(n){let e;return{c(){e=k("p")},l(s){e=w(s,"P",{}),E(e).forEach(a)},m(s,t){q(s,e,t)},d(s){s&&a(e)}}}function Qt(n){let e;return{c(){e=k("span")},l(s){e=w(s,"SPAN",{}),E(e).forEach(a)},m(s,t){q(s,e,t)},d(s){s&&a(e)}}}function Rt(n){let e,s,t,l,r,i,f,o,_,d,c,u,V,m,h,v,b,B,X,Q,D,T,G,ve,O,U,ie,ee,W,me,Y,be,Z,pe,j,y;function J(g){n[11](g)}let ge={amount:200};n[1]!==void 0&&(ge.show=n[1]),s=new Me({props:ge}),oe.push(()=>re(s,"show",J));function je(g){n[12](g)}let We={amount:50};n[2]!==void 0&&(We.show=n[2]),f=new Me({props:We}),oe.push(()=>re(f,"show",je));const De=n[10].front,we=Te(De,n,n[9],it),K=we||zt(),Ie=n[10].back,Ee=Te(Ie,n,n[9],nt),L=Ee||Bt(),Ne=n[10].info,Ae=Te(Ne,n,n[9],lt),M=Ae||Qt();return{c(){e=k("div"),t=k("div"),fe(s.$$.fragment),i=C(),o=k("div"),fe(f.$$.fragment),c=C(),u=k("div"),V=k("div"),m=k("span"),h=C(),v=k("span"),b=C(),B=k("span"),X=C(),Q=k("span"),D=C(),T=k("div"),G=k("span"),ve=C(),O=k("span"),U=C(),ie=k("span"),ee=C(),W=k("span"),me=C(),Y=k("div"),K&&K.c(),be=C(),Z=k("div"),L&&L.c(),j=C(),M&&M.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var S=E(e);t=w(S,"DIV",{style:!0});var qe=E(t);ae(s.$$.fragment,qe),i=P(S),o=w(S,"DIV",{style:!0});var Ve=E(o);ae(f.$$.fragment,Ve),c=P(S),u=w(S,"DIV",{class:!0,style:!0});var te=E(u);V=w(te,"DIV",{class:!0});var se=E(V);m=w(se,"SPAN",{class:!0}),E(m).forEach(a),h=P(se),v=w(se,"SPAN",{class:!0}),E(v).forEach(a),b=P(se),B=w(se,"SPAN",{class:!0}),E(B).forEach(a),X=P(se),Q=w(se,"SPAN",{class:!0}),E(Q).forEach(a),se.forEach(a),D=P(te),T=w(te,"DIV",{class:!0});var le=E(T);G=w(le,"SPAN",{class:!0}),E(G).forEach(a),ve=P(le),O=w(le,"SPAN",{class:!0}),E(O).forEach(a),U=P(le),ie=w(le,"SPAN",{class:!0}),E(ie).forEach(a),ee=P(le),W=w(le,"SPAN",{class:!0}),E(W).forEach(a),le.forEach(a),me=P(te),Y=w(te,"DIV",{class:!0,id:!0});var He=E(Y);K&&K.l(He),He.forEach(a),be=P(te),Z=w(te,"DIV",{class:!0,id:!0});var Ue=E(Z);L&&L.l(Ue),Ue.forEach(a),te.forEach(a),j=P(S),M&&M.l(S),S.forEach(a),this.h()},h(){ue(t,"display","contents"),ue(t,"--opacity","0.4"),ue(t,"--z",r=n[0]?"-30px":"30px"),ue(o,"display","contents"),ue(o,"--z",d=n[0]?"-70px":"70px"),A(m,"class","corner tr svelte-wejv9w"),A(v,"class","corner tl svelte-wejv9w"),A(B,"class","corner br svelte-wejv9w"),A(Q,"class","corner bl svelte-wejv9w"),A(V,"class","corner-wrapper svelte-wejv9w"),A(G,"class","corner tr svelte-wejv9w"),A(O,"class","corner tl svelte-wejv9w"),A(ie,"class","corner br svelte-wejv9w"),A(W,"class","corner bl svelte-wejv9w"),A(T,"class","corner-wrapper back svelte-wejv9w"),A(Y,"class","card-face svelte-wejv9w"),A(Y,"id","front"),A(Z,"class","card-face svelte-wejv9w"),A(Z,"id","back"),A(u,"class","card svelte-wejv9w"),A(u,"style",pe=`
		--x:${n[6].x*n[5]}deg;
		--y:${n[6].y*-n[5]}deg;
		`),A(e,"class","scene svelte-wejv9w"),z(e,"flipped",n[0]),z(e,"flip",n[3]),z(e,"hideAnimations",n[4])},m(g,S){q(g,e,S),p(e,t),ce(s,t,null),p(e,i),p(e,o),ce(f,o,null),p(e,c),p(e,u),p(u,V),p(V,m),p(V,h),p(V,v),p(V,b),p(V,B),p(V,X),p(V,Q),p(u,D),p(u,T),p(T,G),p(T,ve),p(T,O),p(T,U),p(T,ie),p(T,ee),p(T,W),p(u,me),p(u,Y),K&&K.m(Y,null),p(u,be),p(u,Z),L&&L.m(Z,null),p(e,j),M&&M.m(e,null),y=!0},p(g,[S]){S&1&&r!==(r=g[0]?"-30px":"30px")&&ue(t,"--z",r);const qe={};!l&&S&2&&(l=!0,qe.show=g[1],_e(()=>l=!1)),s.$set(qe),S&1&&d!==(d=g[0]?"-70px":"70px")&&ue(o,"--z",d);const Ve={};!_&&S&4&&(_=!0,Ve.show=g[2],_e(()=>_=!1)),f.$set(Ve),we&&we.p&&(!y||S&512)&&$e(we,De,g,g[9],y?ze(De,g[9],S,Ft):Fe(g[9]),it),Ee&&Ee.p&&(!y||S&512)&&$e(Ee,Ie,g,g[9],y?ze(Ie,g[9],S,$t):Fe(g[9]),nt),(!y||S&96&&pe!==(pe=`
		--x:${g[6].x*g[5]}deg;
		--y:${g[6].y*-g[5]}deg;
		`))&&A(u,"style",pe),Ae&&Ae.p&&(!y||S&512)&&$e(Ae,Ne,g,g[9],y?ze(Ne,g[9],S,Tt):Fe(g[9]),lt),S&1&&z(e,"flipped",g[0]),S&8&&z(e,"flip",g[3]),S&16&&z(e,"hideAnimations",g[4])},i(g){y||($(s.$$.fragment,g),$(f.$$.fragment,g),$(K,g),$(L,g),$(M,g),y=!0)},o(g){F(s.$$.fragment,g),F(f.$$.fragment,g),F(K,g),F(L,g),F(M,g),y=!1},d(g){g&&a(e),de(s),de(f),K&&K.d(g),L&&L.d(g),M&&M.d(g)}}}function Ot(n,e,s){let t,l;ke(n,kt,b=>s(6,l=b));let{$$slots:r={},$$scope:i}=e,{flipped:f=!1}=e,o,_,d,c=!1,u=!1;const V=()=>{s(3,c=!0),setTimeout(()=>{s(4,u=!0),setTimeout(()=>{s(3,c=!1),setTimeout(()=>{s(4,u=!1)},1e3)},50)},2e3)},m=()=>{o==null||o(),_==null||_(),d==null||d()};function h(b){o=b,s(1,o)}function v(b){d=b,s(2,d)}return n.$$set=b=>{"flipped"in b&&s(0,f=b.flipped),"$$scope"in b&&s(9,i=b.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&s(5,t=f?1:10)},[f,o,d,c,u,t,l,V,m,i,r,h,v]}class ot extends Se{constructor(e){super();ye(this,e,Ot,Rt,Ce,{flipped:0,doAflip:7,showConfetti:8})}get doAflip(){return this.$$.ctx[7]}get showConfetti(){return this.$$.ctx[8]}}function Wt(n){let e,s;return{c(){e=k("p"),s=I("Quiz Already started")},l(t){e=w(t,"P",{});var l=E(e);s=N(l,"Quiz Already started"),l.forEach(a)},m(t,l){q(t,e,l),p(e,s)},p:R,i:R,o:R,d(t){t&&a(e)}}}function Ht(n){let e,s;return{c(){e=k("p"),s=I("Results")},l(t){e=w(t,"P",{});var l=E(e);s=N(l,"Results"),l.forEach(a)},m(t,l){q(t,e,l),p(e,s)},p:R,i:R,o:R,d(t){t&&a(e)}}}function Ut(n){let e,s,t,l;function r(o){n[26](o)}function i(o){n[27](o)}let f={flipped:n[1]!=="closed"&&n[10]&&n[1]!=="voting-open",$$slots:{info:[Mt],back:[Lt],front:[Kt]},$$scope:{ctx:n}};return n[7]!==void 0&&(f.doAflip=n[7]),n[0]!==void 0&&(f.showConfetti=n[0]),e=new ot({props:f}),oe.push(()=>re(e,"doAflip",r)),oe.push(()=>re(e,"showConfetti",i)),{c(){fe(e.$$.fragment)},l(o){ae(e.$$.fragment,o)},m(o,_){ce(e,o,_),l=!0},p(o,_){const d={};_[0]&1026&&(d.flipped=o[1]!=="closed"&&o[10]&&o[1]!=="voting-open"),_[0]&1338|_[1]&2&&(d.$$scope={dirty:_,ctx:o}),!s&&_[0]&128&&(s=!0,d.doAflip=o[7],_e(()=>s=!1)),!t&&_[0]&1&&(t=!0,d.showConfetti=o[0],_e(()=>t=!1)),e.$set(d)},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){de(e,o)}}}function Jt(n){let e,s,t;function l(i){n[23](i)}let r={flipped:n[9],$$slots:{info:[es],back:[xt],front:[Yt]},$$scope:{ctx:n}};return n[0]!==void 0&&(r.showConfetti=n[0]),e=new ot({props:r}),oe.push(()=>re(e,"showConfetti",l)),{c(){fe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,f){ce(e,i,f),t=!0},p(i,f){const o={};f[0]&512&&(o.flipped=i[9]),f[0]&4676|f[1]&2&&(o.$$scope={dirty:f,ctx:i}),!s&&f[0]&1&&(s=!0,o.showConfetti=i[0],_e(()=>s=!1)),e.$set(o)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){de(e,i)}}}function rt(n){let e,s,t,l;function r(o){n[24](o)}function i(o){n[25](o)}let f={userData:n[3],question:n[8]};return n[5]!==void 0&&(f.textValue=n[5]),n[4]!==void 0&&(f.questionStore=n[4]),e=new Pt({props:f}),oe.push(()=>re(e,"textValue",r)),oe.push(()=>re(e,"questionStore",i)),e.$on("vote",n[16]),e.$on("answer",n[15]),e.$on("text",n[15]),{c(){fe(e.$$.fragment)},l(o){ae(e.$$.fragment,o)},m(o,_){ce(e,o,_),l=!0},p(o,_){const d={};_[0]&8&&(d.userData=o[3]),_[0]&256&&(d.question=o[8]),!s&&_[0]&32&&(s=!0,d.textValue=o[5],_e(()=>s=!1)),!t&&_[0]&16&&(t=!0,d.questionStore=o[4],_e(()=>t=!1)),e.$set(d)},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){de(e,o)}}}function Kt(n){let e,s,t=n[8]&&rt(n);return{c(){e=k("div"),t&&t.c(),this.h()},l(l){e=w(l,"DIV",{slot:!0,class:!0});var r=E(e);t&&t.l(r),r.forEach(a),this.h()},h(){A(e,"slot","front"),A(e,"class","svelte-1ek19qe")},m(l,r){q(l,e,r),t&&t.m(e,null),s=!0},p(l,r){l[8]?t?(t.p(l,r),r[0]&256&&$(t,1)):(t=rt(l),t.c(),$(t,1),t.m(e,null)):t&&(Qe(),F(t,1,1,()=>{t=null}),Be())},i(l){s||($(t),s=!0)},o(l){F(t),s=!1},d(l){l&&a(e),t&&t.d()}}}function ft(n){let e,s;return{c(){e=k("p"),s=I("Vote for the best answer")},l(t){e=w(t,"P",{});var l=E(e);s=N(l,"Vote for the best answer"),l.forEach(a)},m(t,l){q(t,e,l),p(e,s)},d(t){t&&a(e)}}}function Lt(n){let e,s=n[1]==="voting-open"&&ft();return{c(){e=k("div"),s&&s.c(),this.h()},l(t){e=w(t,"DIV",{slot:!0,class:!0});var l=E(e);s&&s.l(l),l.forEach(a),this.h()},h(){A(e,"slot","back"),A(e,"class","svelte-1ek19qe")},m(t,l){q(t,e,l),s&&s.m(e,null)},p(t,l){t[1]==="voting-open"?s||(s=ft(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&a(e),s&&s.d()}}}function at(n){let e,s;return{c(){e=k("p"),s=I("Warte bis die Frage beendet wird.")},l(t){e=w(t,"P",{});var l=E(e);s=N(l,"Warte bis die Frage beendet wird."),l.forEach(a)},m(t,l){q(t,e,l),p(e,s)},d(t){t&&a(e)}}}function Mt(n){let e,s=n[10]&&n[1]!=="closed"&&n[1]!=="voting-open"&&at();return{c(){e=k("div"),s&&s.c(),this.h()},l(t){e=w(t,"DIV",{slot:!0});var l=E(e);s&&s.l(l),l.forEach(a),this.h()},h(){A(e,"slot","info")},m(t,l){q(t,e,l),s&&s.m(e,null)},p(t,l){t[10]&&t[1]!=="closed"&&t[1]!=="voting-open"?s||(s=at(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&a(e),s&&s.d()}}}function Xt(n){let e,s=n[2].description+"",t,l,r,i=!n[6]&&!n[9]&&ut(n);return{c(){e=k("h2"),t=I(s),l=C(),i&&i.c(),r=ne()},l(f){e=w(f,"H2",{});var o=E(e);t=N(o,s),o.forEach(a),l=P(f),i&&i.l(f),r=ne()},m(f,o){q(f,e,o),p(e,t),q(f,l,o),i&&i.m(f,o),q(f,r,o)},p(f,o){o[0]&4&&s!==(s=f[2].description+"")&&H(t,s),!f[6]&&!f[9]?i?i.p(f,o):(i=ut(f),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(f){f&&a(e),f&&a(l),i&&i.d(f),f&&a(r)}}}function Gt(n){let e,s;return{c(){e=k("a"),s=I("Need to input your name"),this.h()},l(t){e=w(t,"A",{href:!0,class:!0});var l=E(e);s=N(l,"Need to input your name"),l.forEach(a),this.h()},h(){A(e,"href","/"),A(e,"class","svelte-1ek19qe")},m(t,l){q(t,e,l),p(e,s)},p:R,d(t){t&&a(e)}}}function ut(n){let e,s,t,l;return{c(){e=k("button"),s=I("Beitreten")},l(r){e=w(r,"BUTTON",{});var i=E(e);s=N(i,"Beitreten"),i.forEach(a)},m(r,i){q(r,e,i),p(e,s),t||(l=he(e,"click",n[14]),t=!0)},p:R,d(r){r&&a(e),t=!1,l()}}}function Yt(n){let e,s,t,l;function r(o,_){return!o[12].name||!o[12].house?Gt:Xt}let i=r(n),f=i(n);return{c(){e=k("div"),s=k("h1"),t=I("Registration"),l=C(),f.c(),this.h()},l(o){e=w(o,"DIV",{slot:!0,class:!0});var _=E(e);s=w(_,"H1",{});var d=E(s);t=N(d,"Registration"),d.forEach(a),l=P(_),f.l(_),_.forEach(a),this.h()},h(){A(e,"slot","front"),A(e,"class","svelte-1ek19qe")},m(o,_){q(o,e,_),p(e,s),p(s,t),p(e,l),f.m(e,null)},p(o,_){i===(i=r(o))&&f?f.p(o,_):(f.d(1),f=i(o),f&&(f.c(),f.m(e,null)))},d(o){o&&a(e),f.d()}}}function ct(n){let e,s;return e=new qt({props:{endsAt:n[2].startsAt,$$slots:{default:[Zt,({secondsLeft:t})=>({31:t}),({secondsLeft:t})=>[0,t?1:0]]},$$scope:{ctx:n}}}),{c(){fe(e.$$.fragment)},l(t){ae(e.$$.fragment,t)},m(t,l){ce(e,t,l),s=!0},p(t,l){const r={};l[0]&4&&(r.endsAt=t[2].startsAt),l[1]&3&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){de(e,t)}}}function Zt(n){let e,s=n[31]+"",t;return{c(){e=k("h1"),t=I(s)},l(l){e=w(l,"H1",{});var r=E(e);t=N(r,s),r.forEach(a)},m(l,r){q(l,e,r),p(e,t)},p(l,r){r[1]&1&&s!==(s=l[31]+"")&&H(t,s)},d(l){l&&a(e)}}}function xt(n){let e,s,t=n[2].startsAt&&ct(n);return{c(){e=k("div"),t&&t.c(),this.h()},l(l){e=w(l,"DIV",{slot:!0,class:!0});var r=E(e);t&&t.l(r),r.forEach(a),this.h()},h(){A(e,"slot","back"),A(e,"class","svelte-1ek19qe")},m(l,r){q(l,e,r),t&&t.m(e,null),s=!0},p(l,r){l[2].startsAt?t?(t.p(l,r),r[0]&4&&$(t,1)):(t=ct(l),t.c(),$(t,1),t.m(e,null)):t&&(Qe(),F(t,1,1,()=>{t=null}),Be())},i(l){s||($(t),s=!0)},o(l){F(t),s=!1},d(l){l&&a(e),t&&t.d()}}}function _t(n){let e,s;return{c(){e=k("p"),s=I("Warte bis das Quiz beginnt")},l(t){e=w(t,"P",{});var l=E(e);s=N(l,"Warte bis das Quiz beginnt"),l.forEach(a)},m(t,l){q(t,e,l),p(e,s)},d(t){t&&a(e)}}}function es(n){let e,s=n[9]&&!n[2].startsAt&&_t();return{c(){e=k("div"),s&&s.c(),this.h()},l(t){e=w(t,"DIV",{slot:!0,id:!0,class:!0});var l=E(e);s&&s.l(l),l.forEach(a),this.h()},h(){A(e,"slot","info"),A(e,"id","registration-success"),A(e,"class","svelte-1ek19qe")},m(t,l){q(t,e,l),s&&s.m(e,null)},p(t,l){t[9]&&!t[2].startsAt?s||(s=_t(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&a(e),s&&s.d()}}}function ts(n){let e,s,t,l,r,i,f,o,_,d;const c=[Jt,Ut,Ht,Wt],u=[];function V(m,h){var v,b;return m[11]==="registration"?0:m[11]==="running"&&((b=(v=m[2])==null?void 0:v.activeQuestion)==null?void 0:b.id)&&m[9]?1:m[11]==="results"&&m[9]?2:3}return s=V(n),t=u[s]=c[s](n),i=new At({props:{house:n[12].house}}),{c(){e=C(),t.c(),l=C(),r=k("div"),fe(i.$$.fragment),this.h()},l(m){ht('[data-svelte="svelte-aqh7sr"]',document.head).forEach(a),e=P(m),t.l(m),l=P(m),r=w(m,"DIV",{class:!0});var v=E(r);ae(i.$$.fragment,v),v.forEach(a),this.h()},h(){document.title="Dungeon Quiz",A(r,"class","crest svelte-1ek19qe")},m(m,h){q(m,e,h),u[s].m(m,h),q(m,l,h),q(m,r,h),ce(i,r,null),o=!0,_||(d=he(window,"keydown",n[17]),_=!0)},p(m,h){let v=s;s=V(m),s===v?u[s].p(m,h):(Qe(),F(u[v],1,1,()=>{u[v]=null}),Be(),t=u[s],t?t.p(m,h):(t=u[s]=c[s](m),t.c()),$(t,1),t.m(l.parentNode,l));const b={};h[0]&4096&&(b.house=m[12].house),i.$set(b)},i(m){o||($(t),$(i.$$.fragment,m),f||vt(()=>{f=bt(r,gt,{duration:5e3}),f.start()}),o=!0)},o(m){F(t),F(i.$$.fragment,m),o=!1},d(m){m&&a(e),u[s].d(m),m&&a(l),m&&a(r),de(i),_=!1,d()}}}function ss(n,e,s){let t,l,r,i,f,o,_,d,c,u,V=R,m=()=>(V(),V=Je(b,j=>s(22,u=j)),b),h;ke(n,wt,j=>s(12,d=j)),ke(n,Re,j=>s(2,c=j)),n.$$.on_destroy.push(()=>V());let v,b;const B=Le("quiz-user-data",{id:"",qid:"",token:""});ke(n,B,j=>s(3,h=j));let X,Q=!1;async function D(){if(Q||i)return;s(6,Q=!0);const y=await(await Oe("api/quiz/register",{name:d.name,house:d.house})).json(),J=Et(y.token);x(B,h.token=y.token,h),x(B,h.id=J.id,h),x(B,h.qid=J.qid,h),s(6,Q=!1)}async function T({detail:j}){const y=await Oe("api/quiz/answer",j,h.token);if(!y.ok)return;const J=await y.json();x(b,u.qid=l.id,u),x(b,u.value=j,u),l.type==="voting"&&J.id&&x(b,u.aid=J.id,u)}async function G({detail:j}){const y=await Oe("api/quiz/vote",j,h.token);console.log(await y.json())}function ve({key:j}){j==="L"&&console.log(u,c)}let O=!1,U;function ie(){s(18,O=!0),U==null||U(),setTimeout(()=>{s(18,O=!1)},1e3)}let ee,W=null;Re.subscribe(j=>{var ge;if(O)return;let y=(ge=j==null?void 0:j.activeQuestion)==null?void 0:ge.id,J=y!==W;!J||(W&&(s(19,ee=c==null?void 0:c.questions.find(je=>je.id===W)),console.table({lastId:W,id:y,lastQuestion:ee})),J&&ie(),W=y)}),mt(()=>{(!d.name||!d.house)&&Vt("/quiz/register")});function me(j){v=j,s(0,v)}function Y(j){X=j,s(5,X)}function be(j){b=j,m(s(4,b))}function Z(j){U=j,s(7,U)}function pe(j){v=j,s(0,v)}return n.$$.update=()=>{n.$$.dirty[0]&4&&s(11,t=c==null?void 0:c.state),n.$$.dirty[0]&4&&s(20,l=c==null?void 0:c.activeQuestion),n.$$.dirty[0]&1048576&&s(1,r=l==null?void 0:l.state),n.$$.dirty[0]&4&&(c==null||c.users),n.$$.dirty[0]&12&&s(9,i=(h==null?void 0:h.id)&&(h==null?void 0:h.qid)===(c==null?void 0:c.id)),n.$$.dirty[0]&5242880&&s(10,f=(l==null?void 0:l.type)==="multiple"?(u==null?void 0:u.qid)===(l==null?void 0:l.id):(u==null?void 0:u.qid)===(l==null?void 0:l.id)&&(u==null?void 0:u.value)),n.$$.dirty[0]&5242880&&s(21,o=(l==null?void 0:l.correctAnswer)===(u==null?void 0:u.aid)),n.$$.dirty[0]&2097155&&r==="closed"&&o&&setTimeout(()=>{v()},1e3),n.$$.dirty[0]&786436&&s(8,_=O?ee||(c==null?void 0:c.activeQuestion):c.activeQuestion)},[v,r,c,h,b,X,Q,U,_,i,f,t,d,B,D,T,G,ve,O,ee,l,o,u,me,Y,be,Z,pe]}class us extends Se{constructor(e){super();ye(this,e,ss,ts,Ce,{},null,[-1,-1])}}export{us as default};
