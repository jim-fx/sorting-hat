import{S as Ee,i as ye,s as Ae,e as m,t as P,k as C,l as ne,c as b,a as w,g as T,d as u,n as I,b as p,f as k,G as v,h as Y,H as O,a9 as _e,ak as bt,ag as Oe,ao as x,X as Pe,a8 as G,N as de,M as Ue,O as gt,A as wt,Z as re,_ as he,I as Te,j as oe,m as ae,F as fe,o as ue,$ as pe,J as $e,K as ze,L as je,x as M,T as He,W as kt,V as qt,u as U,v as ce,af as Et,w as Qe,U as Je,r as Ke,ae as Le}from"../chunks/vendor-3c54998b.js";import{q as Xe,l as Ze,u as yt}from"../chunks/stores-b0045d4a.js";import{p as Re,d as At}from"../chunks/index-76bbb2a0.js";import{s as Ge}from"../chunks/pointerStore-2d83d93d.js";import{T as Vt}from"../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{C as Dt}from"../chunks/Crest-599c5571.js";function Ye(l,e,t){const s=l.slice();return s[20]=e[t],s[24]=t,s}function xe(l,e,t){const s=l.slice();return s[20]=e[t],s}function et(l,e,t){const s=l.slice();return s[17]=e[t],s}function St(l){let e,t=l[1].answers.sort(it),s=[];for(let n=0;n<t.length;n+=1)s[n]=tt(Ye(l,t,n));return{c(){e=m("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var a=w(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(u),this.h()},h(){p(e,"class","vote-wrapper svelte-13h57us")},m(n,a){k(n,e,a);for(let i=0;i<s.length;i+=1)s[i].m(e,null)},p(n,a){if(a&258){t=n[1].answers.sort(it);let i;for(i=0;i<t.length;i+=1){const r=Ye(n,t,i);s[i]?s[i].p(r,a):(s[i]=tt(r),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){n&&u(e),Pe(s,n)}}}function Nt(l){let e,t,s,n,a=l[1].answers,i=[];for(let r=0;r<a.length;r+=1)i[r]=nt(xe(l,a,r));return{c(){e=m("p"),t=P("Vote for the best answer"),s=C(),n=m("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=b(r,"P",{class:!0});var f=w(e);t=T(f,"Vote for the best answer"),f.forEach(u),s=I(r),n=b(r,"DIV",{class:!0});var o=w(n);for(let c=0;c<i.length;c+=1)i[c].l(o);o.forEach(u),this.h()},h(){p(e,"class","svelte-13h57us"),p(n,"class","vote-wrapper svelte-13h57us")},m(r,f){k(r,e,f),v(e,t),k(r,s,f),k(r,n,f);for(let o=0;o<i.length;o+=1)i[o].m(n,null)},p(r,f){if(f&150){a=r[1].answers;let o;for(o=0;o<a.length;o+=1){const c=xe(r,a,o);i[o]?i[o].p(c,f):(i[o]=nt(c),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=a.length}},d(r){r&&u(e),r&&u(s),r&&u(n),Pe(i,r)}}}function Ct(l){let e,t,s,n,a,i,r;return{c(){e=m("textarea"),t=C(),s=m("button"),n=P("abschicken"),this.h()},l(f){e=b(f,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,class:!0}),w(e).forEach(u),t=I(f),s=b(f,"BUTTON",{});var o=w(s);n=T(o,"abschicken"),o.forEach(u),this.h()},h(){var f;p(e,"name",""),p(e,"id",""),p(e,"cols","30"),p(e,"rows","10"),p(e,"class","svelte-13h57us"),s.disabled=a=!((f=l[0])==null?void 0:f.length)},m(f,o){k(f,e,o),Ue(e,l[0]),k(f,t,o),k(f,s,o),v(s,n),i||(r=[de(e,"input",l[11]),de(s,"click",l[12])],i=!0)},p(f,o){var c;o&1&&Ue(e,f[0]),o&1&&a!==(a=!((c=f[0])==null?void 0:c.length))&&(s.disabled=a)},d(f){f&&u(e),f&&u(t),f&&u(s),i=!1,gt(r)}}}function It(l){let e,t=l[1].answers,s=[];for(let n=0;n<t.length;n+=1)s[n]=lt(et(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=ne()},l(n){for(let a=0;a<s.length;a+=1)s[a].l(n);e=ne()},m(n,a){for(let i=0;i<s.length;i+=1)s[i].m(n,a);k(n,e,a)},p(n,a){if(a&50){t=n[1].answers;let i;for(i=0;i<t.length;i+=1){const r=et(n,t,i);s[i]?s[i].p(r,a):(s[i]=lt(r),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){Pe(s,n),n&&u(e)}}}function Pt(l){let e,t,s=l[8](l[20].userId)+"",n,a;return{c(){e=m("br"),t=P(`
					(`),n=P(s),a=P(")")},l(i){e=b(i,"BR",{}),t=T(i,`
					(`),n=T(i,s),a=T(i,")")},m(i,r){k(i,e,r),k(i,t,r),k(i,n,r),k(i,a,r)},p(i,r){r&2&&s!==(s=i[8](i[20].userId)+"")&&Y(n,s)},d(i){i&&u(e),i&&u(t),i&&u(n),i&&u(a)}}}function tt(l){let e,t=l[20].votes.length+"",s,n,a,i=l[20].value+"",r,f,o,c=l[24]===0&&Pt(l);return{c(){e=m("p"),s=P(t),n=C(),a=m("p"),r=P(i),f=C(),c&&c.c(),o=C(),this.h()},l(d){e=b(d,"P",{class:!0});var h=w(e);s=T(h,t),h.forEach(u),n=I(d),a=b(d,"P",{class:!0});var g=w(a);r=T(g,i),f=I(g),c&&c.l(g),o=I(g),g.forEach(u),this.h()},h(){p(e,"class","vote-amount svelte-13h57us"),p(a,"class","vote-value svelte-13h57us")},m(d,h){k(d,e,h),v(e,s),k(d,n,h),k(d,a,h),v(a,r),v(a,f),c&&c.m(a,null),v(a,o)},p(d,h){h&2&&t!==(t=d[20].votes.length+"")&&Y(s,t),h&2&&i!==(i=d[20].value+"")&&Y(r,i),d[24]===0&&c.p(d,h)},d(d){d&&u(e),d&&u(n),d&&u(a),c&&c.d()}}}function st(l){let e,t=(l[4].vote!==l[20].id?"\u2610":"\u2612")+"",s,n,a,i=l[20].value+"",r,f,o;function c(){return l[13](l[20])}return{c(){e=m("button"),s=P(t),n=C(),a=m("p"),r=P(i),this.h()},l(d){e=b(d,"BUTTON",{class:!0});var h=w(e);s=T(h,t),h.forEach(u),n=I(d),a=b(d,"P",{class:!0});var g=w(a);r=T(g,i),g.forEach(u),this.h()},h(){p(e,"class","vote-button svelte-13h57us"),G(e,"selected",l[4].vote===l[20].id),p(a,"class","vote-value svelte-13h57us")},m(d,h){k(d,e,h),v(e,s),k(d,n,h),k(d,a,h),v(a,r),f||(o=de(e,"click",c),f=!0)},p(d,h){l=d,h&18&&t!==(t=(l[4].vote!==l[20].id?"\u2610":"\u2612")+"")&&Y(s,t),h&18&&G(e,"selected",l[4].vote===l[20].id),h&2&&i!==(i=l[20].value+"")&&Y(r,i)},d(d){d&&u(e),d&&u(n),d&&u(a),f=!1,o()}}}function nt(l){let e,t=l[20].userId!==l[2].id&&st(l);return{c(){t&&t.c(),e=ne()},l(s){t&&t.l(s),e=ne()},m(s,n){t&&t.m(s,n),k(s,e,n)},p(s,n){s[20].userId!==s[2].id?t?t.p(s,n):(t=st(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&u(e)}}}function lt(l){let e,t=l[17].value+"",s,n,a;function i(){return l[10](l[17])}return{c(){e=m("button"),s=P(t),this.h()},l(r){e=b(r,"BUTTON",{class:!0});var f=w(e);s=T(f,t),f.forEach(u),this.h()},h(){var r,f,o;p(e,"class","answer svelte-13h57us"),G(e,"showAnswer",(r=l[1])==null?void 0:r.correctAnswer),G(e,"correct",l[17].id===((f=l[1])==null?void 0:f.correctAnswer)),G(e,"selected",((o=l[4])==null?void 0:o.aid)===l[17].id)},m(r,f){k(r,e,f),v(e,s),n||(a=de(e,"click",i),n=!0)},p(r,f){var o,c,d;l=r,f&2&&t!==(t=l[17].value+"")&&Y(s,t),f&2&&G(e,"showAnswer",(o=l[1])==null?void 0:o.correctAnswer),f&2&&G(e,"correct",l[17].id===((c=l[1])==null?void 0:c.correctAnswer)),f&18&&G(e,"selected",((d=l[4])==null?void 0:d.aid)===l[17].id)},d(r){r&&u(e),n=!1,a()}}}function Tt(l){let e,t=l[1].description+"",s,n,a;function i(o,c){if(o[1].type==="multiple")return It;if(o[1].state==="open")return Ct;if(o[1].state==="voting-open")return Nt;if(o[1].state==="closed")return St}let r=i(l),f=r&&r(l);return{c(){e=m("p"),s=P(t),n=C(),f&&f.c(),a=ne(),this.h()},l(o){e=b(o,"P",{class:!0});var c=w(e);s=T(c,t),c.forEach(u),n=I(o),f&&f.l(o),a=ne(),this.h()},h(){p(e,"class","description svelte-13h57us")},m(o,c){k(o,e,c),v(e,s),k(o,n,c),f&&f.m(o,c),k(o,a,c)},p(o,[c]){c&2&&t!==(t=o[1].description+"")&&Y(s,t),r===(r=i(o))&&f?f.p(o,c):(f&&f.d(1),f=r&&r(o),f&&(f.c(),f.m(a.parentNode,a)))},i:O,o:O,d(o){o&&u(e),o&&u(n),f&&f.d(o),o&&u(a)}}}const it=(l,e)=>l.votes.length>e.votes.length?-1:1;function $t(l,e,t){let s,n,a=O,i=()=>(a(),a=Oe(d,E=>t(4,n=E)),d),r;_e(l,Xe,E=>t(9,r=E)),l.$$.on_destroy.push(()=>a());const f=bt();let{question:o}=e,{userData:c}=e;const d=Ze("active-question",{qid:"",aid:"",value:"",vote:""});i();let{textValue:h}=e;function g(E){E!==n.qid&&o.state==="open"&&(x(d,n.qid=o.id,n),x(d,n.aid=E,n),f("answer",E))}function _(E){f("text",E)}function S(E){x(d,n.vote=E,n),f("vote",E)}function V(E){const D=s.find(F=>F.id===E);return D?D==null?void 0:D.name:""}const $=E=>g(E.id);function y(){h=this.value,t(0,h)}const z=()=>_(h),j=E=>S(E.id);return l.$$set=E=>{"question"in E&&t(1,o=E.question),"userData"in E&&t(2,c=E.userData),"textValue"in E&&t(0,h=E.textValue)},l.$$.update=()=>{l.$$.dirty&512&&(s=r.users),l.$$.dirty&18&&(o==null||o.correctAnswer,n.aid)},[h,o,c,d,n,g,_,S,V,r,$,y,z,j]}class zt extends Ee{constructor(e){super();ye(this,e,$t,Tt,Ae,{question:1,userData:2,questionStore:3,textValue:0})}get questionStore(){return this.$$.ctx[3]}}function jt(l){let e;return{c(){e=m("canvas"),this.h()},l(t){e=b(t,"CANVAS",{width:!0,height:!0,style:!0,class:!0}),w(e).forEach(u),this.h()},h(){p(e,"width",l[0]),p(e,"height",l[1]),p(e,"style","transform: translateZ(var(--z))"),p(e,"class","svelte-m0dfni")},m(t,s){k(t,e,s),l[5](e)},p(t,[s]){s&1&&p(e,"width",t[0]),s&2&&p(e,"height",t[1])},i:O,o:O,d(t){t&&u(e),l[5](null)}}}const ve=9;function Rt(l,e,t){let s,n;_e(l,Ge,y=>t(9,n=y));let{width:a=200}=e,{height:i=400}=e,{amount:r=200}=e,f,o;function c(y,z){s.splice(y,z.length,...z)}function d(y){return s.slice(y,y+ve)}const h=()=>Math.random();function g(){for(let y=0;y<s.length-ve;y+=ve){const z=a/2,j=i-10,E=5+Math.random()*7,D=E/12,F=(h()-.5)*(D*D)*5,H=1+Math.random()*5,B=1+Math.random()*5,Q=Math.random(),W=Math.random()*.1,A=.1+Math.random()*.4;c(y,[z,j,F,E,H,B,Q,W,A])}_||(_=!0,V())}let _=!1;function S(){g()}function V(){if(_)requestAnimationFrame(V);else{o.clearRect(0,0,a,i);return}o.clearRect(0,0,a,i);const y=n.x;n.y;let z=0;for(let j=0;j<r;j++){let[E,D,F,H,B,Q,W,A,R]=d(j*ve);if(E===0)continue;z++;const J=R+W/10%.5;o.fillStyle=`hsl(34, 100%, ${J*100}%, 1)`,o.save(),o.translate(E+B/2,D+Q/2),o.rotate(W),o.fillRect(-B/2,-Q/2,B,Q),o.restore(),E-=F-y,D-=H-.2,H>-2&&(H-=.2),W+=A,D>i&&(E=0),c(j*ve,[E,D,F,H,B,Q,W,A])}_=z>1}wt(()=>{o=f.getContext("2d")});function $(y){re[y?"unshift":"push"](()=>{f=y,t(2,f)})}return l.$$set=y=>{"width"in y&&t(0,a=y.width),"height"in y&&t(1,i=y.height),"amount"in y&&t(3,r=y.amount)},l.$$.update=()=>{l.$$.dirty&8&&(s=new Array(r*ve).fill(null))},[a,i,f,r,S,$]}class rt extends Ee{constructor(e){super();ye(this,e,Rt,jt,Ae,{width:0,height:1,amount:3,show:4})}get show(){return this.$$.ctx[4]}}const Mt=l=>({}),ot=l=>({}),Ft=l=>({}),at=l=>({}),Bt=l=>({}),ft=l=>({});function Wt(l){let e,t;return{c(){e=m("p"),t=P("No Frontside")},l(s){e=b(s,"P",{});var n=w(e);t=T(n,"No Frontside"),n.forEach(u)},m(s,n){k(s,e,n),v(e,t)},d(s){s&&u(e)}}}function Ot(l){let e;return{c(){e=m("p")},l(t){e=b(t,"P",{}),w(e).forEach(u)},m(t,s){k(t,e,s)},d(t){t&&u(e)}}}function Ut(l){let e;return{c(){e=m("span")},l(t){e=b(t,"SPAN",{}),w(e).forEach(u)},m(t,s){k(t,e,s)},d(t){t&&u(e)}}}function Ht(l){let e,t,s,n,a,i,r,f,o,c,d,h,g,_,S,V,$,y,z,j,E,D,F,H,B,Q,W,A,R,J,le,Ve,ie,me,De,Se,K;function vt(q){l[8](q)}let Me={amount:200};l[1]!==void 0&&(Me.show=l[1]),t=new rt({props:Me}),re.push(()=>he(t,"show",vt));function mt(q){l[9](q)}let Fe={amount:50};l[2]!==void 0&&(Fe.show=l[2]),r=new rt({props:Fe}),re.push(()=>he(r,"show",mt));const Ne=l[7].front,be=Te(Ne,l,l[6],ft),L=be||Wt(),Ce=l[7].back,ge=Te(Ce,l,l[6],at),X=ge||Ot(),Ie=l[7].info,we=Te(Ie,l,l[6],ot),Z=we||Ut();return{c(){e=m("div"),s=m("div"),oe(t.$$.fragment),i=C(),f=m("div"),oe(r.$$.fragment),d=C(),h=m("div"),g=m("div"),_=m("span"),S=C(),V=m("span"),$=C(),y=m("span"),z=C(),j=m("span"),E=C(),D=m("div"),F=m("span"),H=C(),B=m("span"),Q=C(),W=m("span"),A=C(),R=m("span"),J=C(),le=m("div"),L&&L.c(),Ve=C(),ie=m("div"),X&&X.c(),De=C(),Z&&Z.c(),this.h()},l(q){e=b(q,"DIV",{class:!0});var N=w(e);s=b(N,"DIV",{style:!0});var ke=w(s);ae(t.$$.fragment,ke),i=I(N),f=b(N,"DIV",{style:!0});var qe=w(f);ae(r.$$.fragment,qe),d=I(N),h=b(N,"DIV",{class:!0,style:!0});var ee=w(h);g=b(ee,"DIV",{class:!0});var te=w(g);_=b(te,"SPAN",{class:!0}),w(_).forEach(u),S=I(te),V=b(te,"SPAN",{class:!0}),w(V).forEach(u),$=I(te),y=b(te,"SPAN",{class:!0}),w(y).forEach(u),z=I(te),j=b(te,"SPAN",{class:!0}),w(j).forEach(u),te.forEach(u),E=I(ee),D=b(ee,"DIV",{class:!0});var se=w(D);F=b(se,"SPAN",{class:!0}),w(F).forEach(u),H=I(se),B=b(se,"SPAN",{class:!0}),w(B).forEach(u),Q=I(se),W=b(se,"SPAN",{class:!0}),w(W).forEach(u),A=I(se),R=b(se,"SPAN",{class:!0}),w(R).forEach(u),se.forEach(u),J=I(ee),le=b(ee,"DIV",{class:!0,id:!0});var Be=w(le);L&&L.l(Be),Be.forEach(u),Ve=I(ee),ie=b(ee,"DIV",{class:!0,id:!0});var We=w(ie);X&&X.l(We),We.forEach(u),ee.forEach(u),De=I(N),Z&&Z.l(N),N.forEach(u),this.h()},h(){fe(s,"display","contents"),fe(s,"--opacity","0.4"),fe(s,"--z",a=l[0]?"-30px":"30px"),fe(f,"display","contents"),fe(f,"--z",c=l[0]?"-70px":"70px"),p(_,"class","corner tr svelte-eeqrwg"),p(V,"class","corner tl svelte-eeqrwg"),p(y,"class","corner br svelte-eeqrwg"),p(j,"class","corner bl svelte-eeqrwg"),p(g,"class","corner-wrapper svelte-eeqrwg"),p(F,"class","corner tr svelte-eeqrwg"),p(B,"class","corner tl svelte-eeqrwg"),p(W,"class","corner br svelte-eeqrwg"),p(R,"class","corner bl svelte-eeqrwg"),p(D,"class","corner-wrapper back svelte-eeqrwg"),p(le,"class","card-face svelte-eeqrwg"),p(le,"id","front"),p(ie,"class","card-face svelte-eeqrwg"),p(ie,"id","back"),p(h,"class","card svelte-eeqrwg"),p(h,"style",me=`
		--x:${l[4].x*l[3]}deg;
		--y:${l[4].y*-l[3]}deg;
		`),p(e,"class","scene svelte-eeqrwg"),G(e,"flipped",l[0])},m(q,N){k(q,e,N),v(e,s),ue(t,s,null),v(e,i),v(e,f),ue(r,f,null),v(e,d),v(e,h),v(h,g),v(g,_),v(g,S),v(g,V),v(g,$),v(g,y),v(g,z),v(g,j),v(h,E),v(h,D),v(D,F),v(D,H),v(D,B),v(D,Q),v(D,W),v(D,A),v(D,R),v(h,J),v(h,le),L&&L.m(le,null),v(h,Ve),v(h,ie),X&&X.m(ie,null),v(e,De),Z&&Z.m(e,null),K=!0},p(q,[N]){N&1&&a!==(a=q[0]?"-30px":"30px")&&fe(s,"--z",a);const ke={};!n&&N&2&&(n=!0,ke.show=q[1],pe(()=>n=!1)),t.$set(ke),N&1&&c!==(c=q[0]?"-70px":"70px")&&fe(f,"--z",c);const qe={};!o&&N&4&&(o=!0,qe.show=q[2],pe(()=>o=!1)),r.$set(qe),be&&be.p&&(!K||N&64)&&$e(be,Ne,q,q[6],K?je(Ne,q[6],N,Bt):ze(q[6]),ft),ge&&ge.p&&(!K||N&64)&&$e(ge,Ce,q,q[6],K?je(Ce,q[6],N,Ft):ze(q[6]),at),(!K||N&24&&me!==(me=`
		--x:${q[4].x*q[3]}deg;
		--y:${q[4].y*-q[3]}deg;
		`))&&p(h,"style",me),we&&we.p&&(!K||N&64)&&$e(we,Ie,q,q[6],K?je(Ie,q[6],N,Mt):ze(q[6]),ot),N&1&&G(e,"flipped",q[0])},i(q){K||(M(t.$$.fragment,q),M(r.$$.fragment,q),M(L,q),M(X,q),M(Z,q),Se||He(()=>{Se=kt(e,qt,{}),Se.start()}),K=!0)},o(q){U(t.$$.fragment,q),U(r.$$.fragment,q),U(L,q),U(X,q),U(Z,q),K=!1},d(q){q&&u(e),ce(t),ce(r),L&&L.d(q),X&&X.d(q),Z&&Z.d(q)}}}function Qt(l,e,t){let s,n;_e(l,Ge,_=>t(4,n=_));let{$$slots:a={},$$scope:i}=e,{flipped:r=!1}=e,f,o,c;const d=()=>{f==null||f(),o==null||o(),c==null||c()};function h(_){f=_,t(1,f)}function g(_){c=_,t(2,c)}return l.$$set=_=>{"flipped"in _&&t(0,r=_.flipped),"$$scope"in _&&t(6,i=_.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&t(3,s=r?1:10)},[r,f,c,s,n,d,i,a,h,g]}class ut extends Ee{constructor(e){super();ye(this,e,Qt,Ht,Ae,{flipped:0,showConfetti:5})}get showConfetti(){return this.$$.ctx[5]}}function Jt(l){let e,t;return{c(){e=m("p"),t=P("Quiz Already started")},l(s){e=b(s,"P",{});var n=w(e);t=T(n,"Quiz Already started"),n.forEach(u)},m(s,n){k(s,e,n),v(e,t)},p:O,i:O,o:O,d(s){s&&u(e)}}}function Kt(l){let e,t;return{c(){e=m("p"),t=P("Results")},l(s){e=b(s,"P",{});var n=w(e);t=T(n,"Results"),n.forEach(u)},m(s,n){k(s,e,n),v(e,t)},p:O,i:O,o:O,d(s){s&&u(e)}}}function Lt(l){let e,t,s;function n(i){l[22](i)}let a={flipped:l[1]!=="closed"&&l[8]&&l[1]!=="voting-open",$$slots:{info:[Yt],back:[Gt],front:[Zt]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.showConfetti=l[0]),e=new ut({props:a}),re.push(()=>he(e,"showConfetti",n)),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,r){ue(e,i,r),s=!0},p(i,r){const f={};r&258&&(f.flipped=i[1]!=="closed"&&i[8]&&i[1]!=="voting-open"),r&33554750&&(f.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,f.showConfetti=i[0],pe(()=>t=!1)),e.$set(f)},i(i){s||(M(e.$$.fragment,i),s=!0)},o(i){U(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function Xt(l){let e,t,s;function n(i){l[19](i)}let a={flipped:l[7],$$slots:{info:[ls],back:[ns],front:[ts]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.showConfetti=l[0]),e=new ut({props:a}),re.push(()=>he(e,"showConfetti",n)),{c(){oe(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,r){ue(e,i,r),s=!0},p(i,r){const f={};r&128&&(f.flipped=i[7]),r&33555652&&(f.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,f.showConfetti=i[0],pe(()=>t=!1)),e.$set(f)},i(i){s||(M(e.$$.fragment,i),s=!0)},o(i){U(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function Zt(l){let e,t,s,n,a;function i(o){l[20](o)}function r(o){l[21](o)}let f={userData:l[3],question:l[2].activeQuestion};return l[5]!==void 0&&(f.textValue=l[5]),l[4]!==void 0&&(f.questionStore=l[4]),t=new zt({props:f}),re.push(()=>he(t,"textValue",i)),re.push(()=>he(t,"questionStore",r)),t.$on("vote",l[14]),t.$on("answer",l[13]),t.$on("text",l[13]),{c(){e=m("div"),oe(t.$$.fragment),this.h()},l(o){e=b(o,"DIV",{slot:!0,class:!0});var c=w(e);ae(t.$$.fragment,c),c.forEach(u),this.h()},h(){p(e,"slot","front"),p(e,"class","svelte-1ek19qe")},m(o,c){k(o,e,c),ue(t,e,null),a=!0},p(o,c){const d={};c&8&&(d.userData=o[3]),c&4&&(d.question=o[2].activeQuestion),!s&&c&32&&(s=!0,d.textValue=o[5],pe(()=>s=!1)),!n&&c&16&&(n=!0,d.questionStore=o[4],pe(()=>n=!1)),t.$set(d)},i(o){a||(M(t.$$.fragment,o),a=!0)},o(o){U(t.$$.fragment,o),a=!1},d(o){o&&u(e),ce(t)}}}function ct(l){let e,t;return{c(){e=m("p"),t=P("Vote for the best answer")},l(s){e=b(s,"P",{});var n=w(e);t=T(n,"Vote for the best answer"),n.forEach(u)},m(s,n){k(s,e,n),v(e,t)},d(s){s&&u(e)}}}function Gt(l){let e,t=l[1]==="voting-open"&&ct();return{c(){e=m("div"),t&&t.c(),this.h()},l(s){e=b(s,"DIV",{slot:!0,class:!0});var n=w(e);t&&t.l(n),n.forEach(u),this.h()},h(){p(e,"slot","back"),p(e,"class","svelte-1ek19qe")},m(s,n){k(s,e,n),t&&t.m(e,null)},p(s,n){s[1]==="voting-open"?t||(t=ct(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&u(e),t&&t.d()}}}function _t(l){let e,t;return{c(){e=m("p"),t=P("Warte bis die Frage beendet wird.")},l(s){e=b(s,"P",{});var n=w(e);t=T(n,"Warte bis die Frage beendet wird."),n.forEach(u)},m(s,n){k(s,e,n),v(e,t)},d(s){s&&u(e)}}}function Yt(l){let e,t=l[8]&&l[1]!=="closed"&&l[1]!=="voting-open"&&_t();return{c(){e=m("div"),t&&t.c(),this.h()},l(s){e=b(s,"DIV",{slot:!0});var n=w(e);t&&t.l(n),n.forEach(u),this.h()},h(){p(e,"slot","info")},m(s,n){k(s,e,n),t&&t.m(e,null)},p(s,n){s[8]&&s[1]!=="closed"&&s[1]!=="voting-open"?t||(t=_t(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&u(e),t&&t.d()}}}function xt(l){let e,t=l[2].description+"",s,n,a,i=!l[6]&&!l[7]&&dt(l);return{c(){e=m("h2"),s=P(t),n=C(),i&&i.c(),a=ne()},l(r){e=b(r,"H2",{});var f=w(e);s=T(f,t),f.forEach(u),n=I(r),i&&i.l(r),a=ne()},m(r,f){k(r,e,f),v(e,s),k(r,n,f),i&&i.m(r,f),k(r,a,f)},p(r,f){f&4&&t!==(t=r[2].description+"")&&Y(s,t),!r[6]&&!r[7]?i?i.p(r,f):(i=dt(r),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},d(r){r&&u(e),r&&u(n),i&&i.d(r),r&&u(a)}}}function es(l){let e,t;return{c(){e=m("a"),t=P("Need to input your name"),this.h()},l(s){e=b(s,"A",{href:!0,class:!0});var n=w(e);t=T(n,"Need to input your name"),n.forEach(u),this.h()},h(){p(e,"href","/"),p(e,"class","svelte-1ek19qe")},m(s,n){k(s,e,n),v(e,t)},p:O,d(s){s&&u(e)}}}function dt(l){let e,t,s,n;return{c(){e=m("button"),t=P("Beitreten")},l(a){e=b(a,"BUTTON",{});var i=w(e);t=T(i,"Beitreten"),i.forEach(u)},m(a,i){k(a,e,i),v(e,t),s||(n=de(e,"click",l[12]),s=!0)},p:O,d(a){a&&u(e),s=!1,n()}}}function ts(l){let e,t,s,n;function a(f,o){return!f[10].name||!f[10].house?es:xt}let i=a(l),r=i(l);return{c(){e=m("div"),t=m("h1"),s=P("Registration"),n=C(),r.c(),this.h()},l(f){e=b(f,"DIV",{slot:!0,class:!0});var o=w(e);t=b(o,"H1",{});var c=w(t);s=T(c,"Registration"),c.forEach(u),n=I(o),r.l(o),o.forEach(u),this.h()},h(){p(e,"slot","front"),p(e,"class","svelte-1ek19qe")},m(f,o){k(f,e,o),v(e,t),v(t,s),v(e,n),r.m(e,null)},p(f,o){i===(i=a(f))&&r?r.p(f,o):(r.d(1),r=i(f),r&&(r.c(),r.m(e,null)))},d(f){f&&u(e),r.d()}}}function ht(l){let e,t;return e=new Vt({props:{endsAt:l[2].startsAt,$$slots:{default:[ss,({secondsLeft:s})=>({24:s}),({secondsLeft:s})=>s?16777216:0]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,n){ue(e,s,n),t=!0},p(s,n){const a={};n&4&&(a.endsAt=s[2].startsAt),n&50331648&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function ss(l){let e,t=l[24]+"",s;return{c(){e=m("h1"),s=P(t)},l(n){e=b(n,"H1",{});var a=w(e);s=T(a,t),a.forEach(u)},m(n,a){k(n,e,a),v(e,s)},p(n,a){a&16777216&&t!==(t=n[24]+"")&&Y(s,t)},d(n){n&&u(e)}}}function ns(l){let e,t,s=l[2].startsAt&&ht(l);return{c(){e=m("div"),s&&s.c(),this.h()},l(n){e=b(n,"DIV",{slot:!0,class:!0});var a=w(e);s&&s.l(a),a.forEach(u),this.h()},h(){p(e,"slot","back"),p(e,"class","svelte-1ek19qe")},m(n,a){k(n,e,a),s&&s.m(e,null),t=!0},p(n,a){n[2].startsAt?s?(s.p(n,a),a&4&&M(s,1)):(s=ht(n),s.c(),M(s,1),s.m(e,null)):s&&(Ke(),U(s,1,1,()=>{s=null}),Qe())},i(n){t||(M(s),t=!0)},o(n){U(s),t=!1},d(n){n&&u(e),s&&s.d()}}}function pt(l){let e,t;return{c(){e=m("p"),t=P("Warte bis das Quiz beginnt")},l(s){e=b(s,"P",{});var n=w(e);t=T(n,"Warte bis das Quiz beginnt"),n.forEach(u)},m(s,n){k(s,e,n),v(e,t)},d(s){s&&u(e)}}}function ls(l){let e,t=l[7]&&!l[2].startsAt&&pt();return{c(){e=m("div"),t&&t.c(),this.h()},l(s){e=b(s,"DIV",{slot:!0,id:!0,class:!0});var n=w(e);t&&t.l(n),n.forEach(u),this.h()},h(){p(e,"slot","info"),p(e,"id","registration-success"),p(e,"class","svelte-1ek19qe")},m(s,n){k(s,e,n),t&&t.m(e,null)},p(s,n){s[7]&&!s[2].startsAt?t||(t=pt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&u(e),t&&t.d()}}}function is(l){let e,t,s,n,a,i,r,f,o,c;const d=[Xt,Lt,Kt,Jt],h=[];function g(_,S){var V,$;return _[9]==="registration"?0:_[9]==="running"&&(($=(V=_[2])==null?void 0:V.activeQuestion)==null?void 0:$.id)&&_[7]?1:_[9]==="results"&&_[7]?2:3}return t=g(l),s=h[t]=d[t](l),i=new Dt({props:{house:l[10].house}}),{c(){e=C(),s.c(),n=C(),a=m("div"),oe(i.$$.fragment),this.h()},l(_){Et('[data-svelte="svelte-aqh7sr"]',document.head).forEach(u),e=I(_),s.l(_),n=I(_),a=b(_,"DIV",{class:!0});var V=w(a);ae(i.$$.fragment,V),V.forEach(u),this.h()},h(){document.title="Dungeon Quiz",p(a,"class","crest svelte-1ek19qe")},m(_,S){k(_,e,S),h[t].m(_,S),k(_,n,S),k(_,a,S),ue(i,a,null),f=!0,o||(c=de(window,"keydown",l[15]),o=!0)},p(_,[S]){let V=t;t=g(_),t===V?h[t].p(_,S):(Ke(),U(h[V],1,1,()=>{h[V]=null}),Qe(),s=h[t],s?s.p(_,S):(s=h[t]=d[t](_),s.c()),M(s,1),s.m(n.parentNode,n));const $={};S&1024&&($.house=_[10].house),i.$set($)},i(_){f||(M(s),M(i.$$.fragment,_),He(()=>{r||(r=Je(a,Le,{duration:5e3},!0)),r.run(1)}),f=!0)},o(_){U(s),U(i.$$.fragment,_),r||(r=Je(a,Le,{duration:5e3},!1)),r.run(0),f=!1},d(_){_&&u(e),h[t].d(_),_&&u(n),_&&u(a),ce(i),_&&r&&r.end(),o=!1,c()}}}function rs(l,e,t){let s,n,a,i,r,f,o,c,d=O,h=()=>(d(),d=Oe(V,A=>t(18,c=A)),V),g,_;_e(l,Xe,A=>t(2,o=A)),_e(l,yt,A=>t(10,_=A)),l.$$.on_destroy.push(()=>d());let S,V;const $=Ze("quiz-user-data",{id:"",qid:"",token:""});_e(l,$,A=>t(3,g=A));let y,z=!1;async function j(){if(z||i)return;t(6,z=!0);const R=await(await Re("api/quiz/register",{name:_.name,house:_.house})).json(),J=At(R.token);x($,g.token=R.token,g),x($,g.id=J.id,g),x($,g.qid=J.qid,g),t(6,z=!1)}async function E({detail:A}){const R=await Re("api/quiz/answer",A,g.token);if(!R.ok)return;const J=await R.json();x(V,c.qid=n.id,c),x(V,c.value=A,c),n.type==="voting"&&J.id&&x(V,c.aid=J.id,c)}async function D({detail:A}){const R=await Re("api/quiz/vote",A,g.token);console.log(await R.json())}function F({key:A}){A==="L"&&console.log(c,o)}function H(A){S=A,t(0,S)}function B(A){y=A,t(5,y)}function Q(A){V=A,h(t(4,V))}function W(A){S=A,t(0,S)}return l.$$.update=()=>{l.$$.dirty&4&&t(9,s=o==null?void 0:o.state),l.$$.dirty&4&&t(16,n=o==null?void 0:o.activeQuestion),l.$$.dirty&65536&&t(1,a=n==null?void 0:n.state),l.$$.dirty&4&&(o==null||o.users),l.$$.dirty&12&&t(7,i=(g==null?void 0:g.id)&&(g==null?void 0:g.qid)===(o==null?void 0:o.id)),l.$$.dirty&327680&&t(8,r=(n==null?void 0:n.type)==="multiple"?(c==null?void 0:c.qid)===(n==null?void 0:n.id):(c==null?void 0:c.qid)===(n==null?void 0:n.id)&&(c==null?void 0:c.value)),l.$$.dirty&327680&&t(17,f=(n==null?void 0:n.correctAnswer)===(c==null?void 0:c.aid)),l.$$.dirty&131075&&a==="closed"&&f&&setTimeout(()=>{S()},1e3)},[S,a,o,g,V,y,z,i,r,s,_,$,j,E,D,F,n,f,c,H,B,Q,W]}class ds extends Ee{constructor(e){super();ye(this,e,rs,is,Ae,{})}}export{ds as default};
