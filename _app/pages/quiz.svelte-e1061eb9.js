import{S as Ee,i as ye,s as Ae,e as m,t as I,k as P,l as ue,c as b,a as w,g as $,d as u,n as D,b as p,f as k,G as v,h as Y,H as W,a9 as _e,ak as mt,ag as Oe,ao as x,X as Ie,a8 as G,N as de,M as Ue,O as bt,A as gt,Z as ie,_ as he,I as $e,j as oe,m as re,F as ae,o as fe,$ as pe,J as Te,K as ze,L as je,x as M,T as He,W as wt,V as kt,u as O,v as ce,af as qt,w as Qe,U as Je,r as Ke,ae as Le}from"../chunks/vendor-3c54998b.js";import{q as Xe,l as Ze,u as Et}from"../chunks/stores-b0045d4a.js";import{p as Re,d as yt}from"../chunks/index-76bbb2a0.js";import{s as Ge}from"../chunks/pointerStore-2d83d93d.js";import{T as At}from"../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{C as Vt}from"../chunks/Crest-599c5571.js";function Ye(l,e,s){const t=l.slice();return t[19]=e[s],t[23]=s,t}function xe(l,e,s){const t=l.slice();return t[19]=e[s],t}function et(l,e,s){const t=l.slice();return t[16]=e[s],t}function St(l){let e,s=l[1].answers.sort(lt),t=[];for(let n=0;n<s.length;n+=1)t[n]=tt(Ye(l,s,n));return{c(){e=m("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var r=w(e);for(let i=0;i<t.length;i+=1)t[i].l(r);r.forEach(u),this.h()},h(){p(e,"class","vote-wrapper svelte-13h57us")},m(n,r){k(n,e,r);for(let i=0;i<t.length;i+=1)t[i].m(e,null)},p(n,r){if(r&130){s=n[1].answers.sort(lt);let i;for(i=0;i<s.length;i+=1){const o=Ye(n,s,i);t[i]?t[i].p(o,r):(t[i]=tt(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){n&&u(e),Ie(t,n)}}}function Ct(l){let e,s,t,n,r=l[1].answers,i=[];for(let o=0;o<r.length;o+=1)i[o]=st(xe(l,r,o));return{c(){e=m("p"),s=I("Vote for the best answer"),t=P(),n=m("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=b(o,"P",{class:!0});var f=w(e);s=$(f,"Vote for the best answer"),f.forEach(u),t=D(o),n=b(o,"DIV",{class:!0});var a=w(n);for(let c=0;c<i.length;c+=1)i[c].l(a);a.forEach(u),this.h()},h(){p(e,"class","svelte-13h57us"),p(n,"class","vote-wrapper svelte-13h57us")},m(o,f){k(o,e,f),v(e,s),k(o,t,f),k(o,n,f);for(let a=0;a<i.length;a+=1)i[a].m(n,null)},p(o,f){if(f&74){r=o[1].answers;let a;for(a=0;a<r.length;a+=1){const c=xe(o,r,a);i[a]?i[a].p(c,f):(i[a]=st(c),i[a].c(),i[a].m(n,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}},d(o){o&&u(e),o&&u(t),o&&u(n),Ie(i,o)}}}function Nt(l){let e,s,t,n,r,i,o;return{c(){e=m("textarea"),s=P(),t=m("button"),n=I("abschicken"),this.h()},l(f){e=b(f,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,class:!0}),w(e).forEach(u),s=D(f),t=b(f,"BUTTON",{});var a=w(t);n=$(a,"abschicken"),a.forEach(u),this.h()},h(){var f;p(e,"name",""),p(e,"id",""),p(e,"cols","30"),p(e,"rows","10"),p(e,"class","svelte-13h57us"),t.disabled=r=!((f=l[0])==null?void 0:f.length)},m(f,a){k(f,e,a),Ue(e,l[0]),k(f,s,a),k(f,t,a),v(t,n),i||(o=[de(e,"input",l[10]),de(t,"click",l[11])],i=!0)},p(f,a){var c;a&1&&Ue(e,f[0]),a&1&&r!==(r=!((c=f[0])==null?void 0:c.length))&&(t.disabled=r)},d(f){f&&u(e),f&&u(s),f&&u(t),i=!1,bt(o)}}}function Pt(l){let e,s=l[1].answers,t=[];for(let n=0;n<s.length;n+=1)t[n]=nt(et(l,s,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=ue()},l(n){for(let r=0;r<t.length;r+=1)t[r].l(n);e=ue()},m(n,r){for(let i=0;i<t.length;i+=1)t[i].m(n,r);k(n,e,r)},p(n,r){if(r&26){s=n[1].answers;let i;for(i=0;i<s.length;i+=1){const o=et(n,s,i);t[i]?t[i].p(o,r):(t[i]=nt(o),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){Ie(t,n),n&&u(e)}}}function Dt(l){let e,s,t=l[7](l[19].userId)+"",n,r;return{c(){e=m("br"),s=I(`
					(`),n=I(t),r=I(")")},l(i){e=b(i,"BR",{}),s=$(i,`
					(`),n=$(i,t),r=$(i,")")},m(i,o){k(i,e,o),k(i,s,o),k(i,n,o),k(i,r,o)},p(i,o){o&2&&t!==(t=i[7](i[19].userId)+"")&&Y(n,t)},d(i){i&&u(e),i&&u(s),i&&u(n),i&&u(r)}}}function tt(l){let e,s=l[19].votes.length+"",t,n,r,i=l[19].value+"",o,f,a,c=l[23]===0&&Dt(l);return{c(){e=m("p"),t=I(s),n=P(),r=m("p"),o=I(i),f=P(),c&&c.c(),a=P(),this.h()},l(d){e=b(d,"P",{class:!0});var h=w(e);t=$(h,s),h.forEach(u),n=D(d),r=b(d,"P",{class:!0});var g=w(r);o=$(g,i),f=D(g),c&&c.l(g),a=D(g),g.forEach(u),this.h()},h(){p(e,"class","vote-amount svelte-13h57us"),p(r,"class","vote-value svelte-13h57us")},m(d,h){k(d,e,h),v(e,t),k(d,n,h),k(d,r,h),v(r,o),v(r,f),c&&c.m(r,null),v(r,a)},p(d,h){h&2&&s!==(s=d[19].votes.length+"")&&Y(t,s),h&2&&i!==(i=d[19].value+"")&&Y(o,i),d[23]===0&&c.p(d,h)},d(d){d&&u(e),d&&u(n),d&&u(r),c&&c.d()}}}function st(l){let e,s=(l[3].vote!==l[19].id?"\u2610":"\u2612")+"",t,n,r,i=l[19].value+"",o,f,a;function c(){return l[12](l[19])}return{c(){e=m("button"),t=I(s),n=P(),r=m("p"),o=I(i),this.h()},l(d){e=b(d,"BUTTON",{class:!0});var h=w(e);t=$(h,s),h.forEach(u),n=D(d),r=b(d,"P",{class:!0});var g=w(r);o=$(g,i),g.forEach(u),this.h()},h(){p(e,"class","vote-button svelte-13h57us"),G(e,"selected",l[3].vote===l[19].id),p(r,"class","vote-value svelte-13h57us")},m(d,h){k(d,e,h),v(e,t),k(d,n,h),k(d,r,h),v(r,o),f||(a=de(e,"click",c),f=!0)},p(d,h){l=d,h&10&&s!==(s=(l[3].vote!==l[19].id?"\u2610":"\u2612")+"")&&Y(t,s),h&10&&G(e,"selected",l[3].vote===l[19].id),h&2&&i!==(i=l[19].value+"")&&Y(o,i)},d(d){d&&u(e),d&&u(n),d&&u(r),f=!1,a()}}}function nt(l){let e,s=l[16].value+"",t,n,r;function i(){return l[9](l[16])}return{c(){e=m("button"),t=I(s),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var f=w(e);t=$(f,s),f.forEach(u),this.h()},h(){var o,f,a;p(e,"class","answer svelte-13h57us"),G(e,"showAnswer",(o=l[1])==null?void 0:o.correctAnswer),G(e,"correct",l[16].id===((f=l[1])==null?void 0:f.correctAnswer)),G(e,"selected",((a=l[3])==null?void 0:a.aid)===l[16].id)},m(o,f){k(o,e,f),v(e,t),n||(r=de(e,"click",i),n=!0)},p(o,f){var a,c,d;l=o,f&2&&s!==(s=l[16].value+"")&&Y(t,s),f&2&&G(e,"showAnswer",(a=l[1])==null?void 0:a.correctAnswer),f&2&&G(e,"correct",l[16].id===((c=l[1])==null?void 0:c.correctAnswer)),f&10&&G(e,"selected",((d=l[3])==null?void 0:d.aid)===l[16].id)},d(o){o&&u(e),n=!1,r()}}}function It(l){let e,s=l[1].description+"",t,n,r;function i(a,c){if(a[1].type==="multiple")return Pt;if(a[1].state==="open")return Nt;if(a[1].state==="voting-open")return Ct;if(a[1].state==="closed")return St}let o=i(l),f=o&&o(l);return{c(){e=m("p"),t=I(s),n=P(),f&&f.c(),r=ue(),this.h()},l(a){e=b(a,"P",{class:!0});var c=w(e);t=$(c,s),c.forEach(u),n=D(a),f&&f.l(a),r=ue(),this.h()},h(){p(e,"class","description svelte-13h57us")},m(a,c){k(a,e,c),v(e,t),k(a,n,c),f&&f.m(a,c),k(a,r,c)},p(a,[c]){c&2&&s!==(s=a[1].description+"")&&Y(t,s),o===(o=i(a))&&f?f.p(a,c):(f&&f.d(1),f=o&&o(a),f&&(f.c(),f.m(r.parentNode,r)))},i:W,o:W,d(a){a&&u(e),a&&u(n),f&&f.d(a),a&&u(r)}}}const lt=(l,e)=>l.votes.length>e.votes.length?-1:1;function $t(l,e,s){let t,n,r=W,i=()=>(r(),r=Oe(c,E=>s(3,n=E)),c),o;_e(l,Xe,E=>s(8,o=E)),l.$$.on_destroy.push(()=>r());const f=mt();let{question:a}=e;const c=Ze("active-question",{qid:"",aid:"",value:"",vote:""});i();let{textValue:d}=e;function h(E){E!==n.qid&&a.state==="open"&&(x(c,n.qid=a.id,n),x(c,n.aid=E,n),f("answer",E))}function g(E){f("text",E)}function _(E){x(c,n.vote=E,n),f("vote",E)}function S(E){const z=t.find(C=>C.id===E);return z?z==null?void 0:z.name:""}const V=E=>h(E.id);function T(){d=this.value,s(0,d)}const y=()=>g(d),j=E=>_(E.id);return l.$$set=E=>{"question"in E&&s(1,a=E.question),"textValue"in E&&s(0,d=E.textValue)},l.$$.update=()=>{l.$$.dirty&256&&(t=o.users),l.$$.dirty&10&&(a==null||a.correctAnswer,n.aid)},[d,a,c,n,h,g,_,S,o,V,T,y,j]}class Tt extends Ee{constructor(e){super();ye(this,e,$t,It,Ae,{question:1,questionStore:2,textValue:0})}get questionStore(){return this.$$.ctx[2]}}function zt(l){let e;return{c(){e=m("canvas"),this.h()},l(s){e=b(s,"CANVAS",{width:!0,height:!0,style:!0,class:!0}),w(e).forEach(u),this.h()},h(){p(e,"width",l[0]),p(e,"height",l[1]),p(e,"style","transform: translateZ(var(--z))"),p(e,"class","svelte-m0dfni")},m(s,t){k(s,e,t),l[5](e)},p(s,[t]){t&1&&p(e,"width",s[0]),t&2&&p(e,"height",s[1])},i:W,o:W,d(s){s&&u(e),l[5](null)}}}const ve=9;function jt(l,e,s){let t,n;_e(l,Ge,y=>s(9,n=y));let{width:r=200}=e,{height:i=400}=e,{amount:o=200}=e,f,a;function c(y,j){t.splice(y,j.length,...j)}function d(y){return t.slice(y,y+ve)}const h=()=>Math.random();function g(){for(let y=0;y<t.length-ve;y+=ve){const j=r/2,E=i-10,z=5+Math.random()*7,C=z/12,U=(h()-.5)*(C*C)*5,H=1+Math.random()*5,F=1+Math.random()*5,Q=Math.random(),B=Math.random()*.1,A=.1+Math.random()*.4;c(y,[j,E,U,z,H,F,Q,B,A])}_||(_=!0,V())}let _=!1;function S(){g()}function V(){if(_)requestAnimationFrame(V);else{a.clearRect(0,0,r,i);return}a.clearRect(0,0,r,i);const y=n.x;n.y;let j=0;for(let E=0;E<o;E++){let[z,C,U,H,F,Q,B,A,R]=d(E*ve);if(z===0)continue;j++;const J=R+B/10%.5;a.fillStyle=`hsl(34, 100%, ${J*100}%, 1)`,a.save(),a.translate(z+F/2,C+Q/2),a.rotate(B),a.fillRect(-F/2,-Q/2,F,Q),a.restore(),z-=U-y,C-=H-.2,H>-2&&(H-=.2),B+=A,C>i&&(z=0),c(E*ve,[z,C,U,H,F,Q,B,A])}_=j>1}gt(()=>{a=f.getContext("2d")});function T(y){ie[y?"unshift":"push"](()=>{f=y,s(2,f)})}return l.$$set=y=>{"width"in y&&s(0,r=y.width),"height"in y&&s(1,i=y.height),"amount"in y&&s(3,o=y.amount)},l.$$.update=()=>{l.$$.dirty&8&&(t=new Array(o*ve).fill(null))},[r,i,f,o,S,T]}class it extends Ee{constructor(e){super();ye(this,e,jt,zt,Ae,{width:0,height:1,amount:3,show:4})}get show(){return this.$$.ctx[4]}}const Rt=l=>({}),ot=l=>({}),Mt=l=>({}),rt=l=>({}),Ft=l=>({}),at=l=>({});function Bt(l){let e,s;return{c(){e=m("p"),s=I("No Frontside")},l(t){e=b(t,"P",{});var n=w(e);s=$(n,"No Frontside"),n.forEach(u)},m(t,n){k(t,e,n),v(e,s)},d(t){t&&u(e)}}}function Wt(l){let e;return{c(){e=m("p")},l(s){e=b(s,"P",{}),w(e).forEach(u)},m(s,t){k(s,e,t)},d(s){s&&u(e)}}}function Ot(l){let e;return{c(){e=m("span")},l(s){e=b(s,"SPAN",{}),w(e).forEach(u)},m(s,t){k(s,e,t)},d(s){s&&u(e)}}}function Ut(l){let e,s,t,n,r,i,o,f,a,c,d,h,g,_,S,V,T,y,j,E,z,C,U,H,F,Q,B,A,R,J,ne,Ve,le,me,Se,Ce,K;function pt(q){l[8](q)}let Me={amount:200};l[1]!==void 0&&(Me.show=l[1]),s=new it({props:Me}),ie.push(()=>he(s,"show",pt));function vt(q){l[9](q)}let Fe={amount:50};l[2]!==void 0&&(Fe.show=l[2]),o=new it({props:Fe}),ie.push(()=>he(o,"show",vt));const Ne=l[7].front,be=$e(Ne,l,l[6],at),L=be||Bt(),Pe=l[7].back,ge=$e(Pe,l,l[6],rt),X=ge||Wt(),De=l[7].info,we=$e(De,l,l[6],ot),Z=we||Ot();return{c(){e=m("div"),t=m("div"),oe(s.$$.fragment),i=P(),f=m("div"),oe(o.$$.fragment),d=P(),h=m("div"),g=m("div"),_=m("span"),S=P(),V=m("span"),T=P(),y=m("span"),j=P(),E=m("span"),z=P(),C=m("div"),U=m("span"),H=P(),F=m("span"),Q=P(),B=m("span"),A=P(),R=m("span"),J=P(),ne=m("div"),L&&L.c(),Ve=P(),le=m("div"),X&&X.c(),Se=P(),Z&&Z.c(),this.h()},l(q){e=b(q,"DIV",{class:!0});var N=w(e);t=b(N,"DIV",{style:!0});var ke=w(t);re(s.$$.fragment,ke),i=D(N),f=b(N,"DIV",{style:!0});var qe=w(f);re(o.$$.fragment,qe),d=D(N),h=b(N,"DIV",{class:!0,style:!0});var ee=w(h);g=b(ee,"DIV",{class:!0});var te=w(g);_=b(te,"SPAN",{class:!0}),w(_).forEach(u),S=D(te),V=b(te,"SPAN",{class:!0}),w(V).forEach(u),T=D(te),y=b(te,"SPAN",{class:!0}),w(y).forEach(u),j=D(te),E=b(te,"SPAN",{class:!0}),w(E).forEach(u),te.forEach(u),z=D(ee),C=b(ee,"DIV",{class:!0});var se=w(C);U=b(se,"SPAN",{class:!0}),w(U).forEach(u),H=D(se),F=b(se,"SPAN",{class:!0}),w(F).forEach(u),Q=D(se),B=b(se,"SPAN",{class:!0}),w(B).forEach(u),A=D(se),R=b(se,"SPAN",{class:!0}),w(R).forEach(u),se.forEach(u),J=D(ee),ne=b(ee,"DIV",{class:!0,id:!0});var Be=w(ne);L&&L.l(Be),Be.forEach(u),Ve=D(ee),le=b(ee,"DIV",{class:!0,id:!0});var We=w(le);X&&X.l(We),We.forEach(u),ee.forEach(u),Se=D(N),Z&&Z.l(N),N.forEach(u),this.h()},h(){ae(t,"display","contents"),ae(t,"--opacity","0.4"),ae(t,"--z",r=l[0]?"-30px":"30px"),ae(f,"display","contents"),ae(f,"--z",c=l[0]?"-70px":"70px"),p(_,"class","corner tr svelte-eeqrwg"),p(V,"class","corner tl svelte-eeqrwg"),p(y,"class","corner br svelte-eeqrwg"),p(E,"class","corner bl svelte-eeqrwg"),p(g,"class","corner-wrapper svelte-eeqrwg"),p(U,"class","corner tr svelte-eeqrwg"),p(F,"class","corner tl svelte-eeqrwg"),p(B,"class","corner br svelte-eeqrwg"),p(R,"class","corner bl svelte-eeqrwg"),p(C,"class","corner-wrapper back svelte-eeqrwg"),p(ne,"class","card-face svelte-eeqrwg"),p(ne,"id","front"),p(le,"class","card-face svelte-eeqrwg"),p(le,"id","back"),p(h,"class","card svelte-eeqrwg"),p(h,"style",me=`
		--x:${l[4].x*l[3]}deg;
		--y:${l[4].y*-l[3]}deg;
		`),p(e,"class","scene svelte-eeqrwg"),G(e,"flipped",l[0])},m(q,N){k(q,e,N),v(e,t),fe(s,t,null),v(e,i),v(e,f),fe(o,f,null),v(e,d),v(e,h),v(h,g),v(g,_),v(g,S),v(g,V),v(g,T),v(g,y),v(g,j),v(g,E),v(h,z),v(h,C),v(C,U),v(C,H),v(C,F),v(C,Q),v(C,B),v(C,A),v(C,R),v(h,J),v(h,ne),L&&L.m(ne,null),v(h,Ve),v(h,le),X&&X.m(le,null),v(e,Se),Z&&Z.m(e,null),K=!0},p(q,[N]){N&1&&r!==(r=q[0]?"-30px":"30px")&&ae(t,"--z",r);const ke={};!n&&N&2&&(n=!0,ke.show=q[1],pe(()=>n=!1)),s.$set(ke),N&1&&c!==(c=q[0]?"-70px":"70px")&&ae(f,"--z",c);const qe={};!a&&N&4&&(a=!0,qe.show=q[2],pe(()=>a=!1)),o.$set(qe),be&&be.p&&(!K||N&64)&&Te(be,Ne,q,q[6],K?je(Ne,q[6],N,Ft):ze(q[6]),at),ge&&ge.p&&(!K||N&64)&&Te(ge,Pe,q,q[6],K?je(Pe,q[6],N,Mt):ze(q[6]),rt),(!K||N&24&&me!==(me=`
		--x:${q[4].x*q[3]}deg;
		--y:${q[4].y*-q[3]}deg;
		`))&&p(h,"style",me),we&&we.p&&(!K||N&64)&&Te(we,De,q,q[6],K?je(De,q[6],N,Rt):ze(q[6]),ot),N&1&&G(e,"flipped",q[0])},i(q){K||(M(s.$$.fragment,q),M(o.$$.fragment,q),M(L,q),M(X,q),M(Z,q),Ce||He(()=>{Ce=wt(e,kt,{}),Ce.start()}),K=!0)},o(q){O(s.$$.fragment,q),O(o.$$.fragment,q),O(L,q),O(X,q),O(Z,q),K=!1},d(q){q&&u(e),ce(s),ce(o),L&&L.d(q),X&&X.d(q),Z&&Z.d(q)}}}function Ht(l,e,s){let t,n;_e(l,Ge,_=>s(4,n=_));let{$$slots:r={},$$scope:i}=e,{flipped:o=!1}=e,f,a,c;const d=()=>{f==null||f(),a==null||a(),c==null||c()};function h(_){f=_,s(1,f)}function g(_){c=_,s(2,c)}return l.$$set=_=>{"flipped"in _&&s(0,o=_.flipped),"$$scope"in _&&s(6,i=_.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&s(3,t=o?1:10)},[o,f,c,t,n,d,i,r,h,g]}class ft extends Ee{constructor(e){super();ye(this,e,Ht,Ut,Ae,{flipped:0,showConfetti:5})}get showConfetti(){return this.$$.ctx[5]}}function Qt(l){let e,s;return{c(){e=m("p"),s=I("Quiz Already started")},l(t){e=b(t,"P",{});var n=w(e);s=$(n,"Quiz Already started"),n.forEach(u)},m(t,n){k(t,e,n),v(e,s)},p:W,i:W,o:W,d(t){t&&u(e)}}}function Jt(l){let e,s;return{c(){e=m("p"),s=I("Results")},l(t){e=b(t,"P",{});var n=w(e);s=$(n,"Results"),n.forEach(u)},m(t,n){k(t,e,n),v(e,s)},p:W,i:W,o:W,d(t){t&&u(e)}}}function Kt(l){let e,s,t;function n(i){l[22](i)}let r={flipped:l[1]!=="closed"&&l[7]&&l[1]!=="voting-open",$$slots:{info:[Gt],back:[Zt],front:[Xt]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.showConfetti=l[0]),e=new ft({props:r}),ie.push(()=>he(e,"showConfetti",n)),{c(){oe(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,o){fe(e,i,o),t=!0},p(i,o){const f={};o&130&&(f.flipped=i[1]!=="closed"&&i[7]&&i[1]!=="voting-open"),o&33554590&&(f.$$scope={dirty:o,ctx:i}),!s&&o&1&&(s=!0,f.showConfetti=i[0],pe(()=>s=!1)),e.$set(f)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){ce(e,i)}}}function Lt(l){let e,s,t;function n(i){l[19](i)}let r={flipped:l[6],$$slots:{info:[ns],back:[ss],front:[es]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.showConfetti=l[0]),e=new ft({props:r}),ie.push(()=>he(e,"showConfetti",n)),{c(){oe(e.$$.fragment)},l(i){re(e.$$.fragment,i)},m(i,o){fe(e,i,o),t=!0},p(i,o){const f={};o&64&&(f.flipped=i[6]),o&33555044&&(f.$$scope={dirty:o,ctx:i}),!s&&o&1&&(s=!0,f.showConfetti=i[0],pe(()=>s=!1)),e.$set(f)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){ce(e,i)}}}function Xt(l){let e,s,t,n,r;function i(a){l[20](a)}function o(a){l[21](a)}let f={question:l[2].activeQuestion};return l[4]!==void 0&&(f.textValue=l[4]),l[3]!==void 0&&(f.questionStore=l[3]),s=new Tt({props:f}),ie.push(()=>he(s,"textValue",i)),ie.push(()=>he(s,"questionStore",o)),s.$on("vote",l[13]),s.$on("answer",l[12]),s.$on("text",l[12]),{c(){e=m("div"),oe(s.$$.fragment),this.h()},l(a){e=b(a,"DIV",{slot:!0,class:!0});var c=w(e);re(s.$$.fragment,c),c.forEach(u),this.h()},h(){p(e,"slot","front"),p(e,"class","svelte-1ek19qe")},m(a,c){k(a,e,c),fe(s,e,null),r=!0},p(a,c){const d={};c&4&&(d.question=a[2].activeQuestion),!t&&c&16&&(t=!0,d.textValue=a[4],pe(()=>t=!1)),!n&&c&8&&(n=!0,d.questionStore=a[3],pe(()=>n=!1)),s.$set(d)},i(a){r||(M(s.$$.fragment,a),r=!0)},o(a){O(s.$$.fragment,a),r=!1},d(a){a&&u(e),ce(s)}}}function ct(l){let e,s;return{c(){e=m("p"),s=I("Vote for the best answer")},l(t){e=b(t,"P",{});var n=w(e);s=$(n,"Vote for the best answer"),n.forEach(u)},m(t,n){k(t,e,n),v(e,s)},d(t){t&&u(e)}}}function Zt(l){let e,s=l[1]==="voting-open"&&ct();return{c(){e=m("div"),s&&s.c(),this.h()},l(t){e=b(t,"DIV",{slot:!0,class:!0});var n=w(e);s&&s.l(n),n.forEach(u),this.h()},h(){p(e,"slot","back"),p(e,"class","svelte-1ek19qe")},m(t,n){k(t,e,n),s&&s.m(e,null)},p(t,n){t[1]==="voting-open"?s||(s=ct(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),s&&s.d()}}}function ut(l){let e,s;return{c(){e=m("p"),s=I("Warte bis die Frage beendet wird.")},l(t){e=b(t,"P",{});var n=w(e);s=$(n,"Warte bis die Frage beendet wird."),n.forEach(u)},m(t,n){k(t,e,n),v(e,s)},d(t){t&&u(e)}}}function Gt(l){let e,s=l[7]&&l[1]!=="closed"&&l[1]!=="voting-open"&&ut();return{c(){e=m("div"),s&&s.c(),this.h()},l(t){e=b(t,"DIV",{slot:!0});var n=w(e);s&&s.l(n),n.forEach(u),this.h()},h(){p(e,"slot","info")},m(t,n){k(t,e,n),s&&s.m(e,null)},p(t,n){t[7]&&t[1]!=="closed"&&t[1]!=="voting-open"?s||(s=ut(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),s&&s.d()}}}function Yt(l){let e,s=l[2].description+"",t,n,r,i=!l[5]&&!l[6]&&_t(l);return{c(){e=m("h2"),t=I(s),n=P(),i&&i.c(),r=ue()},l(o){e=b(o,"H2",{});var f=w(e);t=$(f,s),f.forEach(u),n=D(o),i&&i.l(o),r=ue()},m(o,f){k(o,e,f),v(e,t),k(o,n,f),i&&i.m(o,f),k(o,r,f)},p(o,f){f&4&&s!==(s=o[2].description+"")&&Y(t,s),!o[5]&&!o[6]?i?i.p(o,f):(i=_t(o),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(o){o&&u(e),o&&u(n),i&&i.d(o),o&&u(r)}}}function xt(l){let e,s;return{c(){e=m("a"),s=I("Need to input your name"),this.h()},l(t){e=b(t,"A",{href:!0,class:!0});var n=w(e);s=$(n,"Need to input your name"),n.forEach(u),this.h()},h(){p(e,"href","/"),p(e,"class","svelte-1ek19qe")},m(t,n){k(t,e,n),v(e,s)},p:W,d(t){t&&u(e)}}}function _t(l){let e,s,t,n;return{c(){e=m("button"),s=I("Beitreten")},l(r){e=b(r,"BUTTON",{});var i=w(e);s=$(i,"Beitreten"),i.forEach(u)},m(r,i){k(r,e,i),v(e,s),t||(n=de(e,"click",l[11]),t=!0)},p:W,d(r){r&&u(e),t=!1,n()}}}function es(l){let e,s,t,n;function r(f,a){return!f[9].name||!f[9].house?xt:Yt}let i=r(l),o=i(l);return{c(){e=m("div"),s=m("h1"),t=I("Registration"),n=P(),o.c(),this.h()},l(f){e=b(f,"DIV",{slot:!0,class:!0});var a=w(e);s=b(a,"H1",{});var c=w(s);t=$(c,"Registration"),c.forEach(u),n=D(a),o.l(a),a.forEach(u),this.h()},h(){p(e,"slot","front"),p(e,"class","svelte-1ek19qe")},m(f,a){k(f,e,a),v(e,s),v(s,t),v(e,n),o.m(e,null)},p(f,a){i===(i=r(f))&&o?o.p(f,a):(o.d(1),o=i(f),o&&(o.c(),o.m(e,null)))},d(f){f&&u(e),o.d()}}}function dt(l){let e,s;return e=new At({props:{endsAt:l[2].startsAt,$$slots:{default:[ts,({secondsLeft:t})=>({24:t}),({secondsLeft:t})=>t?16777216:0]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,n){fe(e,t,n),s=!0},p(t,n){const r={};n&4&&(r.endsAt=t[2].startsAt),n&50331648&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(M(e.$$.fragment,t),s=!0)},o(t){O(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function ts(l){let e,s=l[24]+"",t;return{c(){e=m("h1"),t=I(s)},l(n){e=b(n,"H1",{});var r=w(e);t=$(r,s),r.forEach(u)},m(n,r){k(n,e,r),v(e,t)},p(n,r){r&16777216&&s!==(s=n[24]+"")&&Y(t,s)},d(n){n&&u(e)}}}function ss(l){let e,s,t=l[2].startsAt&&dt(l);return{c(){e=m("div"),t&&t.c(),this.h()},l(n){e=b(n,"DIV",{slot:!0,class:!0});var r=w(e);t&&t.l(r),r.forEach(u),this.h()},h(){p(e,"slot","back"),p(e,"class","svelte-1ek19qe")},m(n,r){k(n,e,r),t&&t.m(e,null),s=!0},p(n,r){n[2].startsAt?t?(t.p(n,r),r&4&&M(t,1)):(t=dt(n),t.c(),M(t,1),t.m(e,null)):t&&(Ke(),O(t,1,1,()=>{t=null}),Qe())},i(n){s||(M(t),s=!0)},o(n){O(t),s=!1},d(n){n&&u(e),t&&t.d()}}}function ht(l){let e,s;return{c(){e=m("p"),s=I("Warte bis das Quiz beginnt")},l(t){e=b(t,"P",{});var n=w(e);s=$(n,"Warte bis das Quiz beginnt"),n.forEach(u)},m(t,n){k(t,e,n),v(e,s)},d(t){t&&u(e)}}}function ns(l){let e,s=l[6]&&!l[2].startsAt&&ht();return{c(){e=m("div"),s&&s.c(),this.h()},l(t){e=b(t,"DIV",{slot:!0,id:!0,class:!0});var n=w(e);s&&s.l(n),n.forEach(u),this.h()},h(){p(e,"slot","info"),p(e,"id","registration-success"),p(e,"class","svelte-1ek19qe")},m(t,n){k(t,e,n),s&&s.m(e,null)},p(t,n){t[6]&&!t[2].startsAt?s||(s=ht(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(t){t&&u(e),s&&s.d()}}}function ls(l){let e,s,t,n,r,i,o,f,a,c;const d=[Lt,Kt,Jt,Qt],h=[];function g(_,S){var V,T;return _[8]==="registration"?0:_[8]==="running"&&((T=(V=_[2])==null?void 0:V.activeQuestion)==null?void 0:T.id)&&_[6]?1:_[8]==="results"&&_[6]?2:3}return s=g(l),t=h[s]=d[s](l),i=new Vt({props:{house:l[9].house}}),{c(){e=P(),t.c(),n=P(),r=m("div"),oe(i.$$.fragment),this.h()},l(_){qt('[data-svelte="svelte-aqh7sr"]',document.head).forEach(u),e=D(_),t.l(_),n=D(_),r=b(_,"DIV",{class:!0});var V=w(r);re(i.$$.fragment,V),V.forEach(u),this.h()},h(){document.title="Dungeon Quiz",p(r,"class","crest svelte-1ek19qe")},m(_,S){k(_,e,S),h[s].m(_,S),k(_,n,S),k(_,r,S),fe(i,r,null),f=!0,a||(c=de(window,"keydown",l[14]),a=!0)},p(_,[S]){let V=s;s=g(_),s===V?h[s].p(_,S):(Ke(),O(h[V],1,1,()=>{h[V]=null}),Qe(),t=h[s],t?t.p(_,S):(t=h[s]=d[s](_),t.c()),M(t,1),t.m(n.parentNode,n));const T={};S&512&&(T.house=_[9].house),i.$set(T)},i(_){f||(M(t),M(i.$$.fragment,_),He(()=>{o||(o=Je(r,Le,{duration:5e3},!0)),o.run(1)}),f=!0)},o(_){O(t),O(i.$$.fragment,_),o||(o=Je(r,Le,{duration:5e3},!1)),o.run(0),f=!1},d(_){_&&u(e),h[s].d(_),_&&u(n),_&&u(r),ce(i),_&&o&&o.end(),a=!1,c()}}}function is(l,e,s){let t,n,r,i,o,f,a,c,d=W,h=()=>(d(),d=Oe(V,A=>s(17,c=A)),V),g,_;_e(l,Xe,A=>s(2,a=A)),_e(l,Et,A=>s(9,_=A)),l.$$.on_destroy.push(()=>d());let S,V;const T=Ze("quiz-user-data",{id:"",qid:"",token:""});_e(l,T,A=>s(18,g=A));let y,j=!1;async function E(){if(j||i)return;s(5,j=!0);const R=await(await Re("api/quiz/register",{name:_.name,house:_.house})).json(),J=yt(R.token);x(T,g.token=R.token,g),x(T,g.id=J.id,g),x(T,g.qid=J.qid,g),s(5,j=!1)}async function z({detail:A}){const R=await Re("api/quiz/answer",A,g.token);if(!R.ok)return;const J=await R.json();x(V,c.qid=n.id,c),x(V,c.value=A,c),n.type==="voting"&&J.id&&x(V,c.aid=J.id,c)}async function C({detail:A}){const R=await Re("api/quiz/vote",A,g.token);console.log(await R.json())}function U({key:A}){A==="L"&&console.log(c,a)}function H(A){S=A,s(0,S)}function F(A){y=A,s(4,y)}function Q(A){V=A,h(s(3,V))}function B(A){S=A,s(0,S)}return l.$$.update=()=>{l.$$.dirty&4&&s(8,t=a==null?void 0:a.state),l.$$.dirty&4&&s(15,n=a==null?void 0:a.activeQuestion),l.$$.dirty&32768&&s(1,r=n==null?void 0:n.state),l.$$.dirty&4&&(a==null||a.users),l.$$.dirty&262148&&s(6,i=(g==null?void 0:g.id)&&(g==null?void 0:g.qid)===(a==null?void 0:a.id)),l.$$.dirty&163840&&s(7,o=(n==null?void 0:n.type)==="multiple"?(c==null?void 0:c.qid)===(n==null?void 0:n.id):(c==null?void 0:c.qid)===(n==null?void 0:n.id)&&(c==null?void 0:c.value)),l.$$.dirty&163840&&s(16,f=(n==null?void 0:n.correctAnswer)===(c==null?void 0:c.aid)),l.$$.dirty&65539&&r==="closed"&&f&&setTimeout(()=>{S()},1e3)},[S,r,a,V,y,j,i,o,t,_,T,E,z,C,U,n,f,c,g,H,F,Q,B]}class _s extends Ee{constructor(e){super();ye(this,e,is,ls,Ae,{})}}export{_s as default};
