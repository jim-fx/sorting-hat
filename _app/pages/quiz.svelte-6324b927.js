import{S as qe,i as ye,s as Ae,e as v,t as P,k as C,l as ne,c as b,a as g,g as T,d as u,n as I,b as p,f as w,G as m,h as Y,H as O,a9 as _e,ak as bt,ag as Oe,ao as x,X as Pe,a8 as G,N as de,M as Ue,O as kt,A as gt,Z as oe,_ as he,I as Te,j as re,m as ae,F as fe,o as ue,$ as pe,J as $e,K as ze,L as je,x as M,T as He,W as wt,V as Et,u as U,v as ce,af as qt,w as Qe,U as Je,r as Ke,ae as Le}from"../chunks/vendor-3c54998b.js";import{q as Xe,l as Ze,u as yt}from"../chunks/stores-b0045d4a.js";import{p as Re,d as At}from"../chunks/index-76bbb2a0.js";import{s as Ge}from"../chunks/pointerStore-2d83d93d.js";import{T as Vt}from"../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{C as Dt}from"../chunks/Crest-599c5571.js";function Ye(l,e,t){const s=l.slice();return s[20]=e[t],s[24]=t,s}function xe(l,e,t){const s=l.slice();return s[20]=e[t],s}function et(l,e,t){const s=l.slice();return s[17]=e[t],s}function St(l){let e,t=l[1].answers.sort(it),s=[];for(let n=0;n<t.length;n+=1)s[n]=tt(Ye(l,t,n));return{c(){e=v("div");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var a=g(e);for(let i=0;i<s.length;i+=1)s[i].l(a);a.forEach(u),this.h()},h(){p(e,"class","vote-wrapper svelte-13h57us")},m(n,a){w(n,e,a);for(let i=0;i<s.length;i+=1)s[i].m(e,null)},p(n,a){if(a&258){t=n[1].answers.sort(it);let i;for(i=0;i<t.length;i+=1){const o=Ye(n,t,i);s[i]?s[i].p(o,a):(s[i]=tt(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){n&&u(e),Pe(s,n)}}}function Nt(l){let e,t,s,n,a=l[1].answers,i=[];for(let o=0;o<a.length;o+=1)i[o]=nt(xe(l,a,o));return{c(){e=v("p"),t=P("Vote for the best answer"),s=C(),n=v("div");for(let o=0;o<i.length;o+=1)i[o].c();this.h()},l(o){e=b(o,"P",{class:!0});var f=g(e);t=T(f,"Vote for the best answer"),f.forEach(u),s=I(o),n=b(o,"DIV",{class:!0});var r=g(n);for(let c=0;c<i.length;c+=1)i[c].l(r);r.forEach(u),this.h()},h(){p(e,"class","svelte-13h57us"),p(n,"class","vote-wrapper svelte-13h57us")},m(o,f){w(o,e,f),m(e,t),w(o,s,f),w(o,n,f);for(let r=0;r<i.length;r+=1)i[r].m(n,null)},p(o,f){if(f&150){a=o[1].answers;let r;for(r=0;r<a.length;r+=1){const c=xe(o,a,r);i[r]?i[r].p(c,f):(i[r]=nt(c),i[r].c(),i[r].m(n,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=a.length}},d(o){o&&u(e),o&&u(s),o&&u(n),Pe(i,o)}}}function Ct(l){let e,t,s,n,a,i,o;return{c(){e=v("textarea"),t=C(),s=v("button"),n=P("abschicken"),this.h()},l(f){e=b(f,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,class:!0}),g(e).forEach(u),t=I(f),s=b(f,"BUTTON",{});var r=g(s);n=T(r,"abschicken"),r.forEach(u),this.h()},h(){var f;p(e,"name",""),p(e,"id",""),p(e,"cols","30"),p(e,"rows","10"),p(e,"class","svelte-13h57us"),s.disabled=a=!((f=l[0])==null?void 0:f.length)},m(f,r){w(f,e,r),Ue(e,l[0]),w(f,t,r),w(f,s,r),m(s,n),i||(o=[de(e,"input",l[11]),de(s,"click",l[12])],i=!0)},p(f,r){var c;r&1&&Ue(e,f[0]),r&1&&a!==(a=!((c=f[0])==null?void 0:c.length))&&(s.disabled=a)},d(f){f&&u(e),f&&u(t),f&&u(s),i=!1,kt(o)}}}function It(l){let e,t=l[1].answers,s=[];for(let n=0;n<t.length;n+=1)s[n]=lt(et(l,t,n));return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=ne()},l(n){for(let a=0;a<s.length;a+=1)s[a].l(n);e=ne()},m(n,a){for(let i=0;i<s.length;i+=1)s[i].m(n,a);w(n,e,a)},p(n,a){if(a&50){t=n[1].answers;let i;for(i=0;i<t.length;i+=1){const o=et(n,t,i);s[i]?s[i].p(o,a):(s[i]=lt(o),s[i].c(),s[i].m(e.parentNode,e))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},d(n){Pe(s,n),n&&u(e)}}}function Pt(l){let e,t,s=l[8](l[20].userId)+"",n,a;return{c(){e=v("br"),t=P(`
					(`),n=P(s),a=P(")")},l(i){e=b(i,"BR",{}),t=T(i,`
					(`),n=T(i,s),a=T(i,")")},m(i,o){w(i,e,o),w(i,t,o),w(i,n,o),w(i,a,o)},p(i,o){o&2&&s!==(s=i[8](i[20].userId)+"")&&Y(n,s)},d(i){i&&u(e),i&&u(t),i&&u(n),i&&u(a)}}}function tt(l){let e,t=l[20].votes.length+"",s,n,a,i=l[20].value+"",o,f,r,c=l[24]===0&&Pt(l);return{c(){e=v("p"),s=P(t),n=C(),a=v("p"),o=P(i),f=C(),c&&c.c(),r=C(),this.h()},l(d){e=b(d,"P",{class:!0});var h=g(e);s=T(h,t),h.forEach(u),n=I(d),a=b(d,"P",{class:!0});var k=g(a);o=T(k,i),f=I(k),c&&c.l(k),r=I(k),k.forEach(u),this.h()},h(){p(e,"class","vote-amount svelte-13h57us"),p(a,"class","vote-value svelte-13h57us")},m(d,h){w(d,e,h),m(e,s),w(d,n,h),w(d,a,h),m(a,o),m(a,f),c&&c.m(a,null),m(a,r)},p(d,h){h&2&&t!==(t=d[20].votes.length+"")&&Y(s,t),h&2&&i!==(i=d[20].value+"")&&Y(o,i),d[24]===0&&c.p(d,h)},d(d){d&&u(e),d&&u(n),d&&u(a),c&&c.d()}}}function st(l){let e,t=(l[4].vote!==l[20].id?"\u2610":"\u2612")+"",s,n,a,i=l[20].value+"",o,f,r;function c(){return l[13](l[20])}return{c(){e=v("button"),s=P(t),n=C(),a=v("p"),o=P(i),this.h()},l(d){e=b(d,"BUTTON",{class:!0});var h=g(e);s=T(h,t),h.forEach(u),n=I(d),a=b(d,"P",{class:!0});var k=g(a);o=T(k,i),k.forEach(u),this.h()},h(){p(e,"class","vote-button svelte-13h57us"),G(e,"selected",l[4].vote===l[20].id),p(a,"class","vote-value svelte-13h57us")},m(d,h){w(d,e,h),m(e,s),w(d,n,h),w(d,a,h),m(a,o),f||(r=de(e,"click",c),f=!0)},p(d,h){l=d,h&18&&t!==(t=(l[4].vote!==l[20].id?"\u2610":"\u2612")+"")&&Y(s,t),h&18&&G(e,"selected",l[4].vote===l[20].id),h&2&&i!==(i=l[20].value+"")&&Y(o,i)},d(d){d&&u(e),d&&u(n),d&&u(a),f=!1,r()}}}function nt(l){let e,t=l[20].userId!==l[2].id&&st(l);return{c(){t&&t.c(),e=ne()},l(s){t&&t.l(s),e=ne()},m(s,n){t&&t.m(s,n),w(s,e,n)},p(s,n){s[20].userId!==s[2].id?t?t.p(s,n):(t=st(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&u(e)}}}function lt(l){let e,t=l[17].value+"",s,n,a;function i(){return l[10](l[17])}return{c(){e=v("button"),s=P(t),this.h()},l(o){e=b(o,"BUTTON",{class:!0});var f=g(e);s=T(f,t),f.forEach(u),this.h()},h(){var o,f,r;p(e,"class","answer svelte-13h57us"),G(e,"showAnswer",(o=l[1])==null?void 0:o.correctAnswer),G(e,"correct",l[17].id===((f=l[1])==null?void 0:f.correctAnswer)),G(e,"selected",((r=l[4])==null?void 0:r.aid)===l[17].id)},m(o,f){w(o,e,f),m(e,s),n||(a=de(e,"click",i),n=!0)},p(o,f){var r,c,d;l=o,f&2&&t!==(t=l[17].value+"")&&Y(s,t),f&2&&G(e,"showAnswer",(r=l[1])==null?void 0:r.correctAnswer),f&2&&G(e,"correct",l[17].id===((c=l[1])==null?void 0:c.correctAnswer)),f&18&&G(e,"selected",((d=l[4])==null?void 0:d.aid)===l[17].id)},d(o){o&&u(e),n=!1,a()}}}function Tt(l){let e,t=l[1].description+"",s,n,a;function i(r,c){if(r[1].type==="multiple")return It;if(r[1].state==="open")return Ct;if(r[1].state==="voting-open")return Nt;if(r[1].state==="closed")return St}let o=i(l),f=o&&o(l);return{c(){e=v("p"),s=P(t),n=C(),f&&f.c(),a=ne(),this.h()},l(r){e=b(r,"P",{class:!0});var c=g(e);s=T(c,t),c.forEach(u),n=I(r),f&&f.l(r),a=ne(),this.h()},h(){p(e,"class","description svelte-13h57us")},m(r,c){w(r,e,c),m(e,s),w(r,n,c),f&&f.m(r,c),w(r,a,c)},p(r,[c]){c&2&&t!==(t=r[1].description+"")&&Y(s,t),o===(o=i(r))&&f?f.p(r,c):(f&&f.d(1),f=o&&o(r),f&&(f.c(),f.m(a.parentNode,a)))},i:O,o:O,d(r){r&&u(e),r&&u(n),f&&f.d(r),r&&u(a)}}}const it=(l,e)=>l.votes.length>e.votes.length?-1:1;function $t(l,e,t){let s,n,a=O,i=()=>(a(),a=Oe(d,q=>t(4,n=q)),d),o;_e(l,Xe,q=>t(9,o=q)),l.$$.on_destroy.push(()=>a());const f=bt();let{question:r}=e,{userData:c}=e;const d=Ze("active-question",{qid:"",aid:"",value:"",vote:""});i();let{textValue:h}=e;function k(q){q!==n.qid&&r.state==="open"&&(x(d,n.qid=r.id,n),x(d,n.aid=q,n),f("answer",q))}function _(q){f("text",q)}function S(q){x(d,n.vote=q,n),f("vote",q)}function V(q){const D=s.find(F=>F.id===q);return D?D==null?void 0:D.name:""}const $=q=>k(q.id);function y(){h=this.value,t(0,h)}const z=()=>_(h),j=q=>S(q.id);return l.$$set=q=>{"question"in q&&t(1,r=q.question),"userData"in q&&t(2,c=q.userData),"textValue"in q&&t(0,h=q.textValue)},l.$$.update=()=>{l.$$.dirty&512&&(s=o.users),l.$$.dirty&18&&(r==null||r.correctAnswer,n.aid)},[h,r,c,d,n,k,_,S,V,o,$,y,z,j]}class zt extends qe{constructor(e){super();ye(this,e,$t,Tt,Ae,{question:1,userData:2,questionStore:3,textValue:0})}get questionStore(){return this.$$.ctx[3]}}function jt(l){let e;return{c(){e=v("canvas"),this.h()},l(t){e=b(t,"CANVAS",{width:!0,height:!0,style:!0,class:!0}),g(e).forEach(u),this.h()},h(){p(e,"width",l[0]),p(e,"height",l[1]),p(e,"style","transform: translateZ(var(--z))"),p(e,"class","svelte-m0dfni")},m(t,s){w(t,e,s),l[5](e)},p(t,[s]){s&1&&p(e,"width",t[0]),s&2&&p(e,"height",t[1])},i:O,o:O,d(t){t&&u(e),l[5](null)}}}const me=9;function Rt(l,e,t){let s,n;_e(l,Ge,y=>t(9,n=y));let{width:a=200}=e,{height:i=400}=e,{amount:o=200}=e,f,r;function c(y,z){s.splice(y,z.length,...z)}function d(y){return s.slice(y,y+me)}const h=()=>Math.random();function k(){for(let y=0;y<s.length-me;y+=me){const z=a/2,j=i-10,q=5+Math.random()*7,D=q/12,F=(h()-.5)*(D*D)*5,H=1+Math.random()*5,B=1+Math.random()*5,Q=Math.random(),W=Math.random()*.1,A=.1+Math.random()*.4;c(y,[z,j,F,q,H,B,Q,W,A])}_||(_=!0,V())}let _=!1;function S(){k()}function V(){if(_)requestAnimationFrame(V);else{r.clearRect(0,0,a,i);return}r.clearRect(0,0,a,i);const y=n.x;n.y;let z=0;for(let j=0;j<o;j++){let[q,D,F,H,B,Q,W,A,R]=d(j*me);if(q===0)continue;z++;const J=R+W/10%.5;r.fillStyle=`hsl(34, 100%, ${J*100}%, 1)`,r.save(),r.translate(q+B/2,D+Q/2),r.rotate(W),r.fillRect(-B/2,-Q/2,B,Q),r.restore(),q-=F-y,D-=H-.2,H>-2&&(H-=.2),W+=A,D>i&&(q=0),c(j*me,[q,D,F,H,B,Q,W,A])}_=z>1}gt(()=>{r=f.getContext("2d")});function $(y){oe[y?"unshift":"push"](()=>{f=y,t(2,f)})}return l.$$set=y=>{"width"in y&&t(0,a=y.width),"height"in y&&t(1,i=y.height),"amount"in y&&t(3,o=y.amount)},l.$$.update=()=>{l.$$.dirty&8&&(s=new Array(o*me).fill(null))},[a,i,f,o,S,$]}class ot extends qe{constructor(e){super();ye(this,e,Rt,jt,Ae,{width:0,height:1,amount:3,show:4})}get show(){return this.$$.ctx[4]}}const Mt=l=>({}),rt=l=>({}),Ft=l=>({}),at=l=>({}),Bt=l=>({}),ft=l=>({});function Wt(l){let e,t;return{c(){e=v("p"),t=P("No Frontside")},l(s){e=b(s,"P",{});var n=g(e);t=T(n,"No Frontside"),n.forEach(u)},m(s,n){w(s,e,n),m(e,t)},d(s){s&&u(e)}}}function Ot(l){let e;return{c(){e=v("p")},l(t){e=b(t,"P",{}),g(e).forEach(u)},m(t,s){w(t,e,s)},d(t){t&&u(e)}}}function Ut(l){let e;return{c(){e=v("span")},l(t){e=b(t,"SPAN",{}),g(e).forEach(u)},m(t,s){w(t,e,s)},d(t){t&&u(e)}}}function Ht(l){let e,t,s,n,a,i,o,f,r,c,d,h,k,_,S,V,$,y,z,j,q,D,F,H,B,Q,W,A,R,J,le,Ve,ie,ve,De,Se,K;function mt(E){l[8](E)}let Me={amount:200};l[1]!==void 0&&(Me.show=l[1]),t=new ot({props:Me}),oe.push(()=>he(t,"show",mt));function vt(E){l[9](E)}let Fe={amount:50};l[2]!==void 0&&(Fe.show=l[2]),o=new ot({props:Fe}),oe.push(()=>he(o,"show",vt));const Ne=l[7].front,be=Te(Ne,l,l[6],ft),L=be||Wt(),Ce=l[7].back,ke=Te(Ce,l,l[6],at),X=ke||Ot(),Ie=l[7].info,ge=Te(Ie,l,l[6],rt),Z=ge||Ut();return{c(){e=v("div"),s=v("div"),re(t.$$.fragment),i=C(),f=v("div"),re(o.$$.fragment),d=C(),h=v("div"),k=v("div"),_=v("span"),S=C(),V=v("span"),$=C(),y=v("span"),z=C(),j=v("span"),q=C(),D=v("div"),F=v("span"),H=C(),B=v("span"),Q=C(),W=v("span"),A=C(),R=v("span"),J=C(),le=v("div"),L&&L.c(),Ve=C(),ie=v("div"),X&&X.c(),De=C(),Z&&Z.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var N=g(e);s=b(N,"DIV",{style:!0});var we=g(s);ae(t.$$.fragment,we),i=I(N),f=b(N,"DIV",{style:!0});var Ee=g(f);ae(o.$$.fragment,Ee),d=I(N),h=b(N,"DIV",{class:!0,style:!0});var ee=g(h);k=b(ee,"DIV",{class:!0});var te=g(k);_=b(te,"SPAN",{class:!0}),g(_).forEach(u),S=I(te),V=b(te,"SPAN",{class:!0}),g(V).forEach(u),$=I(te),y=b(te,"SPAN",{class:!0}),g(y).forEach(u),z=I(te),j=b(te,"SPAN",{class:!0}),g(j).forEach(u),te.forEach(u),q=I(ee),D=b(ee,"DIV",{class:!0});var se=g(D);F=b(se,"SPAN",{class:!0}),g(F).forEach(u),H=I(se),B=b(se,"SPAN",{class:!0}),g(B).forEach(u),Q=I(se),W=b(se,"SPAN",{class:!0}),g(W).forEach(u),A=I(se),R=b(se,"SPAN",{class:!0}),g(R).forEach(u),se.forEach(u),J=I(ee),le=b(ee,"DIV",{class:!0,id:!0});var Be=g(le);L&&L.l(Be),Be.forEach(u),Ve=I(ee),ie=b(ee,"DIV",{class:!0,id:!0});var We=g(ie);X&&X.l(We),We.forEach(u),ee.forEach(u),De=I(N),Z&&Z.l(N),N.forEach(u),this.h()},h(){fe(s,"display","contents"),fe(s,"--opacity","0.4"),fe(s,"--z",a=l[0]?"-30px":"30px"),fe(f,"display","contents"),fe(f,"--z",c=l[0]?"-70px":"70px"),p(_,"class","corner tr svelte-1i0ke7m"),p(V,"class","corner tl svelte-1i0ke7m"),p(y,"class","corner br svelte-1i0ke7m"),p(j,"class","corner bl svelte-1i0ke7m"),p(k,"class","corner-wrapper svelte-1i0ke7m"),p(F,"class","corner tr svelte-1i0ke7m"),p(B,"class","corner tl svelte-1i0ke7m"),p(W,"class","corner br svelte-1i0ke7m"),p(R,"class","corner bl svelte-1i0ke7m"),p(D,"class","corner-wrapper back svelte-1i0ke7m"),p(le,"class","card-face svelte-1i0ke7m"),p(le,"id","front"),p(ie,"class","card-face svelte-1i0ke7m"),p(ie,"id","back"),p(h,"class","card svelte-1i0ke7m"),p(h,"style",ve=`
		--x:${l[4].x*l[3]}deg;
		--y:${l[4].y*-l[3]}deg;
		`),p(e,"class","scene svelte-1i0ke7m"),G(e,"flipped",l[0])},m(E,N){w(E,e,N),m(e,s),ue(t,s,null),m(e,i),m(e,f),ue(o,f,null),m(e,d),m(e,h),m(h,k),m(k,_),m(k,S),m(k,V),m(k,$),m(k,y),m(k,z),m(k,j),m(h,q),m(h,D),m(D,F),m(D,H),m(D,B),m(D,Q),m(D,W),m(D,A),m(D,R),m(h,J),m(h,le),L&&L.m(le,null),m(h,Ve),m(h,ie),X&&X.m(ie,null),m(e,De),Z&&Z.m(e,null),K=!0},p(E,[N]){N&1&&a!==(a=E[0]?"-30px":"30px")&&fe(s,"--z",a);const we={};!n&&N&2&&(n=!0,we.show=E[1],pe(()=>n=!1)),t.$set(we),N&1&&c!==(c=E[0]?"-70px":"70px")&&fe(f,"--z",c);const Ee={};!r&&N&4&&(r=!0,Ee.show=E[2],pe(()=>r=!1)),o.$set(Ee),be&&be.p&&(!K||N&64)&&$e(be,Ne,E,E[6],K?je(Ne,E[6],N,Bt):ze(E[6]),ft),ke&&ke.p&&(!K||N&64)&&$e(ke,Ce,E,E[6],K?je(Ce,E[6],N,Ft):ze(E[6]),at),(!K||N&24&&ve!==(ve=`
		--x:${E[4].x*E[3]}deg;
		--y:${E[4].y*-E[3]}deg;
		`))&&p(h,"style",ve),ge&&ge.p&&(!K||N&64)&&$e(ge,Ie,E,E[6],K?je(Ie,E[6],N,Mt):ze(E[6]),rt),N&1&&G(e,"flipped",E[0])},i(E){K||(M(t.$$.fragment,E),M(o.$$.fragment,E),M(L,E),M(X,E),M(Z,E),Se||He(()=>{Se=wt(e,Et,{}),Se.start()}),K=!0)},o(E){U(t.$$.fragment,E),U(o.$$.fragment,E),U(L,E),U(X,E),U(Z,E),K=!1},d(E){E&&u(e),ce(t),ce(o),L&&L.d(E),X&&X.d(E),Z&&Z.d(E)}}}function Qt(l,e,t){let s,n;_e(l,Ge,_=>t(4,n=_));let{$$slots:a={},$$scope:i}=e,{flipped:o=!1}=e,f,r,c;const d=()=>{f==null||f(),r==null||r(),c==null||c()};function h(_){f=_,t(1,f)}function k(_){c=_,t(2,c)}return l.$$set=_=>{"flipped"in _&&t(0,o=_.flipped),"$$scope"in _&&t(6,i=_.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&t(3,s=o?1:10)},[o,f,c,s,n,d,i,a,h,k]}class ut extends qe{constructor(e){super();ye(this,e,Qt,Ht,Ae,{flipped:0,showConfetti:5})}get showConfetti(){return this.$$.ctx[5]}}function Jt(l){let e,t;return{c(){e=v("p"),t=P("Quiz Already started")},l(s){e=b(s,"P",{});var n=g(e);t=T(n,"Quiz Already started"),n.forEach(u)},m(s,n){w(s,e,n),m(e,t)},p:O,i:O,o:O,d(s){s&&u(e)}}}function Kt(l){let e,t;return{c(){e=v("p"),t=P("Results")},l(s){e=b(s,"P",{});var n=g(e);t=T(n,"Results"),n.forEach(u)},m(s,n){w(s,e,n),m(e,t)},p:O,i:O,o:O,d(s){s&&u(e)}}}function Lt(l){let e,t,s;function n(i){l[22](i)}let a={flipped:l[1]!=="closed"&&l[8]&&l[1]!=="voting-open",$$slots:{info:[Yt],back:[Gt],front:[Zt]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.showConfetti=l[0]),e=new ut({props:a}),oe.push(()=>he(e,"showConfetti",n)),{c(){re(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){ue(e,i,o),s=!0},p(i,o){const f={};o&258&&(f.flipped=i[1]!=="closed"&&i[8]&&i[1]!=="voting-open"),o&33554750&&(f.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,f.showConfetti=i[0],pe(()=>t=!1)),e.$set(f)},i(i){s||(M(e.$$.fragment,i),s=!0)},o(i){U(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function Xt(l){let e,t,s;function n(i){l[19](i)}let a={flipped:l[7],$$slots:{info:[ls],back:[ns],front:[ts]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.showConfetti=l[0]),e=new ut({props:a}),oe.push(()=>he(e,"showConfetti",n)),{c(){re(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,o){ue(e,i,o),s=!0},p(i,o){const f={};o&128&&(f.flipped=i[7]),o&33555652&&(f.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,f.showConfetti=i[0],pe(()=>t=!1)),e.$set(f)},i(i){s||(M(e.$$.fragment,i),s=!0)},o(i){U(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function Zt(l){let e,t,s,n,a;function i(r){l[20](r)}function o(r){l[21](r)}let f={userData:l[3],question:l[2].activeQuestion};return l[5]!==void 0&&(f.textValue=l[5]),l[4]!==void 0&&(f.questionStore=l[4]),t=new zt({props:f}),oe.push(()=>he(t,"textValue",i)),oe.push(()=>he(t,"questionStore",o)),t.$on("vote",l[14]),t.$on("answer",l[13]),t.$on("text",l[13]),{c(){e=v("div"),re(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{slot:!0,class:!0});var c=g(e);ae(t.$$.fragment,c),c.forEach(u),this.h()},h(){p(e,"slot","front"),p(e,"class","svelte-1ek19qe")},m(r,c){w(r,e,c),ue(t,e,null),a=!0},p(r,c){const d={};c&8&&(d.userData=r[3]),c&4&&(d.question=r[2].activeQuestion),!s&&c&32&&(s=!0,d.textValue=r[5],pe(()=>s=!1)),!n&&c&16&&(n=!0,d.questionStore=r[4],pe(()=>n=!1)),t.$set(d)},i(r){a||(M(t.$$.fragment,r),a=!0)},o(r){U(t.$$.fragment,r),a=!1},d(r){r&&u(e),ce(t)}}}function ct(l){let e,t;return{c(){e=v("p"),t=P("Vote for the best answer")},l(s){e=b(s,"P",{});var n=g(e);t=T(n,"Vote for the best answer"),n.forEach(u)},m(s,n){w(s,e,n),m(e,t)},d(s){s&&u(e)}}}function Gt(l){let e,t=l[1]==="voting-open"&&ct();return{c(){e=v("div"),t&&t.c(),this.h()},l(s){e=b(s,"DIV",{slot:!0,class:!0});var n=g(e);t&&t.l(n),n.forEach(u),this.h()},h(){p(e,"slot","back"),p(e,"class","svelte-1ek19qe")},m(s,n){w(s,e,n),t&&t.m(e,null)},p(s,n){s[1]==="voting-open"?t||(t=ct(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&u(e),t&&t.d()}}}function _t(l){let e,t;return{c(){e=v("p"),t=P("Warte bis die Frage beendet wird.")},l(s){e=b(s,"P",{});var n=g(e);t=T(n,"Warte bis die Frage beendet wird."),n.forEach(u)},m(s,n){w(s,e,n),m(e,t)},d(s){s&&u(e)}}}function Yt(l){let e,t=l[8]&&l[1]!=="closed"&&l[1]!=="voting-open"&&_t();return{c(){e=v("div"),t&&t.c(),this.h()},l(s){e=b(s,"DIV",{slot:!0});var n=g(e);t&&t.l(n),n.forEach(u),this.h()},h(){p(e,"slot","info")},m(s,n){w(s,e,n),t&&t.m(e,null)},p(s,n){s[8]&&s[1]!=="closed"&&s[1]!=="voting-open"?t||(t=_t(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&u(e),t&&t.d()}}}function xt(l){let e,t=l[2].description+"",s,n,a,i=!l[6]&&!l[7]&&dt(l);return{c(){e=v("h2"),s=P(t),n=C(),i&&i.c(),a=ne()},l(o){e=b(o,"H2",{});var f=g(e);s=T(f,t),f.forEach(u),n=I(o),i&&i.l(o),a=ne()},m(o,f){w(o,e,f),m(e,s),w(o,n,f),i&&i.m(o,f),w(o,a,f)},p(o,f){f&4&&t!==(t=o[2].description+"")&&Y(s,t),!o[6]&&!o[7]?i?i.p(o,f):(i=dt(o),i.c(),i.m(a.parentNode,a)):i&&(i.d(1),i=null)},d(o){o&&u(e),o&&u(n),i&&i.d(o),o&&u(a)}}}function es(l){let e,t;return{c(){e=v("a"),t=P("Need to input your name"),this.h()},l(s){e=b(s,"A",{href:!0,class:!0});var n=g(e);t=T(n,"Need to input your name"),n.forEach(u),this.h()},h(){p(e,"href","/"),p(e,"class","svelte-1ek19qe")},m(s,n){w(s,e,n),m(e,t)},p:O,d(s){s&&u(e)}}}function dt(l){let e,t,s,n;return{c(){e=v("button"),t=P("Beitreten")},l(a){e=b(a,"BUTTON",{});var i=g(e);t=T(i,"Beitreten"),i.forEach(u)},m(a,i){w(a,e,i),m(e,t),s||(n=de(e,"click",l[12]),s=!0)},p:O,d(a){a&&u(e),s=!1,n()}}}function ts(l){let e,t,s,n;function a(f,r){return!f[10].name||!f[10].house?es:xt}let i=a(l),o=i(l);return{c(){e=v("div"),t=v("h1"),s=P("Registration"),n=C(),o.c(),this.h()},l(f){e=b(f,"DIV",{slot:!0,class:!0});var r=g(e);t=b(r,"H1",{});var c=g(t);s=T(c,"Registration"),c.forEach(u),n=I(r),o.l(r),r.forEach(u),this.h()},h(){p(e,"slot","front"),p(e,"class","svelte-1ek19qe")},m(f,r){w(f,e,r),m(e,t),m(t,s),m(e,n),o.m(e,null)},p(f,r){i===(i=a(f))&&o?o.p(f,r):(o.d(1),o=i(f),o&&(o.c(),o.m(e,null)))},d(f){f&&u(e),o.d()}}}function ht(l){let e,t;return e=new Vt({props:{endsAt:l[2].startsAt,$$slots:{default:[ss,({secondsLeft:s})=>({24:s}),({secondsLeft:s})=>s?16777216:0]},$$scope:{ctx:l}}}),{c(){re(e.$$.fragment)},l(s){ae(e.$$.fragment,s)},m(s,n){ue(e,s,n),t=!0},p(s,n){const a={};n&4&&(a.endsAt=s[2].startsAt),n&50331648&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){ce(e,s)}}}function ss(l){let e,t=l[24]+"",s;return{c(){e=v("h1"),s=P(t)},l(n){e=b(n,"H1",{});var a=g(e);s=T(a,t),a.forEach(u)},m(n,a){w(n,e,a),m(e,s)},p(n,a){a&16777216&&t!==(t=n[24]+"")&&Y(s,t)},d(n){n&&u(e)}}}function ns(l){let e,t,s=l[2].startsAt&&ht(l);return{c(){e=v("div"),s&&s.c(),this.h()},l(n){e=b(n,"DIV",{slot:!0,class:!0});var a=g(e);s&&s.l(a),a.forEach(u),this.h()},h(){p(e,"slot","back"),p(e,"class","svelte-1ek19qe")},m(n,a){w(n,e,a),s&&s.m(e,null),t=!0},p(n,a){n[2].startsAt?s?(s.p(n,a),a&4&&M(s,1)):(s=ht(n),s.c(),M(s,1),s.m(e,null)):s&&(Ke(),U(s,1,1,()=>{s=null}),Qe())},i(n){t||(M(s),t=!0)},o(n){U(s),t=!1},d(n){n&&u(e),s&&s.d()}}}function pt(l){let e,t;return{c(){e=v("p"),t=P("Warte bis das Quiz beginnt")},l(s){e=b(s,"P",{});var n=g(e);t=T(n,"Warte bis das Quiz beginnt"),n.forEach(u)},m(s,n){w(s,e,n),m(e,t)},d(s){s&&u(e)}}}function ls(l){let e,t=l[7]&&!l[2].startsAt&&pt();return{c(){e=v("div"),t&&t.c(),this.h()},l(s){e=b(s,"DIV",{slot:!0,id:!0,class:!0});var n=g(e);t&&t.l(n),n.forEach(u),this.h()},h(){p(e,"slot","info"),p(e,"id","registration-success"),p(e,"class","svelte-1ek19qe")},m(s,n){w(s,e,n),t&&t.m(e,null)},p(s,n){s[7]&&!s[2].startsAt?t||(t=pt(),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(s){s&&u(e),t&&t.d()}}}function is(l){let e,t,s,n,a,i,o,f,r,c;const d=[Xt,Lt,Kt,Jt],h=[];function k(_,S){var V,$;return _[9]==="registration"?0:_[9]==="running"&&(($=(V=_[2])==null?void 0:V.activeQuestion)==null?void 0:$.id)&&_[7]?1:_[9]==="results"&&_[7]?2:3}return t=k(l),s=h[t]=d[t](l),i=new Dt({props:{house:l[10].house}}),{c(){e=C(),s.c(),n=C(),a=v("div"),re(i.$$.fragment),this.h()},l(_){qt('[data-svelte="svelte-aqh7sr"]',document.head).forEach(u),e=I(_),s.l(_),n=I(_),a=b(_,"DIV",{class:!0});var V=g(a);ae(i.$$.fragment,V),V.forEach(u),this.h()},h(){document.title="Dungeon Quiz",p(a,"class","crest svelte-1ek19qe")},m(_,S){w(_,e,S),h[t].m(_,S),w(_,n,S),w(_,a,S),ue(i,a,null),f=!0,r||(c=de(window,"keydown",l[15]),r=!0)},p(_,[S]){let V=t;t=k(_),t===V?h[t].p(_,S):(Ke(),U(h[V],1,1,()=>{h[V]=null}),Qe(),s=h[t],s?s.p(_,S):(s=h[t]=d[t](_),s.c()),M(s,1),s.m(n.parentNode,n));const $={};S&1024&&($.house=_[10].house),i.$set($)},i(_){f||(M(s),M(i.$$.fragment,_),He(()=>{o||(o=Je(a,Le,{duration:5e3},!0)),o.run(1)}),f=!0)},o(_){U(s),U(i.$$.fragment,_),o||(o=Je(a,Le,{duration:5e3},!1)),o.run(0),f=!1},d(_){_&&u(e),h[t].d(_),_&&u(n),_&&u(a),ce(i),_&&o&&o.end(),r=!1,c()}}}function os(l,e,t){let s,n,a,i,o,f,r,c,d=O,h=()=>(d(),d=Oe(V,A=>t(18,c=A)),V),k,_;_e(l,Xe,A=>t(2,r=A)),_e(l,yt,A=>t(10,_=A)),l.$$.on_destroy.push(()=>d());let S,V;const $=Ze("quiz-user-data",{id:"",qid:"",token:""});_e(l,$,A=>t(3,k=A));let y,z=!1;async function j(){if(z||i)return;t(6,z=!0);const R=await(await Re("api/quiz/register",{name:_.name,house:_.house})).json(),J=At(R.token);x($,k.token=R.token,k),x($,k.id=J.id,k),x($,k.qid=J.qid,k),t(6,z=!1)}async function q({detail:A}){const R=await Re("api/quiz/answer",A,k.token);if(!R.ok)return;const J=await R.json();x(V,c.qid=n.id,c),x(V,c.value=A,c),n.type==="voting"&&J.id&&x(V,c.aid=J.id,c)}async function D({detail:A}){const R=await Re("api/quiz/vote",A,k.token);console.log(await R.json())}function F({key:A}){A==="L"&&console.log(c,r)}function H(A){S=A,t(0,S)}function B(A){y=A,t(5,y)}function Q(A){V=A,h(t(4,V))}function W(A){S=A,t(0,S)}return l.$$.update=()=>{l.$$.dirty&4&&t(9,s=r==null?void 0:r.state),l.$$.dirty&4&&t(16,n=r==null?void 0:r.activeQuestion),l.$$.dirty&65536&&t(1,a=n==null?void 0:n.state),l.$$.dirty&4&&(r==null||r.users),l.$$.dirty&12&&t(7,i=(k==null?void 0:k.id)&&(k==null?void 0:k.qid)===(r==null?void 0:r.id)),l.$$.dirty&327680&&t(8,o=(n==null?void 0:n.type)==="multiple"?(c==null?void 0:c.qid)===(n==null?void 0:n.id):(c==null?void 0:c.qid)===(n==null?void 0:n.id)&&(c==null?void 0:c.value)),l.$$.dirty&327680&&t(17,f=(n==null?void 0:n.correctAnswer)===(c==null?void 0:c.aid)),l.$$.dirty&131075&&a==="closed"&&f&&setTimeout(()=>{S()},1e3)},[S,a,r,k,V,y,z,i,o,s,_,$,j,q,D,F,n,f,c,H,B,Q,W]}class ds extends qe{constructor(e){super();ye(this,e,os,is,Ae,{})}}export{ds as default};
