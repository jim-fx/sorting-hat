import{S as A,i as R,s as z,e as d,t as h,k as Q,l as m,c as k,a as b,g as v,d as f,n as S,b as w,f as u,G as y,h as D,H as p,al as I,N,am as E,P as U,Z as $,u as j,w as V,x as P,r as C,j as B,m as G,o as W,v as Z}from"../chunks/vendor-1794dca4.js";import{l as J,u as K,q as L}from"../chunks/stores-d2a05d31.js";import{p as O,d as M}from"../chunks/index-ea9e4106.js";function F(a,e,r){const n=a.slice();return n[6]=e[r],n}function X(a){let e,r;return{c(){e=d("p"),r=h("Closed"),this.h()},l(n){e=k(n,"P",{class:!0});var t=b(e);r=v(t,"Closed"),t.forEach(f),this.h()},h(){w(e,"class","svelte-e6j7vk")},m(n,t){u(n,e,t),y(e,r)},p,d(n){n&&f(e)}}}function Y(a){let e,r;return{c(){e=d("p"),r=h("Voting Open"),this.h()},l(n){e=k(n,"P",{class:!0});var t=b(e);r=v(t,"Voting Open"),t.forEach(f),this.h()},h(){w(e,"class","svelte-e6j7vk")},m(n,t){u(n,e,t),y(e,r)},p,d(n){n&&f(e)}}}function x(a){let e;function r(o,s){return o[0].type==="multiple"?te:ee}let n=r(a),t=n(a);return{c(){t.c(),e=m()},l(o){t.l(o),e=m()},m(o,s){t.m(o,s),u(o,e,s)},p(o,s){n===(n=r(o))&&t?t.p(o,s):(t.d(1),t=n(o),t&&(t.c(),t.m(e.parentNode,e)))},d(o){t.d(o),o&&f(e)}}}function ee(a){let e,r;return{c(){e=d("p"),r=h("FreiText QUestion"),this.h()},l(n){e=k(n,"P",{class:!0});var t=b(e);r=v(t,"FreiText QUestion"),t.forEach(f),this.h()},h(){w(e,"class","svelte-e6j7vk")},m(n,t){u(n,e,t),y(e,r)},p,d(n){n&&f(e)}}}function te(a){let e;function r(o,s){return o[1].qid===o[0].id?re:ne}let n=r(a),t=n(a);return{c(){t.c(),e=m()},l(o){t.l(o),e=m()},m(o,s){t.m(o,s),u(o,e,s)},p(o,s){n===(n=r(o))&&t?t.p(o,s):(t.d(1),t=n(o),t&&(t.c(),t.m(e.parentNode,e)))},d(o){t.d(o),o&&f(e)}}}function ne(a){let e,r=a[0].answers,n=[];for(let t=0;t<r.length;t+=1)n[t]=H(F(a,r,t));return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=m()},l(t){for(let o=0;o<n.length;o+=1)n[o].l(t);e=m()},m(t,o){for(let s=0;s<n.length;s+=1)n[s].m(t,o);u(t,e,o)},p(t,o){if(o&9){r=t[0].answers;let s;for(s=0;s<r.length;s+=1){const c=F(t,r,s);n[s]?n[s].p(c,o):(n[s]=H(c),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(t){$(n,t),t&&f(e)}}}function re(a){let e,r;return{c(){e=d("p"),r=h("Already answered"),this.h()},l(n){e=k(n,"P",{class:!0});var t=b(e);r=v(t,"Already answered"),t.forEach(f),this.h()},h(){w(e,"class","svelte-e6j7vk")},m(n,t){u(n,e,t),y(e,r)},p,d(n){n&&f(e)}}}function H(a){let e,r=a[6].value+"",n,t,o;function s(){return a[4](a[6])}return{c(){e=d("p"),n=h(r),this.h()},l(c){e=k(c,"P",{class:!0});var i=b(e);n=v(i,r),i.forEach(f),this.h()},h(){w(e,"class","svelte-e6j7vk")},m(c,i){u(c,e,i),y(e,n),t||(o=U(e,"click",s),t=!0)},p(c,i){a=c,i&1&&r!==(r=a[6].value+"")&&D(n,r)},d(c){c&&f(e),t=!1,o()}}}function ie(a){let e,r=a[0].description+"",n,t,o;function s(l,_){if(l[0].state==="open")return x;if(l[0].state==="voting-open")return Y;if(l[0].state==="closed")return X}let c=s(a),i=c&&c(a);return{c(){e=d("p"),n=h(r),t=Q(),i&&i.c(),o=m(),this.h()},l(l){e=k(l,"P",{class:!0});var _=b(e);n=v(_,r),_.forEach(f),t=S(l),i&&i.l(l),o=m(),this.h()},h(){w(e,"class","svelte-e6j7vk")},m(l,_){u(l,e,_),y(e,n),u(l,t,_),i&&i.m(l,_),u(l,o,_)},p(l,[_]){_&1&&r!==(r=l[0].description+"")&&D(n,r),c===(c=s(l))&&i?i.p(l,_):(i&&i.d(1),i=c&&c(l),i&&(i.c(),i.m(o.parentNode,o)))},i:p,o:p,d(l){l&&f(e),l&&f(t),i&&i.d(l),l&&f(o)}}}function se(a,e,r){let n;const t=I();let{question:o}=e;const s=J("active-question",{qid:"",aid:""});N(a,s,l=>r(1,n=l));function c(l){E(s,n.qid=o.id,n),E(s,n.aid=l,n),console.log("handleAnswer",l),t("answer",l)}const i=l=>c(l.id);return a.$$set=l=>{"question"in l&&r(0,o=l.question)},[o,n,s,c,i]}class oe extends A{constructor(e){super();R(this,e,se,ie,z,{question:0})}}function le(a){let e,r;return{c(){e=d("p"),r=h("Results")},l(n){e=k(n,"P",{});var t=b(e);r=v(t,"Results"),t.forEach(f)},m(n,t){u(n,e,t),y(e,r)},p,i:p,o:p,d(n){n&&f(e)}}}function ce(a){let e,r,n,t;const o=[_e,ue,fe],s=[];function c(i,l){return i[1]==="open"?0:i[1]==="voting-open"?1:i[1]==="closed"?2:-1}return~(e=c(a))&&(r=s[e]=o[e](a)),{c(){r&&r.c(),n=m()},l(i){r&&r.l(i),n=m()},m(i,l){~e&&s[e].m(i,l),u(i,n,l),t=!0},p(i,l){let _=e;e=c(i),e===_?~e&&s[e].p(i,l):(r&&(C(),j(s[_],1,1,()=>{s[_]=null}),V()),~e?(r=s[e],r?r.p(i,l):(r=s[e]=o[e](i),r.c()),P(r,1),r.m(n.parentNode,n)):r=null)},i(i){t||(P(r),t=!0)},o(i){j(r),t=!1},d(i){~e&&s[e].d(i),i&&f(n)}}}function ae(a){let e,r,n,t;function o(i,l){return!i[4].name||!i[4].house?he:i[3].qid!==i[0].id?de:pe}let s=o(a),c=s(a);return{c(){e=d("h1"),r=h("Registration"),n=Q(),c.c(),t=m()},l(i){e=k(i,"H1",{});var l=b(e);r=v(l,"Registration"),l.forEach(f),n=S(i),c.l(i),t=m()},m(i,l){u(i,e,l),y(e,r),u(i,n,l),c.m(i,l),u(i,t,l)},p(i,l){s===(s=o(i))&&c?c.p(i,l):(c.d(1),c=s(i),c&&(c.c(),c.m(t.parentNode,t)))},i:p,o:p,d(i){i&&f(e),i&&f(n),c.d(i),i&&f(t)}}}function fe(a){let e,r;return{c(){e=d("p"),r=h("These are the results")},l(n){e=k(n,"P",{});var t=b(e);r=v(t,"These are the results"),t.forEach(f)},m(n,t){u(n,e,t),y(e,r)},p,i:p,o:p,d(n){n&&f(e)}}}function ue(a){let e,r;return{c(){e=d("p"),r=h("Vote for the best answer")},l(n){e=k(n,"P",{});var t=b(e);r=v(t,"Vote for the best answer"),t.forEach(f)},m(n,t){u(n,e,t),y(e,r)},p,i:p,o:p,d(n){n&&f(e)}}}function _e(a){let e,r,n,t,o;return t=new oe({props:{question:a[0].activeQuestion}}),t.$on("answer",a[7]),{c(){e=d("p"),r=h("Input your answer"),n=Q(),B(t.$$.fragment)},l(s){e=k(s,"P",{});var c=b(e);r=v(c,"Input your answer"),c.forEach(f),n=S(s),G(t.$$.fragment,s)},m(s,c){u(s,e,c),y(e,r),u(s,n,c),W(t,s,c),o=!0},p(s,c){const i={};c&1&&(i.question=s[0].activeQuestion),t.$set(i)},i(s){o||(P(t.$$.fragment,s),o=!0)},o(s){j(t.$$.fragment,s),o=!1},d(s){s&&f(e),s&&f(n),Z(t,s)}}}function pe(a){let e,r;return{c(){e=d("p"),r=h("Registered")},l(n){e=k(n,"P",{});var t=b(e);r=v(t,"Registered"),t.forEach(f)},m(n,t){u(n,e,t),y(e,r)},p,d(n){n&&f(e)}}}function de(a){let e,r,n,t;return{c(){e=d("button"),r=h("Join the quiz")},l(o){e=k(o,"BUTTON",{});var s=b(e);r=v(s,"Join the quiz"),s.forEach(f)},m(o,s){u(o,e,s),y(e,r),n||(t=U(e,"click",a[6]),n=!0)},p,d(o){o&&f(e),n=!1,t()}}}function he(a){let e,r;return{c(){e=d("a"),r=h("Need to input your name"),this.h()},l(n){e=k(n,"A",{href:!0});var t=b(e);r=v(t,"Need to input your name"),t.forEach(f),this.h()},h(){w(e,"href","/")},m(n,t){u(n,e,t),y(e,r)},p,d(n){n&&f(e)}}}function me(a){let e,r,n,t;const o=[ae,ce,le],s=[];function c(i,l){return i[2]==="registration"?0:i[2]==="running"?1:i[2]==="results"?2:-1}return~(e=c(a))&&(r=s[e]=o[e](a)),{c(){r&&r.c(),n=m()},l(i){r&&r.l(i),n=m()},m(i,l){~e&&s[e].m(i,l),u(i,n,l),t=!0},p(i,[l]){let _=e;e=c(i),e===_?~e&&s[e].p(i,l):(r&&(C(),j(s[_],1,1,()=>{s[_]=null}),V()),~e?(r=s[e],r?r.p(i,l):(r=s[e]=o[e](i),r.c()),P(r,1),r.m(n.parentNode,n)):r=null)},i(i){t||(P(r),t=!0)},o(i){j(r),t=!1},d(i){~e&&s[e].d(i),i&&f(n)}}}function ke(a,e,r){let n,t,o,s,c;N(a,K,q=>r(4,s=q)),N(a,L,q=>r(0,c=q));const i=J("quiz-user-data",{id:"",qid:"",token:""});N(a,i,q=>r(3,o=q));async function l(){const g=await(await O("api/quiz/register",{name:s.name,house:s.house})).json(),T=M(g.token);E(i,o.token=g.token,o),E(i,o.id=T.id,o),E(i,o.qid=T.qid,o)}async function _({detail:q}){await O("api/quiz/answer",q,o.token)}return a.$$.update=()=>{var q;a.$$.dirty&1&&r(2,n=c==null?void 0:c.state),a.$$.dirty&1&&r(1,t=(q=c==null?void 0:c.activeQuestion)==null?void 0:q.state),a.$$.dirty&1&&(c==null||c.users)},[c,t,n,o,s,i,l,_]}class qe extends A{constructor(e){super();R(this,e,ke,me,z,{})}}export{qe as default};
