var it=Object.defineProperty;var ke=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var pe=(s,e,n)=>e in s?it(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,ye=(s,e)=>{for(var n in e||(e={}))st.call(e,n)&&pe(s,n,e[n]);if(ke)for(var n of ke(e))at.call(e,n)&&pe(s,n,e[n]);return s};var R=(s,e,n)=>(pe(s,typeof e!="symbol"?e+"":e,n),n);import{S as U,i as q,s as P,e as w,c as v,a as z,d as _,b as E,f as g,H as k,t as I,k as F,g as L,n as H,G as x,M as Ee,N as j,O as Ae,h as me,P as lt,l as O,Q as ot,x as T,u as D,A as le,R as Y,T as oe,U as Te,V as re,W as rt,X as J,Y as ge,j as X,m as ce,F as Z,o as ee,Z as xe,v as te,C as Me,_ as ct,$ as ut,a0 as ft,a1 as dt,a2 as ht,a3 as _t,a4 as ze,a5 as pt,a6 as ue,a7 as fe,a8 as Se,a9 as K,aa as Re,ab as Ne,ac as be,ad as mt,ae as Ie,af as gt,w as ne,ag as bt,r as ie,ah as wt}from"../chunks/vendor-4d1406ba.js";import{g as vt,p as kt}from"../chunks/index-d0b67739.js";import{S as yt}from"../chunks/SelectHouse-4a1e6d6c.js";import{f as Le,u as G,e as de,q as Et}from"../chunks/index-5d576dff.js";import{f as At,b as Tt,a as xt,l as V,c as Mt}from"../chunks/helpers-ce805da6.js";/* empty css                                                      */function zt(s){let e,n,t,i,a,l,r,o,u,h,d;return{c(){e=w("p"),n=I("Ganzen Namen eingeben:"),t=F(),i=w("input"),a=F(),l=w("br"),r=F(),o=w("button"),u=I("fertig"),this.h()},l(c){e=v(c,"P",{});var f=z(e);n=L(f,"Ganzen Namen eingeben:"),f.forEach(_),t=H(c),i=v(c,"INPUT",{placeholder:!0,type:!0}),a=H(c),l=v(c,"BR",{}),r=H(c),o=v(c,"BUTTON",{});var p=z(o);u=L(p,"fertig"),p.forEach(_),this.h()},h(){E(i,"placeholder","Namen..."),E(i,"type","text")},m(c,f){g(c,e,f),x(e,n),g(c,t,f),g(c,i,f),Ee(i,s[1]),g(c,a,f),g(c,l,f),g(c,r,f),g(c,o,f),x(o,u),h||(d=[j(i,"input",s[6]),j(i,"keydown",s[3]),j(o,"click",s[7])],h=!0)},p(c,f){f&2&&i.value!==c[1]&&Ee(i,c[1])},d(c){c&&_(e),c&&_(t),c&&_(i),c&&_(a),c&&_(l),c&&_(r),c&&_(o),h=!1,Ae(d)}}}function St(s){let e,n,t,i,a,l,r,o,u,h,d,c,f,p,m,b;return{c(){e=w("p"),n=I("Alles klar, "),t=w("b"),i=I(s[1]),a=I(", ist das der richtige Name?"),l=F(),r=w("br"),o=F(),u=w("div"),h=w("button"),d=I("Ja"),c=F(),f=w("button"),p=I("Nein")},l(A){e=v(A,"P",{});var y=z(e);n=L(y,"Alles klar, "),t=v(y,"B",{});var $=z(t);i=L($,s[1]),$.forEach(_),a=L(y,", ist das der richtige Name?"),y.forEach(_),l=H(A),r=v(A,"BR",{}),o=H(A),u=v(A,"DIV",{});var C=z(u);h=v(C,"BUTTON",{});var N=z(h);d=L(N,"Ja"),N.forEach(_),c=H(C),f=v(C,"BUTTON",{});var S=z(f);p=L(S,"Nein"),S.forEach(_),C.forEach(_)},m(A,y){g(A,e,y),x(e,n),x(e,t),x(t,i),x(e,a),g(A,l,y),g(A,r,y),g(A,o,y),g(A,u,y),x(u,h),x(h,d),x(u,c),x(u,f),x(f,p),m||(b=[j(h,"click",s[4]),j(f,"click",s[5])],m=!0)},p(A,y){y&2&&me(i,A[1])},d(A){A&&_(e),A&&_(l),A&&_(r),A&&_(o),A&&_(u),m=!1,Ae(b)}}}function Rt(s){let e;function n(a,l){return a[2]?St:zt}let t=n(s),i=t(s);return{c(){e=w("div"),i.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var l=z(e);i.l(l),l.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-1terpu9")},m(a,l){g(a,e,l),i.m(e,null)},p(a,[l]){t===(t=n(a))&&i?i.p(a,l):(i.d(1),i=t(a),i&&(i.c(),i.m(e,null)))},i:k,o:k,d(a){a&&_(e),i.d()}}}function Nt(s,e,n){let{callback:t}=e,i,a=!1;function l({key:d}){d==="Enter"&&n(2,a=!0)}const r=()=>t(i),o=()=>{n(2,a=!1)};function u(){i=this.value,n(1,i)}const h=()=>{n(2,a=!0)};return s.$$set=d=>{"callback"in d&&n(0,t=d.callback)},[t,i,a,l,r,o,u,h]}class It extends U{constructor(e){super();q(this,e,Nt,Rt,P,{callback:0})}}function Lt(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function Dt(s){let e,n=s[6]+"",t,i,a,l,r,o,u,h,d,c,f;function p(){return s[3](s[6])}return{c(){e=w("h1"),t=I(n),i=F(),a=w("img"),o=F(),u=w("button"),h=I("Okay"),this.h()},l(m){e=v(m,"H1",{class:!0});var b=z(e);t=L(b,n),b.forEach(_),i=H(m),a=v(m,"IMG",{src:!0,alt:!0,class:!0}),o=H(m),u=v(m,"BUTTON",{});var A=z(u);h=L(A,"Okay"),A.forEach(_),this.h()},h(){E(e,"class","svelte-16th1rs"),Y(a.src,l="icons/"+s[6]+".svg")||E(a,"src",l),E(a,"alt","crest of house "+s[1]),E(a,"class","svelte-16th1rs")},m(m,b){g(m,e,b),x(e,t),g(m,i,b),g(m,a,b),g(m,o,b),g(m,u,b),x(u,h),d=!0,c||(f=j(u,"click",p),c=!0)},p(m,b){s=m},i(m){d||(oe(()=>{r||(r=Te(a,re,{},!0)),r.run(1)}),d=!0)},o(m){r||(r=Te(a,re,{},!1)),r.run(0),d=!1},d(m){m&&_(e),m&&_(i),m&&_(a),m&&r&&r.end(),m&&_(o),m&&_(u),c=!1,f()}}}function Ft(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function Ht(s){let e,n,t={ctx:s,current:null,token:null,hasCatch:!1,pending:Ft,then:Dt,catch:Lt,value:6,blocks:[,,,]};return lt(s[1],t),{c(){e=O(),t.block.c()},l(i){e=O(),t.block.l(i)},m(i,a){g(i,e,a),t.block.m(i,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(i,[a]){s=i,ot(t,s,a)},i(i){n||(T(t.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const l=t.blocks[a];D(l)}n=!1},d(i){i&&_(e),t.block.d(i),t.token=null,t=null}}}function Ct(s,e,n){const t=!1,i=["ravenclaw","gryffindor","slytherin","hufflepuff"];async function a(){const u=await(await vt("api/houses")).text();return u.length>20?i[Math.floor(Math.random()*i.length)]:u}let l=a(),{callback:r}=e;le(async()=>{const u=await l,h=new Audio("audio/"+u+".mp3");h.play();const d=new Audio("audio/cheers.mp3"),c=setInterval(()=>{h.currentTime/h.duration>.2&&d.paused&&(d.play(),clearInterval(c))},50);h.addEventListener("progress",()=>{})});const o=u=>r(u);return s.$$set=u=>{"callback"in u&&n(0,r=u.callback)},[r,l,t,o]}class Ot extends U{constructor(e){super();q(this,e,Ct,Ht,P,{showText:2,callback:0})}get showText(){return this.$$.ctx[2]}}function Bt(s){let e,n,t,i,a,l,r,o,u,h,d;function c(p){s[3](p)}let f={max:10,pips:!0,id:"range-slider",all:"label"};return s[1]!==void 0&&(f.values=s[1]),t=new rt({props:f}),J.push(()=>ge(t,"values",c)),{c(){e=w("div"),n=w("div"),i=w("div"),X(t.$$.fragment),l=F(),r=w("button"),o=I("Okay"),this.h()},l(p){e=v(p,"DIV",{class:!0});var m=z(e);n=v(m,"DIV",{class:!0});var b=z(n);i=v(b,"DIV",{style:!0});var A=z(i);ce(t.$$.fragment,A),b.forEach(_),l=H(m),r=v(m,"BUTTON",{});var y=z(r);o=L(y,"Okay"),y.forEach(_),m.forEach(_),this.h()},h(){Z(i,"display","contents"),Z(i,"--handle-focus","white"),Z(i,"--range-slider","black"),Z(i,"--range-handle","black"),Z(i,"--range-float-text","white"),E(n,"class","range-wrapper svelte-1ni4obk"),E(e,"class","wrapper svelte-1ni4obk")},m(p,m){g(p,e,m),x(e,n),x(n,i),ee(t,i,null),x(e,l),x(e,r),x(r,o),u=!0,h||(d=j(r,"click",s[4]),h=!0)},p(p,[m]){const b={};!a&&m&2&&(a=!0,b.values=p[1],xe(()=>a=!1)),t.$set(b)},i(p){u||(T(t.$$.fragment,p),u=!0)},o(p){D(t.$$.fragment,p),u=!1},d(p){p&&_(e),te(t),h=!1,d()}}}function $t(s,e,n){let{callback:t}=e;const i=!0;let a=[5];function l(o){a=o,n(1,a)}const r=()=>t(a[0]);return s.$$set=o=>{"callback"in o&&n(0,t=o.callback)},[t,a,i,l,r]}class jt extends U{constructor(e){super();q(this,e,$t,Bt,P,{callback:0,showText:2})}get showText(){return this.$$.ctx[2]}}function Vt(s){let e,n,t,i,a,l;return{c(){e=w("video"),n=w("source"),i=w("source"),l=w("track"),this.h()},l(r){e=v(r,"VIDEO",{width:!0,height:!0,class:!0});var o=z(e);n=v(o,"SOURCE",{src:!0,type:!0}),i=v(o,"SOURCE",{src:!0,type:!0}),l=v(o,"TRACK",{kind:!0}),o.forEach(_),this.h()},h(){Y(n.src,t=""+(s[0]+"video/video.webm"))||E(n,"src",t),E(n,"type","video/webm"),Y(i.src,a=""+(s[0]+"video/video.mp4"))||E(i,"src",a),E(i,"type","video/mp4"),E(l,"kind","captions"),E(e,"width","500"),E(e,"height","281"),e.controls=!0,e.autoplay=!0,E(e,"class","svelte-k2j555")},m(r,o){g(r,e,o),x(e,n),x(e,i),x(e,l)},p(r,[o]){o&1&&!Y(n.src,t=""+(r[0]+"video/video.webm"))&&E(n,"src",t),o&1&&!Y(i.src,a=""+(r[0]+"video/video.mp4"))&&E(i,"src",a)},i:k,o:k,d(r){r&&_(e)}}}function Ut(s,e,n){const t=!1;let i="";return le(()=>{n(0,i=window.location.pathname)}),[i,t]}class qt extends U{constructor(e){super();q(this,e,Ut,Vt,P,{showText:1})}get showText(){return this.$$.ctx[1]}}const De=Me(),he=class{constructor({audioFile:e,element:n,text:t}){R(this,"audio");R(this,"text");R(this,"duration",5);R(this,"isLast",!0);R(this,"state",Me("suspended"));R(this,"nextActions",[]);R(this,"data");R(this,"element");R(this,"events",{});this.text=t,this.element=n,e&&(this.audio=new Audio("audio/"+e))}async start(){if(this.setActive(),await ct(),this.emit("start"),this.audio){this.duration=this.audio.duration,this.state.set("running"),this.audio.play(),he.anim.params.wiggleMouth=1;const e=setInterval(()=>{this.emit("progress",this.audio.currentTime/this.audio.duration)},200);this.audio.addEventListener("ended",()=>{clearInterval(e),setTimeout(()=>{this.speechEnded()},500)},{once:!0})}else this.duration=5,this.text&&(this.duration=Math.max(this.text.split(" ").length*.08,2),console.log(this.duration)),this.state.set("running"),setTimeout(()=>{this.speechEnded()},this.duration*1e3)}speechEnded(){this.emit("speech-ended"),he.anim.params.wiggleMouth=0,this.element?this.state.set("input"):this.finish()}handleElementCallback(e){console.log("Got Data: ",e),this.data=e,this.emit("data",e),this.finish()}finish(){this.state.set("finished"),this.emit("end"),console.log("Finished",this.nextActions),this.nextActions.length===1&&!("name"in this.nextActions[0])&&this.nextActions[0].action.start(),this.nextActions.length||Le.set(!0)}emit(e,n){e in this.events&&this.events[e].forEach(t=>t(n))}addEventListener(e,n){return this.events[e]=e in this.events?[...this.events[e],n]:[n],()=>{this.events[e]=this.events[e].filter(t=>t!==n)}}setActive(){De.set(this)}addAction(e,n){this.isLast=!1,typeof e!="string"?this.nextActions.push({action:e}):this.nextActions.push({name:e,action:n})}};let B=he;R(B,"anim");function Pt(s){B.anim=s;const e=new B({audioFile:"teilnehmen.mp3",text:"So so, du willst also an der Silvesterparty im Dungeon teilnehmen?"});e.addEventListener("start",()=>{s.params.wiggleMouth=1}),e.addEventListener("end",()=>{s.params.wiggleMouth=0,s.params.wiggleEyes=1});const n=new B({audioFile:"namen.mp3",text:"Sehr sch\xF6n, verstanden, jetzt br\xE4uchte ich noch deinen Namen?",element:It});n.addEventListener("data",d=>{console.log("Got Name",d),G.update(c=>(c.name=d,c))});const t=new B({audioFile:"unterhaltung.mp3",text:"Das ist nat\xFCrlich auch in Ordnung, damit du aber trotzdem nicht leer ausgehst habe ich hier etwas Unterhaltung f\xFCr dich:",element:qt}),i=new B({audioFile:"exzellenter_gast.mp3",text:"Naja, okay, wenn das sooo ist? Dann werden wir mal schauen... Verstanden, du siehst wie ein exzellenter Gast aus."}),a=new B({audioFile:"welches_haus.mp3",text:"Weisst du den schon zu welchem der vier H\xE4user du geh\xF6rst?"});a.addEventListener("data",d=>{G.update(c=>(c.house=d,c))});const l=new B({audioFile:"random_haus.mp3",text:"Okay, um das herauszufinden bin ich ja hier. Dann werde ich mal  schauen, hmm, ich sehe Mut, aber auch Intelligenz, oh, und hier ist auch noch Empathie. Schwierige Entscheidung, aber ich denke:",element:Ot});l.addEventListener("start",()=>{s.params.wiggleMouth=1}),l.addEventListener("progress",d=>{d>.34&&(s.params.wiggleRim=2,s.params.wiggleHat=2,s.params.wiggleEyes=1)}),l.addEventListener("speech-ended",()=>{s.params.wiggleMouth=0,s.params.wiggleHat=.2,s.params.wiggleEyes=0,s.params.wiggleRim=.2}),l.addEventListener("data",d=>{G.update(c=>(c.house=d,c))});const r=new B({text:"W\xE4hle nun dein Haus aus:",element:yt});r.addEventListener("data",d=>{G.update(c=>(c.house=d,c))});const o=new B({audioFile:"sicherheit.mp3",text:"Nun zu letzten Frage, auf einer Skala von 0 bis 10, wie sicher k\xF6nnen wir mit deinem Erscheinen rechnen?",element:jt});o.addEventListener("data",d=>{G.update(c=>(c.confidence=d/10,kt("api",c),c))});const u=new B({audioFile:"final.mp3",text:"So, das war auch schon alles. Wir freuen uns, dich am 31.12 willkommen zu hei\xDFen, und w\xFCnschen dir bis dahin eine sch\xF6ne Weihnachtszeit."});e.addAction("Auf jeden Fall!",n),e.addAction("Ne, eher nicht",t),n.addAction(i),i.addAction(a),a.addAction("Aber nat\xFCrlich!",r),a.addAction("Nein, dass wei\xDF ich noch nicht...",l),l.addAction(o),r.addAction(o),o.addAction(u);const h=ut(G);return h.name&&h.house&&"confidence"in h?u:e}class Gt{constructor({scene:e,camera:n,renderer:t}){R(this,"boneArray",[]);R(this,"_bones",{circleArray:[],spineArray:[],mouthArray:[]});R(this,"bones",{});R(this,"loaded",!1);R(this,"controls");R(this,"conf",{wiggleRim:.05,wiggleHat:.05,wiggleMouth:.05,wiggleEyes:.05});R(this,"confKeys",[]);R(this,"params");this.controls=new ft(n,t.domElement),e.add(this.controls),this.params=ye({},this.conf),this.confKeys=Object.keys(this.conf),this.setActiveBone=this.setActiveBone.bind(this)}setActiveBone(e){const n=this.boneArray.find(t=>t.userData.name===e);this.controls.attach(n)}setSkeleton(e){!e||(this.boneArray=At(e),this._bones=Tt(this.boneArray),this.bones=xt(this._bones),this.loaded=!!this.boneArray.length)}update(e){if(!this.loaded)return;const{bones:n,conf:t,confKeys:i,params:a}=this;if(i.forEach(l=>{a[l]!==t[l]&&(t[l]=V(a[l],t[l],.05))}),t.wiggleRim&&n.circleArray.forEach((l,r)=>{l.position.y=Math.sin(e/300+r*2)/100*t.wiggleRim}),t.wiggleHat&&n.spineArray.forEach((l,r)=>{l.rotation.x=Math.sin(e/300+r*2)/100*t.wiggleHat,l.rotation.y=Math.sin(e/300+r*1)/100*t.wiggleHat,l.rotation.z=Math.sin(e/300+r*0)/100*t.wiggleHat}),t.wiggleMouth&&(n.mouth.r1.scale.x=Math.sin(e/100+10)/10*t.wiggleMouth,n.mouth.l2.scale.x=Math.sin(e/100+5)/10*t.wiggleMouth,n.mouth.l1.scale.x=Math.sin(e/100+1)/4*t.wiggleMouth-.2,n.mouth.r2.scale.x=Math.sin(e/100+2)/4*t.wiggleMouth-.2,n.mouth.l1.position.y=Math.sin(e/100)/300*t.wiggleMouth-.01,n.mouth.r1.position.y=Math.sin(e/100)/300*t.wiggleMouth-.01),t.wiggleEyes){const l=e/400;n.eyes.l1.scale.x=Math.sin(l+1)/4*t.wiggleEyes-.2,n.eyes.r2.scale.x=Math.sin(l+2)/4*t.wiggleEyes-.2,n.eyes.l1.position.y=Math.sin(l)/300*t.wiggleEyes+.01,n.eyes.r1.position.y=Math.sin(e/200)/300*t.wiggleEyes+.01}Mt(this.bones)}}const Fe=new dt,Wt=new ht,He=new _t;He.setDecoderPath("draco/");Fe.setDRACOLoader(He);function Qt(s){return Wt.load(s)}function Ce(s,e){return Fe.loadAsync(s,e)}async function Kt(){const s=Qt("textures/SortingHat_col.jpg");s.flipY=!1;const e=new ze({map:s}),n=await Ce("sorting_hat.glb",i=>{console.log(i.loaded/i.total*100+"% loaded")}),t=n.scene.children[0].children[1];return t.material=e,n}function Oe(s){return new Promise((e,n)=>{const t=new Image;t.src=s,t.onerror=i=>n(i),t.onload=()=>e(t)})}async function Yt(s,e){const n=new FontFace(s,`url(${e})`);return await n.loaded,n}async function Jt({name:s="",house:e=""}={}){const n=document.createElement("canvas");n.width=512,n.height=512;const t=n.getContext("2d"),i=new pt(n);i.flipY=!1;function a(){t.textAlign="center",t.font="10px Chantelli",t.fillText("Herzlich Willkommen",325,390),t.font="15px Chantelli bold",t.fillText(s,325,420),i.needsUpdate=!0}Yt("Chantelli","fonts/Chantelli_Antiqua-webfont.woff").then(()=>a()),Oe("textures/book_col.jpg").then(async u=>{t.drawImage(u,0,0,512,512),a();const h=await Oe(`icons/${e}.svg`);t.drawImage(h,270,240,120,120),a()});const l=new ze({map:i}),r=await Ce("book.glb",u=>{console.log(u.loaded/u.total*100+"% loaded")}),o=r.scene.children[0].children[1];return o.material=l,r}var Be={loadHat:Kt,loadBook:Jt};function Xt(s){let e,n;return{c(){e=w("canvas"),this.h()},l(t){e=v(t,"CANVAS",{style:!0,class:!0}),z(e).forEach(_),this.h()},h(){E(e,"style",n=`visibility:${s[1]!=="loading"?"visible":"hidden"}`),E(e,"class","svelte-rl5rk3"),ue(e,"loaded",s[1]!=="loading")},m(t,i){g(t,e,i),s[2](e)},p(t,[i]){i&2&&n!==(n=`visibility:${t[1]!=="loading"?"visible":"hidden"}`)&&E(e,"style",n),i&2&&ue(e,"loaded",t[1]!=="loading")},i:k,o:k,d(t){t&&_(e),s[2](null)}}}const we=500;function $e(s){return s<.5?16*s*s*s*s*s:1-Math.pow(-2*s+2,5)/2}function Zt(s,e,n){let t;fe(s,G,y=>n(8,t=y));let i;const a=new Se,l=new K(12626431,.8);l.position.set(2.5,2.5,2),a.add(l);const r=new K(16765393,.8);r.position.set(-2.5,2.5,2),a.add(r);const o=new K(16777215,1);o.position.set(1,1,-1.5),a.add(o);const u=we;let h=0,d=0,c="loading";const f=new Re(50,we/u,.1,1e3);f.position.set(-.2,.8,-.1);const p={};async function m(){const y=await Be.loadBook(t);y.scene.children[0].children[1].skeleton.bones.forEach(C=>{p[C.userData.name]=C}),p.Left.rotation.z=0,p.Left.position.x=-.02,p.Right.rotation.z=0,p.Right.position.x=.02,p.Root.rotation.z=-1.5-Math.PI*2,a.add(y.scene.children[0]),setTimeout(()=>{n(1,c="rotating")},500)}let b=0;le(()=>{m();const y=new Ne({canvas:i,alpha:!0});y.setSize(we,u);function $(N){switch(requestAnimationFrame($),h=V(de.x/-5,h,.1),d=V(de.y/-5,d,.1)+.03,f.position.x=h,f.position.z=d,f.lookAt(0,0,0),c){case"rotating":b++;const S=$e(b/120);p.Root.rotation.z=V(-1.5-Math.PI*2,0,1-S),b>120&&(b=0,n(1,c="opening"));break;case"opening":b++;const W=$e(b/120);p.Left.rotation.z=V(1.67,0,W),p.Left.position.x=V(-.05,-.02,W),p.Right.rotation.z=V(-1.67,0,W),p.Right.position.x=V(.05,.02,W),b>120&&n(1,c="opened");break}C()}function C(){y.render(a,f)}$()});function A(y){J[y?"unshift":"push"](()=>{i=y,n(0,i)})}return[i,c,A]}class en extends U{constructor(e){super();q(this,e,Zt,Xt,P,{})}}function je(s,e,n){const t=s.slice();return t[5]=e[n],t[7]=n,t}function Ve(s){let e,n=s[0],t=[];for(let i=0;i<n.length;i+=1)t[i]=Ue(je(s,n,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=O()},l(i){for(let a=0;a<t.length;a+=1)t[a].l(i);e=O()},m(i,a){for(let l=0;l<t.length;l+=1)t[l].m(i,a);g(i,e,a)},p(i,a){if(a&1){n=i[0];let l;for(l=0;l<n.length;l+=1){const r=je(i,n,l);t[l]?(t[l].p(r,a),T(t[l],1)):(t[l]=Ue(r),t[l].c(),T(t[l],1),t[l].m(e.parentNode,e))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i(i){for(let a=0;a<n.length;a+=1)T(t[a])},o:k,d(i){Ie(t,i),i&&_(e)}}}function Ue(s){let e,n=s[5]+"",t,i;return{c(){e=w("span"),t=I(n)},l(a){e=v(a,"SPAN",{});var l=z(e);t=L(l,n),l.forEach(_)},m(a,l){g(a,e,l),x(e,t)},p(a,l){s=a,l&1&&n!==(n=s[5]+"")&&me(t,n)},i(a){i||oe(()=>{i=be(e,mt,{duration:s[2],delay:s[7]*s[2]}),i.start()})},o:k,d(a){a&&_(e)}}}function tn(s){let e,n=s[1]&&Ve(s);return{c(){e=w("div"),n&&n.c(),this.h()},l(t){e=v(t,"DIV",{class:!0});var i=z(e);n&&n.l(i),i.forEach(_),this.h()},h(){E(e,"class","wrapper svelte-zdezep")},m(t,i){g(t,e,i),n&&n.m(e,null)},p(t,[i]){t[1]?n?(n.p(t,i),i&2&&T(n,1)):(n=Ve(t),n.c(),T(n,1),n.m(e,null)):n&&(n.d(1),n=null)},i(t){T(n)},o:k,d(t){t&&_(e),n&&n.d()}}}function nn(s,e,n){let t,i,a,{text:l}=e,{duration:r}=e;return s.$$set=o=>{"text"in o&&n(3,l=o.text),"duration"in o&&n(4,r=o.duration)},s.$$.update=()=>{s.$$.dirty&8&&n(0,t=l.split(" ").map(o=>" "+o)),s.$$.dirty&17&&n(2,i=(r-.5)/t.length*1e3),s.$$.dirty&1&&n(1,a=!(t==null?void 0:t.length)),s.$$.dirty&1&&t.length&&setTimeout(()=>{n(1,a=!0)},200)},[t,a,i,l,r]}class sn extends U{constructor(e){super();q(this,e,nn,tn,P,{text:3,duration:4})}}function qe(s,e,n){const t=s.slice();return t[25]=e[n],t[27]=n,t}function Pe(s){let e,n;return{c(){e=w("a"),n=I("Enter Quiz"),this.h()},l(t){e=v(t,"A",{id:!0,href:!0,class:!0});var i=z(e);n=L(i,"Enter Quiz"),i.forEach(_),this.h()},h(){E(e,"id","enter-quiz"),E(e,"href","/quiz"),E(e,"class","svelte-g7o15c")},m(t,i){g(t,e,i),x(e,n)},d(t){t&&_(e)}}}function an(s){var c;let e,n,t,i,a,l,r,o,u,h=((c=s[1])==null?void 0:c.text)&&(s[9]==="running"||s[9]==="finished"||s[9]==="input")&&s[6]&&Ge(s),d=s[9]&&We(s);return{c(){e=w("canvas"),i=F(),a=w("div"),h&&h.c(),l=F(),d&&d.c(),this.h()},l(f){e=v(f,"CANVAS",{style:!0,class:!0}),z(e).forEach(_),i=H(f),a=v(f,"DIV",{class:!0});var p=z(a);h&&h.l(p),l=H(p),d&&d.l(p),p.forEach(_),this.h()},h(){E(e,"style",n=`visibility:${s[3]?"visible":"hidden"}`),E(e,"class","svelte-g7o15c"),ue(e,"loaded",s[3]),E(a,"class","content svelte-g7o15c")},m(f,p){g(f,e,p),s[10](e),g(f,i,p),g(f,a,p),h&&h.m(a,null),x(a,l),d&&d.m(a,null),r=!0,o||(u=j(e,"click",s[11]),o=!0)},p(f,p){var m;(!r||p&8&&n!==(n=`visibility:${f[3]?"visible":"hidden"}`))&&E(e,"style",n),p&8&&ue(e,"loaded",f[3]),((m=f[1])==null?void 0:m.text)&&(f[9]==="running"||f[9]==="finished"||f[9]==="input")&&f[6]?h?(h.p(f,p),p&578&&T(h,1)):(h=Ge(f),h.c(),T(h,1),h.m(a,l)):h&&(ie(),D(h,1,1,()=>{h=null}),ne()),f[9]?d?(d.p(f,p),p&512&&T(d,1)):(d=We(f),d.c(),T(d,1),d.m(a,null)):d&&(ie(),D(d,1,1,()=>{d=null}),ne())},i(f){r||(t||oe(()=>{t=be(e,re,{}),t.start()}),T(h),T(d),r=!0)},o(f){D(h),D(d),r=!1},d(f){f&&_(e),s[10](null),f&&_(i),f&&_(a),h&&h.d(),d&&d.d(),o=!1,u()}}}function ln(s){let e,n;return e=new en({}),{c(){X(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,i){ee(e,t,i),n=!0},p:k,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function Ge(s){let e,n;return e=new sn({props:{text:s[1].text,duration:s[1].duration}}),{c(){X(e.$$.fragment)},l(t){ce(e.$$.fragment,t)},m(t,i){ee(e,t,i),n=!0},p(t,i){const a={};i&2&&(a.text=t[1].text),i&2&&(a.duration=t[1].duration),e.$set(a)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){te(e,t)}}}function We(s){let e,n,t,i;const a=[cn,rn,on],l=[];function r(o,u){return o[9]==="suspended"?0:o[9]==="finished"?1:o[9]==="input"?2:-1}return~(e=r(s))&&(n=l[e]=a[e](s)),{c(){n&&n.c(),t=O()},l(o){n&&n.l(o),t=O()},m(o,u){~e&&l[e].m(o,u),g(o,t,u),i=!0},p(o,u){let h=e;e=r(o),e===h?~e&&l[e].p(o,u):(n&&(ie(),D(l[h],1,1,()=>{l[h]=null}),ne()),~e?(n=l[e],n?n.p(o,u):(n=l[e]=a[e](o),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(o){i||(T(n),i=!0)},o(o){D(n),i=!1},d(o){~e&&l[e].d(o),o&&_(t)}}}function on(s){let e,n,t,i;function a(o){s[15](o)}var l=s[1].element;function r(o){let u={callback:o[14]};return o[0]!==void 0&&(u.showText=o[0]),{props:u}}return l&&(e=new l(r(s)),J.push(()=>ge(e,"showText",a))),{c(){e&&X(e.$$.fragment),t=O()},l(o){e&&ce(e.$$.fragment,o),t=O()},m(o,u){e&&ee(e,o,u),g(o,t,u),i=!0},p(o,u){const h={};if(u&2&&(h.callback=o[14]),!n&&u&1&&(n=!0,h.showText=o[0],xe(()=>n=!1)),l!==(l=o[1].element)){if(e){ie();const d=e;D(d.$$.fragment,1,0,()=>{te(d,1)}),ne()}l?(e=new l(r(o)),J.push(()=>ge(e,"showText",a)),X(e.$$.fragment),T(e.$$.fragment,1),ee(e,t.parentNode,t)):e=null}else l&&e.$set(h)},i(o){i||(e&&T(e.$$.fragment,o),i=!0)},o(o){e&&D(e.$$.fragment,o),i=!1},d(o){o&&_(t),e&&te(e,o)}}}function rn(s){var t,i;let e,n=((i=(t=s[1])==null?void 0:t.nextActions)==null?void 0:i.length)&&Qe(s);return{c(){n&&n.c(),e=O()},l(a){n&&n.l(a),e=O()},m(a,l){n&&n.m(a,l),g(a,e,l)},p(a,l){var r,o;((o=(r=a[1])==null?void 0:r.nextActions)==null?void 0:o.length)?n?(n.p(a,l),l&2&&T(n,1)):(n=Qe(a),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i(a){T(n)},o:k,d(a){n&&n.d(a),a&&_(e)}}}function cn(s){let e,n,t,i;return{c(){e=w("button"),n=I("Starten")},l(a){e=v(a,"BUTTON",{});var l=z(e);n=L(l,"Starten"),l.forEach(_)},m(a,l){g(a,e,l),x(e,n),t||(i=j(e,"click",s[12]),t=!0)},p:k,i:k,o:k,d(a){a&&_(e),t=!1,i()}}}function Qe(s){let e,n=s[1].nextActions,t=[];for(let i=0;i<n.length;i+=1)t[i]=Ke(qe(s,n,i));return{c(){e=w("div");for(let i=0;i<t.length;i+=1)t[i].c()},l(i){e=v(i,"DIV",{});var a=z(e);for(let l=0;l<t.length;l+=1)t[l].l(a);a.forEach(_)},m(i,a){g(i,e,a);for(let l=0;l<t.length;l+=1)t[l].m(e,null)},p(i,a){if(a&2){n=i[1].nextActions;let l;for(l=0;l<n.length;l+=1){const r=qe(i,n,l);t[l]?(t[l].p(r,a),T(t[l],1)):(t[l]=Ke(r),t[l].c(),T(t[l],1),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},i(i){for(let a=0;a<n.length;a+=1)T(t[a])},o:k,d(i){i&&_(e),Ie(t,i)}}}function Ke(s){let e,n=s[25].name+"",t,i,a,l;function r(){return s[13](s[25])}return{c(){e=w("button"),t=I(n)},l(o){e=v(o,"BUTTON",{});var u=z(e);t=L(u,n),u.forEach(_)},m(o,u){g(o,e,u),x(e,t),a||(l=j(e,"click",r),a=!0)},p(o,u){s=o,u&2&&n!==(n=s[25].name+"")&&me(t,n)},i(o){i||oe(()=>{i=be(e,re,{duration:200,delay:200*s[27]}),i.start()})},o:k,d(o){o&&_(e),a=!1,l()}}}function un(s){var d;let e,n,t,i,a,l,r=((d=s[7])==null?void 0:d.state)==="registration"&&Pe();const o=[ln,an],u=[];function h(c,f){return c[8]?0:1}return t=h(s),i=u[t]=o[t](s),{c(){e=F(),r&&r.c(),n=F(),i.c(),a=O(),this.h()},l(c){gt('[data-svelte="svelte-tqpvny"]',document.head).forEach(_),e=H(c),r&&r.l(c),n=H(c),i.l(c),a=O(),this.h()},h(){document.title="Dungeon Entry"},m(c,f){g(c,e,f),r&&r.m(c,f),g(c,n,f),u[t].m(c,f),g(c,a,f),l=!0},p(c,[f]){var m;((m=c[7])==null?void 0:m.state)==="registration"?r||(r=Pe(),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null);let p=t;t=h(c),t===p?u[t].p(c,f):(ie(),D(u[p],1,1,()=>{u[p]=null}),ne(),i=u[t],i?i.p(c,f):(i=u[t]=o[t](c),i.c()),T(i,1),i.m(a.parentNode,a))},i(c){l||(T(i),l=!0)},o(c){D(i),l=!1},d(c){c&&_(e),r&&r.d(c),c&&_(n),u[t].d(c),c&&_(a)}}}const ve=500;function fn(s,e,n){let t,i,a,l,r,o,u=k,h=()=>(u(),u=bt(i,M=>n(9,o=M)),i);fe(s,De,M=>n(1,a=M)),fe(s,Et,M=>n(7,l=M)),fe(s,Le,M=>n(8,r=M)),s.$$.on_destroy.push(()=>u());let d;const c=new Se,f=new K(12626431,.8);f.position.set(2.5,2.5,2),c.add(f);const p=new K(16765393,.8);p.position.set(-2.5,2.5,2),c.add(p);const m=new K(16777215,1);m.position.set(1,1,-1.5),c.add(m);let b=!0;const A=ve;let y=0,$=0,C=!1;const N=new Re(50,ve/A,.1,1e3);N.position.set(0,0,1);let S;async function W(){const M=await Be.loadHat(),_e=M.scene.children[0].children[1],se=M.scene.children[0].children[0];S.setSkeleton(se),_e.geometry.computeBoundingBox();const Q=new wt,ae=_e.geometry.boundingBox;ae.getCenter(Q),N.position.x=Q.x,N.position.y=Q.y;const nt=(ae.max.y-Q.y)*4/2/Math.tan(Math.PI*N.fov/360);N.position.z=nt,c.add(M.scene),n(3,C=!0)}le(()=>{W();const M=new Ne({canvas:d,alpha:!0});M.setSize(ve,A),n(4,S=new Gt({scene:c,renderer:M,camera:N})),Pt(S).setActive();function se(ae){requestAnimationFrame(se),S==null||S.update(ae),y=V(de.x,y,.1),$=V(de.y,$,.1),N.position.x=y*-.8,N.position.y=$*.3+.1,N.lookAt(0,.2,0),Q()}function Q(){M.render(c,N)}se(0)});function Ye(M){J[M?"unshift":"push"](()=>{d=M,n(2,d)})}const Je=()=>{S.params.wiggleRim<1&&(n(4,S.params.wiggleRim=5,S),n(4,S.params.wiggleEyes=1,S),setTimeout(()=>{n(4,S.params.wiggleRim=0,S),n(4,S.params.wiggleEyes=0,S)},1e3))},Xe=()=>a.start(),Ze=M=>M.action.start(),et=M=>{a.handleElementCallback(M)};function tt(M){b=M,n(0,b)}return s.$$.update=()=>{s.$$.dirty&1&&n(6,t=b===!0||b===void 0),s.$$.dirty&2&&h(n(5,i=a&&a.state))},[b,a,d,C,S,i,t,l,r,o,Ye,Je,Xe,Ze,et,tt]}class vn extends U{constructor(e){super();q(this,e,fn,un,P,{})}}export{vn as default};
