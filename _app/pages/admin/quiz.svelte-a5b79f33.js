import{S as R,i as X,s as I,e as T,t as D,k as S,c as y,a as $,g as A,d as h,n as U,b as N,f as z,G as d,h as j,H,X as G,r as K,u as O,w as F,x as B,ak as fe,N as P,l as L,O as _e,j as J,m as W,o as Y,v as Z,a9 as x,A as he,al as de}from"../../chunks/vendor-3c54998b.js";import{g as pe,p as me,e as ve}from"../../chunks/index-76bbb2a0.js";import{T as be}from"../../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{u as ke,q as te}from"../../chunks/stores-b0045d4a.js";function le(o,e,l){const t=o.slice();return t[1]=e[l],t}function se(o){let e,l,t=o[1].name+"",s,a,u,i=o[1].house+"",n,r;return{c(){e=T("tr"),l=T("td"),s=D(t),a=S(),u=T("td"),n=D(i),r=S(),this.h()},l(c){e=y(c,"TR",{class:!0});var _=$(e);l=y(_,"TD",{class:!0});var f=$(l);s=A(f,t),f.forEach(h),a=U(_),u=y(_,"TD",{class:!0});var g=$(u);n=A(g,i),g.forEach(h),r=U(_),_.forEach(h),this.h()},h(){N(l,"class","svelte-g1t6o9"),N(u,"class","svelte-g1t6o9"),N(e,"class","svelte-g1t6o9")},m(c,_){z(c,e,_),d(e,l),d(l,s),d(e,a),d(e,u),d(u,n),d(e,r)},p(c,_){_&1&&t!==(t=c[1].name+"")&&j(s,t),_&1&&i!==(i=c[1].house+"")&&j(n,i)},d(c){c&&h(e)}}}function ge(o){let e,l,t,s,a,u,i,n,r,c,_=o[0].length+"",f,g,k=o[0],b=[];for(let v=0;v<k.length;v+=1)b[v]=se(le(o,k,v));return{c(){e=T("table"),l=T("thead"),t=T("td"),s=D("Name"),a=S(),u=T("td"),i=D("House"),n=S();for(let v=0;v<b.length;v+=1)b[v].c();r=S(),c=T("p"),f=D(_),g=D(" registrations"),this.h()},l(v){e=y(v,"TABLE",{class:!0});var E=$(e);l=y(E,"THEAD",{});var w=$(l);t=y(w,"TD",{class:!0});var Q=$(t);s=A(Q,"Name"),Q.forEach(h),a=U(w),u=y(w,"TD",{class:!0});var m=$(u);i=A(m,"House"),m.forEach(h),w.forEach(h),n=U(E);for(let p=0;p<b.length;p+=1)b[p].l(E);E.forEach(h),r=U(v),c=y(v,"P",{});var q=$(c);f=A(q,_),g=A(q," registrations"),q.forEach(h),this.h()},h(){N(t,"class","svelte-g1t6o9"),N(u,"class","svelte-g1t6o9"),N(e,"class","svelte-g1t6o9")},m(v,E){z(v,e,E),d(e,l),d(l,t),d(t,s),d(l,a),d(l,u),d(u,i),d(e,n);for(let w=0;w<b.length;w+=1)b[w].m(e,null);z(v,r,E),z(v,c,E),d(c,f),d(c,g)},p(v,[E]){if(E&1){k=v[0];let w;for(w=0;w<k.length;w+=1){const Q=le(v,k,w);b[w]?b[w].p(Q,E):(b[w]=se(Q),b[w].c(),b[w].m(e,null))}for(;w<b.length;w+=1)b[w].d(1);b.length=k.length}E&1&&_!==(_=v[0].length+"")&&j(f,_)},i:H,o:H,d(v){v&&h(e),G(b,v),v&&h(r),v&&h(c)}}}function Ee(o,e,l){let{users:t}=e;return o.$$set=s=>{"users"in s&&l(0,t=s.users)},[t]}class we extends R{constructor(e){super();X(this,e,Ee,ge,I,{users:0})}}function ne(o,e,l){const t=o.slice();return t[3]=e[l],t}function re(o,e,l){const t=o.slice();return t[6]=e[l],t}function ie(o,e,l){const t=o.slice();return t[9]=e[l],t}function oe(o){let e,l=o[9].value+"",t;return{c(){e=T("td"),t=D(l),this.h()},l(s){e=y(s,"TD",{class:!0});var a=$(e);t=A(a,l),a.forEach(h),this.h()},h(){N(e,"class","svelte-177xkck")},m(s,a){z(s,e,a),d(e,t)},p(s,a){a&2&&l!==(l=s[9].value+"")&&j(t,l)},d(s){s&&h(e)}}}function ae(o){let e,l=(o[6].votes.includes(o[3].id)?"X":" ")+"",t;return{c(){e=T("td"),t=D(l),this.h()},l(s){e=y(s,"TD",{class:!0});var a=$(e);t=A(a,l),a.forEach(h),this.h()},h(){N(e,"class","svelte-177xkck")},m(s,a){z(s,e,a),d(e,t)},p(s,a){a&3&&l!==(l=(s[6].votes.includes(s[3].id)?"X":" ")+"")&&j(t,l)},d(s){s&&h(e)}}}function ce(o){let e,l,t=o[3].name+"",s,a,u,i=o[1],n=[];for(let r=0;r<i.length;r+=1)n[r]=ae(re(o,i,r));return{c(){e=T("tr"),l=T("td"),s=D(t),a=S();for(let r=0;r<n.length;r+=1)n[r].c();u=S(),this.h()},l(r){e=y(r,"TR",{class:!0});var c=$(e);l=y(c,"TD",{class:!0});var _=$(l);s=A(_,t),_.forEach(h),a=U(c);for(let f=0;f<n.length;f+=1)n[f].l(c);u=U(c),c.forEach(h),this.h()},h(){N(l,"class","svelte-177xkck"),N(e,"class","svelte-177xkck")},m(r,c){z(r,e,c),d(e,l),d(l,s),d(e,a);for(let _=0;_<n.length;_+=1)n[_].m(e,null);d(e,u)},p(r,c){if(c&1&&t!==(t=r[3].name+"")&&j(s,t),c&3){i=r[1];let _;for(_=0;_<i.length;_+=1){const f=re(r,i,_);n[_]?n[_].p(f,c):(n[_]=ae(f),n[_].c(),n[_].m(e,u))}for(;_<n.length;_+=1)n[_].d(1);n.length=i.length}},d(r){r&&h(e),G(n,r)}}}function Te(o){let e,l,t,s,a,u,i,n,r,c=o[2].length+"",_,f,g=Math.floor(o[2].length/o[0].length*100)+"",k,b,v=o[1],E=[];for(let m=0;m<v.length;m+=1)E[m]=oe(ie(o,v,m));let w=o[0],Q=[];for(let m=0;m<w.length;m+=1)Q[m]=ce(ne(o,w,m));return{c(){e=T("div"),l=T("table"),t=T("thead"),s=T("td"),a=D("User"),u=S();for(let m=0;m<E.length;m+=1)E[m].c();i=S();for(let m=0;m<Q.length;m+=1)Q[m].c();n=S(),r=T("p"),_=D(c),f=D(" answers ("),k=D(g),b=D("%)"),this.h()},l(m){e=y(m,"DIV",{class:!0});var q=$(e);l=y(q,"TABLE",{class:!0});var p=$(l);t=y(p,"THEAD",{class:!0});var V=$(t);s=y(V,"TD",{class:!0});var ee=$(s);a=A(ee,"User"),ee.forEach(h),u=U(V);for(let C=0;C<E.length;C+=1)E[C].l(V);V.forEach(h),i=U(p);for(let C=0;C<Q.length;C+=1)Q[C].l(p);p.forEach(h),q.forEach(h),n=U(m),r=y(m,"P",{});var M=$(r);_=A(M,c),f=A(M," answers ("),k=A(M,g),b=A(M,"%)"),M.forEach(h),this.h()},h(){N(s,"class","svelte-177xkck"),N(t,"class","svelte-177xkck"),N(l,"class","svelte-177xkck"),N(e,"class","w-wrapper svelte-177xkck")},m(m,q){z(m,e,q),d(e,l),d(l,t),d(t,s),d(s,a),d(t,u);for(let p=0;p<E.length;p+=1)E[p].m(t,null);d(l,i);for(let p=0;p<Q.length;p+=1)Q[p].m(l,null);z(m,n,q),z(m,r,q),d(r,_),d(r,f),d(r,k),d(r,b)},p(m,[q]){if(q&2){v=m[1];let p;for(p=0;p<v.length;p+=1){const V=ie(m,v,p);E[p]?E[p].p(V,q):(E[p]=oe(V),E[p].c(),E[p].m(t,null))}for(;p<E.length;p+=1)E[p].d(1);E.length=v.length}if(q&3){w=m[0];let p;for(p=0;p<w.length;p+=1){const V=ne(m,w,p);Q[p]?Q[p].p(V,q):(Q[p]=ce(V),Q[p].c(),Q[p].m(l,null))}for(;p<Q.length;p+=1)Q[p].d(1);Q.length=w.length}q&1&&g!==(g=Math.floor(m[2].length/m[0].length*100)+"")&&j(k,g)},i:H,o:H,d(m){m&&h(e),G(E,m),G(Q,m),m&&h(n),m&&h(r)}}}function ye(o,e,l){let{users:t}=e,{answers:s}=e;const a=t.map(u=>{if(s.find(n=>n.votes.includes(u.id)))return{name:u.name,uid:u.id}}).filter(u=>!!u);return o.$$set=u=>{"users"in u&&l(0,t=u.users),"answers"in u&&l(1,s=u.answers)},[t,s,a]}class $e extends R{constructor(e){super();X(this,e,ye,Te,I,{users:0,answers:1})}}function ze(o){let e,l,t,s,a;function u(r,c){if(r[2]==="open")return Qe;if(r[2]==="voting-open")return Ne;if(r[2]==="closed")return Ae}let i=u(o),n=i&&i(o);return{c(){n&&n.c(),e=S(),l=T("button"),t=D("End Quiz"),this.h()},l(r){n&&n.l(r),e=U(r),l=y(r,"BUTTON",{class:!0});var c=$(l);t=A(c,"End Quiz"),c.forEach(h),this.h()},h(){N(l,"class","svelte-pg62n")},m(r,c){n&&n.m(r,c),z(r,e,c),z(r,l,c),d(l,t),s||(a=P(l,"click",o[10]),s=!0)},p(r,c){i===(i=u(r))&&n?n.p(r,c):(n&&n.d(1),n=i&&i(r),n&&(n.c(),n.m(e.parentNode,e)))},i:H,o:H,d(r){n&&n.d(r),r&&h(e),r&&h(l),s=!1,a()}}}function De(o){let e,l,t,s;const a=[Se,qe],u=[];function i(n,r){return n[0].startsAt?0:1}return e=i(o),l=u[e]=a[e](o),{c(){l.c(),t=L()},l(n){l.l(n),t=L()},m(n,r){u[e].m(n,r),z(n,t,r),s=!0},p(n,r){let c=e;e=i(n),e===c?u[e].p(n,r):(K(),O(u[c],1,1,()=>{u[c]=null}),F(),l=u[e],l?l.p(n,r):(l=u[e]=a[e](n),l.c()),B(l,1),l.m(t.parentNode,t))},i(n){s||(B(l),s=!0)},o(n){O(l),s=!1},d(n){u[e].d(n),n&&h(t)}}}function Ae(o){let e,l,t,s;return{c(){e=T("button"),l=D("Next Question"),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var u=$(e);l=A(u,"Next Question"),u.forEach(h),this.h()},h(){N(e,"class","svelte-pg62n")},m(a,u){z(a,e,u),d(e,l),t||(s=P(e,"click",o[9]),t=!0)},p:H,d(a){a&&h(e),t=!1,s()}}}function Ne(o){let e,l,t,s;return{c(){e=T("button"),l=D("Close Voting"),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var u=$(e);l=A(u,"Close Voting"),u.forEach(h),this.h()},h(){N(e,"class","svelte-pg62n")},m(a,u){z(a,e,u),d(e,l),t||(s=P(e,"click",o[8]),t=!0)},p:H,d(a){a&&h(e),t=!1,s()}}}function Qe(o){var u;let e,l=(((u=o[1])==null?void 0:u.type)==="voting"?"Start Voting":"End Question")+"",t,s,a;return{c(){e=T("button"),t=D(l),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var n=$(e);t=A(n,l),n.forEach(h),this.h()},h(){N(e,"class","svelte-pg62n")},m(i,n){z(i,e,n),d(e,t),s||(a=P(e,"click",o[7]),s=!0)},p(i,n){var r;n&2&&l!==(l=(((r=i[1])==null?void 0:r.type)==="voting"?"Start Voting":"End Question")+"")&&j(t,l)},d(i){i&&h(e),s=!1,a()}}}function qe(o){let e,l,t,s,a,u,i;return{c(){e=T("button"),l=D("Start Quiz"),t=S(),s=T("button"),a=D("Start Quiz Timer"),this.h()},l(n){e=y(n,"BUTTON",{class:!0});var r=$(e);l=A(r,"Start Quiz"),r.forEach(h),t=U(n),s=y(n,"BUTTON",{class:!0});var c=$(s);a=A(c,"Start Quiz Timer"),c.forEach(h),this.h()},h(){N(e,"class","svelte-pg62n"),N(s,"class","svelte-pg62n")},m(n,r){z(n,e,r),d(e,l),z(n,t,r),z(n,s,r),d(s,a),u||(i=[P(e,"click",o[5]),P(s,"click",o[6])],u=!0)},p:H,i:H,o:H,d(n){n&&h(e),n&&h(t),n&&h(s),u=!1,_e(i)}}}function Se(o){let e,l;return e=new be({props:{endsAt:o[0].startsAt}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.endsAt=t[0].startsAt),e.$set(a)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Ue(o){let e,l,t,s=(o[2]?"."+o[2]:"")+"",a,u,i,n,r,c;const _=[De,ze],f=[];function g(k,b){return k[3]==="registration"?0:k[3]==="running"?1:-1}return~(n=g(o))&&(r=f[n]=_[n](o)),{c(){e=T("header"),l=T("h1"),t=D(o[3]),a=D(s),u=S(),i=T("div"),r&&r.c(),this.h()},l(k){e=y(k,"HEADER",{class:!0});var b=$(e);l=y(b,"H1",{class:!0});var v=$(l);t=A(v,o[3]),a=A(v,s),v.forEach(h),u=U(b),i=y(b,"DIV",{class:!0});var E=$(i);r&&r.l(E),E.forEach(h),b.forEach(h),this.h()},h(){N(l,"class","svelte-pg62n"),N(i,"class","scroller svelte-pg62n"),N(e,"class","svelte-pg62n")},m(k,b){z(k,e,b),d(e,l),d(l,t),d(l,a),d(e,u),d(e,i),~n&&f[n].m(i,null),c=!0},p(k,[b]){(!c||b&8)&&j(t,k[3]),(!c||b&4)&&s!==(s=(k[2]?"."+k[2]:"")+"")&&j(a,s);let v=n;n=g(k),n===v?~n&&f[n].p(k,b):(r&&(K(),O(f[v],1,1,()=>{f[v]=null}),F()),~n?(r=f[n],r?r.p(k,b):(r=f[n]=_[n](k),r.c()),B(r,1),r.m(i,null)):r=null)},i(k){c||(B(r),c=!0)},o(k){O(r),c=!1},d(k){k&&h(e),~n&&f[n].d()}}}function He(o,e,l){let t,s,a;const u=fe();let{quiz:i}=e;const n=()=>{u("action","start-quiz")},r=()=>{u("action","start-quiz-timer")},c=()=>{u("action","close-question")},_=()=>{u("action","close-voting")},f=()=>{u("action","end-question")},g=()=>{confirm("End Quiz?")&&u("action","end-quiz")};return o.$$set=k=>{"quiz"in k&&l(0,i=k.quiz)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=i==null?void 0:i.activeQuestion),o.$$.dirty&1&&l(3,s=i==null?void 0:i.state),o.$$.dirty&2&&l(2,a=t==null?void 0:t.state)},[i,t,a,s,u,n,r,c,_,f,g]}class Be extends R{constructor(e){super();X(this,e,He,Ue,I,{quiz:0})}}const{window:Oe}=de;function je(o){let e,l;return{c(){e=T("p"),l=D("results")},l(t){e=y(t,"P",{});var s=$(e);l=A(s,"results"),s.forEach(h)},m(t,s){z(t,e,s),d(e,l)},p:H,i:H,o:H,d(t){t&&h(e)}}}function Ve(o){var n,r;let e,l=((n=o[1])==null?void 0:n.description)+"",t,s,a,u,i=((r=o[1])==null?void 0:r.answers)&&ue(o);return{c(){e=T("p"),t=D(l),s=S(),i&&i.c(),a=L()},l(c){e=y(c,"P",{});var _=$(e);t=A(_,l),_.forEach(h),s=U(c),i&&i.l(c),a=L()},m(c,_){z(c,e,_),d(e,t),z(c,s,_),i&&i.m(c,_),z(c,a,_),u=!0},p(c,_){var f,g;(!u||_&2)&&l!==(l=((f=c[1])==null?void 0:f.description)+"")&&j(t,l),((g=c[1])==null?void 0:g.answers)?i?(i.p(c,_),_&2&&B(i,1)):(i=ue(c),i.c(),B(i,1),i.m(a.parentNode,a)):i&&(K(),O(i,1,1,()=>{i=null}),F())},i(c){u||(B(i),u=!0)},o(c){O(i),u=!1},d(c){c&&h(e),c&&h(s),i&&i.d(c),c&&h(a)}}}function Ce(o){let e,l;return e=new we({props:{users:o[0]}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.users=t[0]),e.$set(a)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function ue(o){let e,l;return e=new $e({props:{answers:o[1].answers,users:o[0]}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const a={};s&2&&(a.answers=t[1].answers),s&1&&(a.users=t[0]),e.$set(a)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Pe(o){let e,l,t,s,a,u,i,n;e=new Be({props:{quiz:o[3]}}),e.$on("action",o[7]);const r=[Ce,Ve,je],c=[];function _(f,g){return f[2]==="registration"?0:f[2]==="running"?1:f[2]==="results"?2:-1}return~(t=_(o))&&(s=c[t]=r[t](o)),{c(){J(e.$$.fragment),l=S(),s&&s.c(),a=L()},l(f){W(e.$$.fragment,f),l=U(f),s&&s.l(f),a=L()},m(f,g){Y(e,f,g),z(f,l,g),~t&&c[t].m(f,g),z(f,a,g),u=!0,i||(n=P(Oe,"keydown",o[4]),i=!0)},p(f,[g]){const k={};g&8&&(k.quiz=f[3]),e.$set(k);let b=t;t=_(f),t===b?~t&&c[t].p(f,g):(s&&(K(),O(c[b],1,1,()=>{c[b]=null}),F()),~t?(s=c[t],s?s.p(f,g):(s=c[t]=r[t](f),s.c()),B(s,1),s.m(a.parentNode,a)):s=null)},i(f){u||(B(e.$$.fragment,f),B(s),u=!0)},o(f){O(e.$$.fragment,f),O(s),u=!1},d(f){Z(e,f),f&&h(l),~t&&c[t].d(f),f&&h(a),i=!1,n()}}}function Le(o,e,l){let t,s,a,u,i,n;x(o,ke,f=>l(8,u=f)),x(o,te,f=>l(6,i=f)),x(o,te,f=>l(3,n=f));async function r({key:f}){if(f==="L"){const g=await pe("api/quiz");console.log(await g.json())}}function c(f){me("api/quiz",{action:f})}he(()=>{ve("quiz.admin",u)});const _=({detail:f})=>c(f);return o.$$.update=()=>{o.$$.dirty&64&&l(2,t=i==null?void 0:i.state),o.$$.dirty&64&&l(1,s=i==null?void 0:i.activeQuestion),o.$$.dirty&64&&l(0,a=i==null?void 0:i.users),o.$$.dirty&64&&i&&(window.quiz=i)},[a,s,t,n,r,c,i,_]}class Ge extends R{constructor(e){super();X(this,e,Le,Pe,I,{})}}export{Ge as default};
