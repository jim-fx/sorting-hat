import{S as R,i as I,s as X,e as T,t as z,k as j,c as q,a as y,g as D,d as h,n as S,b as Q,f as $,G as d,h as V,H as U,Z as G,r as K,u as B,w as Z,x as H,al as fe,P as C,l as L,Q as _e,j as F,m as J,o as W,v as Y,N as x,A as he,am as de}from"../../chunks/vendor-561498aa.js";import{g as me,p as pe,e as ve}from"../../chunks/index-21c51c30.js";import{T as be}from"../../chunks/Timer-9d60cbf0.js";import{u as ke,q as te}from"../../chunks/stores-7e1142e6.js";function le(o,e,l){const t=o.slice();return t[1]=e[l],t}function se(o){let e,l,t=o[1].name+"",s,a,u,i=o[1].house+"",n,r;return{c(){e=T("tr"),l=T("td"),s=z(t),a=j(),u=T("td"),n=z(i),r=j(),this.h()},l(c){e=q(c,"TR",{class:!0});var _=y(e);l=q(_,"TD",{class:!0});var f=y(l);s=D(f,t),f.forEach(h),a=S(_),u=q(_,"TD",{class:!0});var g=y(u);n=D(g,i),g.forEach(h),r=S(_),_.forEach(h),this.h()},h(){Q(l,"class","svelte-g1t6o9"),Q(u,"class","svelte-g1t6o9"),Q(e,"class","svelte-g1t6o9")},m(c,_){$(c,e,_),d(e,l),d(l,s),d(e,a),d(e,u),d(u,n),d(e,r)},p(c,_){_&1&&t!==(t=c[1].name+"")&&V(s,t),_&1&&i!==(i=c[1].house+"")&&V(n,i)},d(c){c&&h(e)}}}function ge(o){let e,l,t,s,a,u,i,n,r,c,_=o[0].length+"",f,g,k=o[0],b=[];for(let v=0;v<k.length;v+=1)b[v]=se(le(o,k,v));return{c(){e=T("table"),l=T("thead"),t=T("td"),s=z("Name"),a=j(),u=T("td"),i=z("House"),n=j();for(let v=0;v<b.length;v+=1)b[v].c();r=j(),c=T("p"),f=z(_),g=z(" registrations"),this.h()},l(v){e=q(v,"TABLE",{class:!0});var w=y(e);l=q(w,"THEAD",{});var E=y(l);t=q(E,"TD",{class:!0});var A=y(t);s=D(A,"Name"),A.forEach(h),a=S(E),u=q(E,"TD",{class:!0});var p=y(u);i=D(p,"House"),p.forEach(h),E.forEach(h),n=S(w);for(let m=0;m<b.length;m+=1)b[m].l(w);w.forEach(h),r=S(v),c=q(v,"P",{});var N=y(c);f=D(N,_),g=D(N," registrations"),N.forEach(h),this.h()},h(){Q(t,"class","svelte-g1t6o9"),Q(u,"class","svelte-g1t6o9"),Q(e,"class","svelte-g1t6o9")},m(v,w){$(v,e,w),d(e,l),d(l,t),d(t,s),d(l,a),d(l,u),d(u,i),d(e,n);for(let E=0;E<b.length;E+=1)b[E].m(e,null);$(v,r,w),$(v,c,w),d(c,f),d(c,g)},p(v,[w]){if(w&1){k=v[0];let E;for(E=0;E<k.length;E+=1){const A=le(v,k,E);b[E]?b[E].p(A,w):(b[E]=se(A),b[E].c(),b[E].m(e,null))}for(;E<b.length;E+=1)b[E].d(1);b.length=k.length}w&1&&_!==(_=v[0].length+"")&&V(f,_)},i:U,o:U,d(v){v&&h(e),G(b,v),v&&h(r),v&&h(c)}}}function we(o,e,l){let{users:t}=e;return o.$$set=s=>{"users"in s&&l(0,t=s.users)},[t]}class Ee extends R{constructor(e){super();I(this,e,we,ge,X,{users:0})}}function ne(o,e,l){const t=o.slice();return t[3]=e[l],t}function re(o,e,l){const t=o.slice();return t[6]=e[l],t}function ie(o,e,l){const t=o.slice();return t[9]=e[l],t}function oe(o){let e,l=o[9].value+"",t;return{c(){e=T("td"),t=z(l),this.h()},l(s){e=q(s,"TD",{class:!0});var a=y(e);t=D(a,l),a.forEach(h),this.h()},h(){Q(e,"class","svelte-jt2ax2")},m(s,a){$(s,e,a),d(e,t)},p(s,a){a&2&&l!==(l=s[9].value+"")&&V(t,l)},d(s){s&&h(e)}}}function ae(o){let e,l=(o[6].votes.includes(o[3].uid)?"X":" ")+"",t;return{c(){e=T("td"),t=z(l),this.h()},l(s){e=q(s,"TD",{class:!0});var a=y(e);t=D(a,l),a.forEach(h),this.h()},h(){Q(e,"class","svelte-jt2ax2")},m(s,a){$(s,e,a),d(e,t)},p(s,a){a&2&&l!==(l=(s[6].votes.includes(s[3].uid)?"X":" ")+"")&&V(t,l)},d(s){s&&h(e)}}}function ce(o){let e,l,t=o[3].name+"",s,a,u,i=o[1],n=[];for(let r=0;r<i.length;r+=1)n[r]=ae(re(o,i,r));return{c(){e=T("tr"),l=T("td"),s=z(t),a=j();for(let r=0;r<n.length;r+=1)n[r].c();u=j(),this.h()},l(r){e=q(r,"TR",{class:!0});var c=y(e);l=q(c,"TD",{class:!0});var _=y(l);s=D(_,t),_.forEach(h),a=S(c);for(let f=0;f<n.length;f+=1)n[f].l(c);u=S(c),c.forEach(h),this.h()},h(){Q(l,"class","svelte-jt2ax2"),Q(e,"class","svelte-jt2ax2")},m(r,c){$(r,e,c),d(e,l),d(l,s),d(e,a);for(let _=0;_<n.length;_+=1)n[_].m(e,null);d(e,u)},p(r,c){if(c&6){i=r[1];let _;for(_=0;_<i.length;_+=1){const f=re(r,i,_);n[_]?n[_].p(f,c):(n[_]=ae(f),n[_].c(),n[_].m(e,u))}for(;_<n.length;_+=1)n[_].d(1);n.length=i.length}},d(r){r&&h(e),G(n,r)}}}function Te(o){let e,l,t,s,a,u,i,n,r,c=o[2].length+"",_,f,g=Math.floor(o[2].length/o[0].length*100)+"",k,b,v=o[1],w=[];for(let p=0;p<v.length;p+=1)w[p]=oe(ie(o,v,p));let E=o[2],A=[];for(let p=0;p<E.length;p+=1)A[p]=ce(ne(o,E,p));return{c(){e=T("div"),l=T("table"),t=T("thead"),s=T("td"),a=z("User"),u=j();for(let p=0;p<w.length;p+=1)w[p].c();i=j();for(let p=0;p<A.length;p+=1)A[p].c();n=j(),r=T("p"),_=z(c),f=z(" answers ("),k=z(g),b=z("%)"),this.h()},l(p){e=q(p,"DIV",{class:!0});var N=y(e);l=q(N,"TABLE",{class:!0});var m=y(l);t=q(m,"THEAD",{class:!0});var O=y(t);s=q(O,"TD",{class:!0});var ee=y(s);a=D(ee,"User"),ee.forEach(h),u=S(O);for(let P=0;P<w.length;P+=1)w[P].l(O);O.forEach(h),i=S(m);for(let P=0;P<A.length;P+=1)A[P].l(m);m.forEach(h),N.forEach(h),n=S(p),r=q(p,"P",{});var M=y(r);_=D(M,c),f=D(M," answers ("),k=D(M,g),b=D(M,"%)"),M.forEach(h),this.h()},h(){Q(s,"class","svelte-jt2ax2"),Q(t,"class","svelte-jt2ax2"),Q(l,"class","svelte-jt2ax2"),Q(e,"class","w-wrapper svelte-jt2ax2")},m(p,N){$(p,e,N),d(e,l),d(l,t),d(t,s),d(s,a),d(t,u);for(let m=0;m<w.length;m+=1)w[m].m(t,null);d(l,i);for(let m=0;m<A.length;m+=1)A[m].m(l,null);$(p,n,N),$(p,r,N),d(r,_),d(r,f),d(r,k),d(r,b)},p(p,[N]){if(N&2){v=p[1];let m;for(m=0;m<v.length;m+=1){const O=ie(p,v,m);w[m]?w[m].p(O,N):(w[m]=oe(O),w[m].c(),w[m].m(t,null))}for(;m<w.length;m+=1)w[m].d(1);w.length=v.length}if(N&6){E=p[2];let m;for(m=0;m<E.length;m+=1){const O=ne(p,E,m);A[m]?A[m].p(O,N):(A[m]=ce(O),A[m].c(),A[m].m(l,null))}for(;m<A.length;m+=1)A[m].d(1);A.length=E.length}N&1&&g!==(g=Math.floor(p[2].length/p[0].length*100)+"")&&V(k,g)},i:U,o:U,d(p){p&&h(e),G(w,p),G(A,p),p&&h(n),p&&h(r)}}}function qe(o,e,l){let{users:t}=e,{answers:s}=e;const a=t.map(u=>{if(s.find(n=>n.votes.includes(u.id)))return{name:u.name,uid:u.id}}).filter(u=>!!u);return o.$$set=u=>{"users"in u&&l(0,t=u.users),"answers"in u&&l(1,s=u.answers)},[t,s,a]}class ye extends R{constructor(e){super();I(this,e,qe,Te,X,{users:0,answers:1})}}function $e(o){let e,l,t,s,a;function u(r,c){if(r[2]==="open")return Ae;if(r[2]==="voting-open")return Qe;if(r[2]==="closed")return De}let i=u(o),n=i&&i(o);return{c(){n&&n.c(),e=j(),l=T("button"),t=z("End Quiz"),this.h()},l(r){n&&n.l(r),e=S(r),l=q(r,"BUTTON",{class:!0});var c=y(l);t=D(c,"End Quiz"),c.forEach(h),this.h()},h(){Q(l,"class","svelte-vf2kwq")},m(r,c){n&&n.m(r,c),$(r,e,c),$(r,l,c),d(l,t),s||(a=C(l,"click",o[10]),s=!0)},p(r,c){i===(i=u(r))&&n?n.p(r,c):(n&&n.d(1),n=i&&i(r),n&&(n.c(),n.m(e.parentNode,e)))},i:U,o:U,d(r){n&&n.d(r),r&&h(e),r&&h(l),s=!1,a()}}}function ze(o){let e,l,t,s;const a=[je,Ne],u=[];function i(n,r){return n[0].startsAt?0:1}return e=i(o),l=u[e]=a[e](o),{c(){l.c(),t=L()},l(n){l.l(n),t=L()},m(n,r){u[e].m(n,r),$(n,t,r),s=!0},p(n,r){let c=e;e=i(n),e===c?u[e].p(n,r):(K(),B(u[c],1,1,()=>{u[c]=null}),Z(),l=u[e],l?l.p(n,r):(l=u[e]=a[e](n),l.c()),H(l,1),l.m(t.parentNode,t))},i(n){s||(H(l),s=!0)},o(n){B(l),s=!1},d(n){u[e].d(n),n&&h(t)}}}function De(o){let e,l,t,s;return{c(){e=T("button"),l=z("Next Question"),this.h()},l(a){e=q(a,"BUTTON",{class:!0});var u=y(e);l=D(u,"Next Question"),u.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq")},m(a,u){$(a,e,u),d(e,l),t||(s=C(e,"click",o[9]),t=!0)},p:U,d(a){a&&h(e),t=!1,s()}}}function Qe(o){let e,l,t,s;return{c(){e=T("button"),l=z("Close Voting"),this.h()},l(a){e=q(a,"BUTTON",{class:!0});var u=y(e);l=D(u,"Close Voting"),u.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq")},m(a,u){$(a,e,u),d(e,l),t||(s=C(e,"click",o[8]),t=!0)},p:U,d(a){a&&h(e),t=!1,s()}}}function Ae(o){var u;let e,l=(((u=o[1])==null?void 0:u.type)==="voting"?"Start Voting":"End Question")+"",t,s,a;return{c(){e=T("button"),t=z(l),this.h()},l(i){e=q(i,"BUTTON",{class:!0});var n=y(e);t=D(n,l),n.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq")},m(i,n){$(i,e,n),d(e,t),s||(a=C(e,"click",o[7]),s=!0)},p(i,n){var r;n&2&&l!==(l=(((r=i[1])==null?void 0:r.type)==="voting"?"Start Voting":"End Question")+"")&&V(t,l)},d(i){i&&h(e),s=!1,a()}}}function Ne(o){let e,l,t,s,a,u,i;return{c(){e=T("button"),l=z("Start Quiz"),t=j(),s=T("button"),a=z("Start Quiz Timer"),this.h()},l(n){e=q(n,"BUTTON",{class:!0});var r=y(e);l=D(r,"Start Quiz"),r.forEach(h),t=S(n),s=q(n,"BUTTON",{class:!0});var c=y(s);a=D(c,"Start Quiz Timer"),c.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq"),Q(s,"class","svelte-vf2kwq")},m(n,r){$(n,e,r),d(e,l),$(n,t,r),$(n,s,r),d(s,a),u||(i=[C(e,"click",o[5]),C(s,"click",o[6])],u=!0)},p:U,i:U,o:U,d(n){n&&h(e),n&&h(t),n&&h(s),u=!1,_e(i)}}}function je(o){let e,l;return e=new be({props:{endsAt:o[0].startsAt}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.endsAt=t[0].startsAt),e.$set(a)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function Se(o){let e,l,t,s=(o[2]?"."+o[2]:"")+"",a,u,i,n,r,c;const _=[ze,$e],f=[];function g(k,b){return k[3]==="registration"?0:k[3]==="running"?1:-1}return~(n=g(o))&&(r=f[n]=_[n](o)),{c(){e=T("header"),l=T("h1"),t=z(o[3]),a=z(s),u=j(),i=T("div"),r&&r.c(),this.h()},l(k){e=q(k,"HEADER",{class:!0});var b=y(e);l=q(b,"H1",{class:!0});var v=y(l);t=D(v,o[3]),a=D(v,s),v.forEach(h),u=S(b),i=q(b,"DIV",{class:!0});var w=y(i);r&&r.l(w),w.forEach(h),b.forEach(h),this.h()},h(){Q(l,"class","svelte-vf2kwq"),Q(i,"class","scroller svelte-vf2kwq"),Q(e,"class","svelte-vf2kwq")},m(k,b){$(k,e,b),d(e,l),d(l,t),d(l,a),d(e,u),d(e,i),~n&&f[n].m(i,null),c=!0},p(k,[b]){(!c||b&8)&&V(t,k[3]),(!c||b&4)&&s!==(s=(k[2]?"."+k[2]:"")+"")&&V(a,s);let v=n;n=g(k),n===v?~n&&f[n].p(k,b):(r&&(K(),B(f[v],1,1,()=>{f[v]=null}),Z()),~n?(r=f[n],r?r.p(k,b):(r=f[n]=_[n](k),r.c()),H(r,1),r.m(i,null)):r=null)},i(k){c||(H(r),c=!0)},o(k){B(r),c=!1},d(k){k&&h(e),~n&&f[n].d()}}}function Ue(o,e,l){let t,s,a;const u=fe();let{quiz:i}=e;const n=()=>{u("action","start-quiz")},r=()=>{u("action","start-quiz-timer")},c=()=>{u("action","close-question")},_=()=>{u("action","close-voting")},f=()=>{u("action","end-question")},g=()=>{confirm("End Quiz?")&&u("action","end-quiz")};return o.$$set=k=>{"quiz"in k&&l(0,i=k.quiz)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=i==null?void 0:i.activeQuestion),o.$$.dirty&1&&l(3,s=i==null?void 0:i.state),o.$$.dirty&2&&l(2,a=t==null?void 0:t.state)},[i,t,a,s,u,n,r,c,_,f,g]}class He extends R{constructor(e){super();I(this,e,Ue,Se,X,{quiz:0})}}const{window:Be}=de;function Oe(o){let e,l;return{c(){e=T("p"),l=z("results")},l(t){e=q(t,"P",{});var s=y(e);l=D(s,"results"),s.forEach(h)},m(t,s){$(t,e,s),d(e,l)},p:U,i:U,o:U,d(t){t&&h(e)}}}function Ve(o){var n,r;let e,l=((n=o[1])==null?void 0:n.description)+"",t,s,a,u,i=((r=o[1])==null?void 0:r.answers)&&ue(o);return{c(){e=T("p"),t=z(l),s=j(),i&&i.c(),a=L()},l(c){e=q(c,"P",{});var _=y(e);t=D(_,l),_.forEach(h),s=S(c),i&&i.l(c),a=L()},m(c,_){$(c,e,_),d(e,t),$(c,s,_),i&&i.m(c,_),$(c,a,_),u=!0},p(c,_){var f,g;(!u||_&2)&&l!==(l=((f=c[1])==null?void 0:f.description)+"")&&V(t,l),((g=c[1])==null?void 0:g.answers)?i?(i.p(c,_),_&2&&H(i,1)):(i=ue(c),i.c(),H(i,1),i.m(a.parentNode,a)):i&&(K(),B(i,1,1,()=>{i=null}),Z())},i(c){u||(H(i),u=!0)},o(c){B(i),u=!1},d(c){c&&h(e),c&&h(s),i&&i.d(c),c&&h(a)}}}function Pe(o){let e,l;return e=new Ee({props:{users:o[0]}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.users=t[0]),e.$set(a)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function ue(o){let e,l;return e=new ye({props:{answers:o[1].answers,users:o[0]}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const a={};s&2&&(a.answers=t[1].answers),s&1&&(a.users=t[0]),e.$set(a)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){B(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function Ce(o){let e,l,t,s,a,u,i,n;e=new He({props:{quiz:o[3]}}),e.$on("action",o[7]);const r=[Pe,Ve,Oe],c=[];function _(f,g){return f[2]==="registration"?0:f[2]==="running"?1:f[2]==="results"?2:-1}return~(t=_(o))&&(s=c[t]=r[t](o)),{c(){F(e.$$.fragment),l=j(),s&&s.c(),a=L()},l(f){J(e.$$.fragment,f),l=S(f),s&&s.l(f),a=L()},m(f,g){W(e,f,g),$(f,l,g),~t&&c[t].m(f,g),$(f,a,g),u=!0,i||(n=C(Be,"keydown",o[4]),i=!0)},p(f,[g]){const k={};g&8&&(k.quiz=f[3]),e.$set(k);let b=t;t=_(f),t===b?~t&&c[t].p(f,g):(s&&(K(),B(c[b],1,1,()=>{c[b]=null}),Z()),~t?(s=c[t],s?s.p(f,g):(s=c[t]=r[t](f),s.c()),H(s,1),s.m(a.parentNode,a)):s=null)},i(f){u||(H(e.$$.fragment,f),H(s),u=!0)},o(f){B(e.$$.fragment,f),B(s),u=!1},d(f){Y(e,f),f&&h(l),~t&&c[t].d(f),f&&h(a),i=!1,n()}}}function Le(o,e,l){let t,s,a,u,i,n;x(o,ke,f=>l(8,u=f)),x(o,te,f=>l(6,i=f)),x(o,te,f=>l(3,n=f));async function r({key:f}){if(f==="L"){const g=await me("api/quiz");console.log(await g.json())}}function c(f){pe("api/quiz",{action:f})}he(()=>{ve("quiz.admin",u)});const _=({detail:f})=>c(f);return o.$$.update=()=>{o.$$.dirty&64&&l(2,t=i==null?void 0:i.state),o.$$.dirty&64&&l(1,s=i==null?void 0:i.activeQuestion),o.$$.dirty&64&&l(0,a=i==null?void 0:i.users),o.$$.dirty&64&&i&&(window.quiz=i)},[a,s,t,n,r,c,i,_]}class Ge extends R{constructor(e){super();I(this,e,Le,Ce,X,{})}}export{Ge as default};
