import{S as R,i as I,s as X,e as T,t as z,k as S,c as q,a as $,g as D,d as h,n as U,b as Q,f as y,G as d,h as O,H,Z as G,r as K,u as j,w as Z,x as B,al as ue,P as M,l as C,Q as _e,j as F,m as J,o as W,v as Y,M as x,A as he,am as de}from"../../chunks/vendor-3db4c2b7.js";import{g as me,p as pe,e as ve}from"../../chunks/index-21c51c30.js";import{T as ke}from"../../chunks/Timer-e03fbdb7.js";import{u as be,q as te}from"../../chunks/stores-f6a5ebba.js";function le(o,e,l){const t=o.slice();return t[1]=e[l],t}function se(o){let e,l,t=o[1].name+"",s,a,f,i=o[1].house+"",n,r;return{c(){e=T("tr"),l=T("td"),s=z(t),a=S(),f=T("td"),n=z(i),r=S(),this.h()},l(c){e=q(c,"TR",{class:!0});var _=$(e);l=q(_,"TD",{class:!0});var u=$(l);s=D(u,t),u.forEach(h),a=U(_),f=q(_,"TD",{class:!0});var g=$(f);n=D(g,i),g.forEach(h),r=U(_),_.forEach(h),this.h()},h(){Q(l,"class","svelte-g1t6o9"),Q(f,"class","svelte-g1t6o9"),Q(e,"class","svelte-g1t6o9")},m(c,_){y(c,e,_),d(e,l),d(l,s),d(e,a),d(e,f),d(f,n),d(e,r)},p(c,_){_&1&&t!==(t=c[1].name+"")&&O(s,t),_&1&&i!==(i=c[1].house+"")&&O(n,i)},d(c){c&&h(e)}}}function ge(o){let e,l,t,s,a,f,i,n,r,c,_=o[0].length+"",u,g,b=o[0],k=[];for(let v=0;v<b.length;v+=1)k[v]=se(le(o,b,v));return{c(){e=T("table"),l=T("thead"),t=T("td"),s=z("Name"),a=S(),f=T("td"),i=z("House"),n=S();for(let v=0;v<k.length;v+=1)k[v].c();r=S(),c=T("p"),u=z(_),g=z(" registrations"),this.h()},l(v){e=q(v,"TABLE",{class:!0});var w=$(e);l=q(w,"THEAD",{});var E=$(l);t=q(E,"TD",{class:!0});var A=$(t);s=D(A,"Name"),A.forEach(h),a=U(E),f=q(E,"TD",{class:!0});var p=$(f);i=D(p,"House"),p.forEach(h),E.forEach(h),n=U(w);for(let m=0;m<k.length;m+=1)k[m].l(w);w.forEach(h),r=U(v),c=q(v,"P",{});var N=$(c);u=D(N,_),g=D(N," registrations"),N.forEach(h),this.h()},h(){Q(t,"class","svelte-g1t6o9"),Q(f,"class","svelte-g1t6o9"),Q(e,"class","svelte-g1t6o9")},m(v,w){y(v,e,w),d(e,l),d(l,t),d(t,s),d(l,a),d(l,f),d(f,i),d(e,n);for(let E=0;E<k.length;E+=1)k[E].m(e,null);y(v,r,w),y(v,c,w),d(c,u),d(c,g)},p(v,[w]){if(w&1){b=v[0];let E;for(E=0;E<b.length;E+=1){const A=le(v,b,E);k[E]?k[E].p(A,w):(k[E]=se(A),k[E].c(),k[E].m(e,null))}for(;E<k.length;E+=1)k[E].d(1);k.length=b.length}w&1&&_!==(_=v[0].length+"")&&O(u,_)},i:H,o:H,d(v){v&&h(e),G(k,v),v&&h(r),v&&h(c)}}}function we(o,e,l){let{users:t}=e;return o.$$set=s=>{"users"in s&&l(0,t=s.users)},[t]}class Ee extends R{constructor(e){super();I(this,e,we,ge,X,{users:0})}}function ne(o,e,l){const t=o.slice();return t[3]=e[l],t}function re(o,e,l){const t=o.slice();return t[6]=e[l],t}function ie(o,e,l){const t=o.slice();return t[9]=e[l],t}function oe(o){let e,l=o[9].value+"",t;return{c(){e=T("td"),t=z(l),this.h()},l(s){e=q(s,"TD",{class:!0});var a=$(e);t=D(a,l),a.forEach(h),this.h()},h(){Q(e,"class","svelte-177xkck")},m(s,a){y(s,e,a),d(e,t)},p(s,a){a&2&&l!==(l=s[9].value+"")&&O(t,l)},d(s){s&&h(e)}}}function ae(o){let e,l=(o[6].votes.includes(o[3].id)?"X":" ")+"",t;return{c(){e=T("td"),t=z(l),this.h()},l(s){e=q(s,"TD",{class:!0});var a=$(e);t=D(a,l),a.forEach(h),this.h()},h(){Q(e,"class","svelte-177xkck")},m(s,a){y(s,e,a),d(e,t)},p(s,a){a&3&&l!==(l=(s[6].votes.includes(s[3].id)?"X":" ")+"")&&O(t,l)},d(s){s&&h(e)}}}function ce(o){let e,l,t=o[3].name+"",s,a,f,i=o[1],n=[];for(let r=0;r<i.length;r+=1)n[r]=ae(re(o,i,r));return{c(){e=T("tr"),l=T("td"),s=z(t),a=S();for(let r=0;r<n.length;r+=1)n[r].c();f=S(),this.h()},l(r){e=q(r,"TR",{class:!0});var c=$(e);l=q(c,"TD",{class:!0});var _=$(l);s=D(_,t),_.forEach(h),a=U(c);for(let u=0;u<n.length;u+=1)n[u].l(c);f=U(c),c.forEach(h),this.h()},h(){Q(l,"class","svelte-177xkck"),Q(e,"class","svelte-177xkck")},m(r,c){y(r,e,c),d(e,l),d(l,s),d(e,a);for(let _=0;_<n.length;_+=1)n[_].m(e,null);d(e,f)},p(r,c){if(c&1&&t!==(t=r[3].name+"")&&O(s,t),c&3){i=r[1];let _;for(_=0;_<i.length;_+=1){const u=re(r,i,_);n[_]?n[_].p(u,c):(n[_]=ae(u),n[_].c(),n[_].m(e,f))}for(;_<n.length;_+=1)n[_].d(1);n.length=i.length}},d(r){r&&h(e),G(n,r)}}}function Te(o){let e,l,t,s,a,f,i,n,r,c=o[2].length+"",_,u,g=Math.floor(o[2].length/o[0].length*100)+"",b,k,v=o[1],w=[];for(let p=0;p<v.length;p+=1)w[p]=oe(ie(o,v,p));let E=o[0],A=[];for(let p=0;p<E.length;p+=1)A[p]=ce(ne(o,E,p));return{c(){e=T("div"),l=T("table"),t=T("thead"),s=T("td"),a=z("User"),f=S();for(let p=0;p<w.length;p+=1)w[p].c();i=S();for(let p=0;p<A.length;p+=1)A[p].c();n=S(),r=T("p"),_=z(c),u=z(" answers ("),b=z(g),k=z("%)"),this.h()},l(p){e=q(p,"DIV",{class:!0});var N=$(e);l=q(N,"TABLE",{class:!0});var m=$(l);t=q(m,"THEAD",{class:!0});var V=$(t);s=q(V,"TD",{class:!0});var ee=$(s);a=D(ee,"User"),ee.forEach(h),f=U(V);for(let P=0;P<w.length;P+=1)w[P].l(V);V.forEach(h),i=U(m);for(let P=0;P<A.length;P+=1)A[P].l(m);m.forEach(h),N.forEach(h),n=U(p),r=q(p,"P",{});var L=$(r);_=D(L,c),u=D(L," answers ("),b=D(L,g),k=D(L,"%)"),L.forEach(h),this.h()},h(){Q(s,"class","svelte-177xkck"),Q(t,"class","svelte-177xkck"),Q(l,"class","svelte-177xkck"),Q(e,"class","w-wrapper svelte-177xkck")},m(p,N){y(p,e,N),d(e,l),d(l,t),d(t,s),d(s,a),d(t,f);for(let m=0;m<w.length;m+=1)w[m].m(t,null);d(l,i);for(let m=0;m<A.length;m+=1)A[m].m(l,null);y(p,n,N),y(p,r,N),d(r,_),d(r,u),d(r,b),d(r,k)},p(p,[N]){if(N&2){v=p[1];let m;for(m=0;m<v.length;m+=1){const V=ie(p,v,m);w[m]?w[m].p(V,N):(w[m]=oe(V),w[m].c(),w[m].m(t,null))}for(;m<w.length;m+=1)w[m].d(1);w.length=v.length}if(N&3){E=p[0];let m;for(m=0;m<E.length;m+=1){const V=ne(p,E,m);A[m]?A[m].p(V,N):(A[m]=ce(V),A[m].c(),A[m].m(l,null))}for(;m<A.length;m+=1)A[m].d(1);A.length=E.length}N&1&&g!==(g=Math.floor(p[2].length/p[0].length*100)+"")&&O(b,g)},i:H,o:H,d(p){p&&h(e),G(w,p),G(A,p),p&&h(n),p&&h(r)}}}function qe(o,e,l){let{users:t}=e,{answers:s}=e;const a=t.map(f=>{if(s.find(n=>n.votes.includes(f.id)))return{name:f.name,uid:f.id}}).filter(f=>!!f);return o.$$set=f=>{"users"in f&&l(0,t=f.users),"answers"in f&&l(1,s=f.answers)},[t,s,a]}class $e extends R{constructor(e){super();I(this,e,qe,Te,X,{users:0,answers:1})}}function ye(o){let e,l,t,s,a;function f(r,c){if(r[2]==="open")return Ae;if(r[2]==="voting-open")return Qe;if(r[2]==="closed")return De}let i=f(o),n=i&&i(o);return{c(){n&&n.c(),e=S(),l=T("button"),t=z("End Quiz"),this.h()},l(r){n&&n.l(r),e=U(r),l=q(r,"BUTTON",{class:!0});var c=$(l);t=D(c,"End Quiz"),c.forEach(h),this.h()},h(){Q(l,"class","svelte-vf2kwq")},m(r,c){n&&n.m(r,c),y(r,e,c),y(r,l,c),d(l,t),s||(a=M(l,"click",o[10]),s=!0)},p(r,c){i===(i=f(r))&&n?n.p(r,c):(n&&n.d(1),n=i&&i(r),n&&(n.c(),n.m(e.parentNode,e)))},i:H,o:H,d(r){n&&n.d(r),r&&h(e),r&&h(l),s=!1,a()}}}function ze(o){let e,l,t,s;const a=[Se,Ne],f=[];function i(n,r){return n[0].startsAt?0:1}return e=i(o),l=f[e]=a[e](o),{c(){l.c(),t=C()},l(n){l.l(n),t=C()},m(n,r){f[e].m(n,r),y(n,t,r),s=!0},p(n,r){let c=e;e=i(n),e===c?f[e].p(n,r):(K(),j(f[c],1,1,()=>{f[c]=null}),Z(),l=f[e],l?l.p(n,r):(l=f[e]=a[e](n),l.c()),B(l,1),l.m(t.parentNode,t))},i(n){s||(B(l),s=!0)},o(n){j(l),s=!1},d(n){f[e].d(n),n&&h(t)}}}function De(o){let e,l,t,s;return{c(){e=T("button"),l=z("Next Question"),this.h()},l(a){e=q(a,"BUTTON",{class:!0});var f=$(e);l=D(f,"Next Question"),f.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq")},m(a,f){y(a,e,f),d(e,l),t||(s=M(e,"click",o[9]),t=!0)},p:H,d(a){a&&h(e),t=!1,s()}}}function Qe(o){let e,l,t,s;return{c(){e=T("button"),l=z("Close Voting"),this.h()},l(a){e=q(a,"BUTTON",{class:!0});var f=$(e);l=D(f,"Close Voting"),f.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq")},m(a,f){y(a,e,f),d(e,l),t||(s=M(e,"click",o[8]),t=!0)},p:H,d(a){a&&h(e),t=!1,s()}}}function Ae(o){var f;let e,l=(((f=o[1])==null?void 0:f.type)==="voting"?"Start Voting":"End Question")+"",t,s,a;return{c(){e=T("button"),t=z(l),this.h()},l(i){e=q(i,"BUTTON",{class:!0});var n=$(e);t=D(n,l),n.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq")},m(i,n){y(i,e,n),d(e,t),s||(a=M(e,"click",o[7]),s=!0)},p(i,n){var r;n&2&&l!==(l=(((r=i[1])==null?void 0:r.type)==="voting"?"Start Voting":"End Question")+"")&&O(t,l)},d(i){i&&h(e),s=!1,a()}}}function Ne(o){let e,l,t,s,a,f,i;return{c(){e=T("button"),l=z("Start Quiz"),t=S(),s=T("button"),a=z("Start Quiz Timer"),this.h()},l(n){e=q(n,"BUTTON",{class:!0});var r=$(e);l=D(r,"Start Quiz"),r.forEach(h),t=U(n),s=q(n,"BUTTON",{class:!0});var c=$(s);a=D(c,"Start Quiz Timer"),c.forEach(h),this.h()},h(){Q(e,"class","svelte-vf2kwq"),Q(s,"class","svelte-vf2kwq")},m(n,r){y(n,e,r),d(e,l),y(n,t,r),y(n,s,r),d(s,a),f||(i=[M(e,"click",o[5]),M(s,"click",o[6])],f=!0)},p:H,i:H,o:H,d(n){n&&h(e),n&&h(t),n&&h(s),f=!1,_e(i)}}}function Se(o){let e,l;return e=new ke({props:{endsAt:o[0].startsAt}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.endsAt=t[0].startsAt),e.$set(a)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function Ue(o){let e,l,t,s=(o[2]?"."+o[2]:"")+"",a,f,i,n,r,c;const _=[ze,ye],u=[];function g(b,k){return b[3]==="registration"?0:b[3]==="running"?1:-1}return~(n=g(o))&&(r=u[n]=_[n](o)),{c(){e=T("header"),l=T("h1"),t=z(o[3]),a=z(s),f=S(),i=T("div"),r&&r.c(),this.h()},l(b){e=q(b,"HEADER",{class:!0});var k=$(e);l=q(k,"H1",{class:!0});var v=$(l);t=D(v,o[3]),a=D(v,s),v.forEach(h),f=U(k),i=q(k,"DIV",{class:!0});var w=$(i);r&&r.l(w),w.forEach(h),k.forEach(h),this.h()},h(){Q(l,"class","svelte-vf2kwq"),Q(i,"class","scroller svelte-vf2kwq"),Q(e,"class","svelte-vf2kwq")},m(b,k){y(b,e,k),d(e,l),d(l,t),d(l,a),d(e,f),d(e,i),~n&&u[n].m(i,null),c=!0},p(b,[k]){(!c||k&8)&&O(t,b[3]),(!c||k&4)&&s!==(s=(b[2]?"."+b[2]:"")+"")&&O(a,s);let v=n;n=g(b),n===v?~n&&u[n].p(b,k):(r&&(K(),j(u[v],1,1,()=>{u[v]=null}),Z()),~n?(r=u[n],r?r.p(b,k):(r=u[n]=_[n](b),r.c()),B(r,1),r.m(i,null)):r=null)},i(b){c||(B(r),c=!0)},o(b){j(r),c=!1},d(b){b&&h(e),~n&&u[n].d()}}}function He(o,e,l){let t,s,a;const f=ue();let{quiz:i}=e;const n=()=>{f("action","start-quiz")},r=()=>{f("action","start-quiz-timer")},c=()=>{f("action","close-question")},_=()=>{f("action","close-voting")},u=()=>{f("action","end-question")},g=()=>{confirm("End Quiz?")&&f("action","end-quiz")};return o.$$set=b=>{"quiz"in b&&l(0,i=b.quiz)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=i==null?void 0:i.activeQuestion),o.$$.dirty&1&&l(3,s=i==null?void 0:i.state),o.$$.dirty&2&&l(2,a=t==null?void 0:t.state)},[i,t,a,s,f,n,r,c,_,u,g]}class Be extends R{constructor(e){super();I(this,e,He,Ue,X,{quiz:0})}}const{window:je}=de;function Oe(o){let e,l;return{c(){e=T("p"),l=z("results")},l(t){e=q(t,"P",{});var s=$(e);l=D(s,"results"),s.forEach(h)},m(t,s){y(t,e,s),d(e,l)},p:H,i:H,o:H,d(t){t&&h(e)}}}function Ve(o){var n,r;let e,l=((n=o[1])==null?void 0:n.description)+"",t,s,a,f,i=((r=o[1])==null?void 0:r.answers)&&fe(o);return{c(){e=T("p"),t=z(l),s=S(),i&&i.c(),a=C()},l(c){e=q(c,"P",{});var _=$(e);t=D(_,l),_.forEach(h),s=U(c),i&&i.l(c),a=C()},m(c,_){y(c,e,_),d(e,t),y(c,s,_),i&&i.m(c,_),y(c,a,_),f=!0},p(c,_){var u,g;(!f||_&2)&&l!==(l=((u=c[1])==null?void 0:u.description)+"")&&O(t,l),((g=c[1])==null?void 0:g.answers)?i?(i.p(c,_),_&2&&B(i,1)):(i=fe(c),i.c(),B(i,1),i.m(a.parentNode,a)):i&&(K(),j(i,1,1,()=>{i=null}),Z())},i(c){f||(B(i),f=!0)},o(c){j(i),f=!1},d(c){c&&h(e),c&&h(s),i&&i.d(c),c&&h(a)}}}function Pe(o){let e,l;return e=new Ee({props:{users:o[0]}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.users=t[0]),e.$set(a)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function fe(o){let e,l;return e=new $e({props:{answers:o[1].answers,users:o[0]}}),{c(){F(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){W(e,t,s),l=!0},p(t,s){const a={};s&2&&(a.answers=t[1].answers),s&1&&(a.users=t[0]),e.$set(a)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Y(e,t)}}}function Me(o){let e,l,t,s,a,f,i,n;e=new Be({props:{quiz:o[3]}}),e.$on("action",o[7]);const r=[Pe,Ve,Oe],c=[];function _(u,g){return u[2]==="registration"?0:u[2]==="running"?1:u[2]==="results"?2:-1}return~(t=_(o))&&(s=c[t]=r[t](o)),{c(){F(e.$$.fragment),l=S(),s&&s.c(),a=C()},l(u){J(e.$$.fragment,u),l=U(u),s&&s.l(u),a=C()},m(u,g){W(e,u,g),y(u,l,g),~t&&c[t].m(u,g),y(u,a,g),f=!0,i||(n=M(je,"keydown",o[4]),i=!0)},p(u,[g]){const b={};g&8&&(b.quiz=u[3]),e.$set(b);let k=t;t=_(u),t===k?~t&&c[t].p(u,g):(s&&(K(),j(c[k],1,1,()=>{c[k]=null}),Z()),~t?(s=c[t],s?s.p(u,g):(s=c[t]=r[t](u),s.c()),B(s,1),s.m(a.parentNode,a)):s=null)},i(u){f||(B(e.$$.fragment,u),B(s),f=!0)},o(u){j(e.$$.fragment,u),j(s),f=!1},d(u){Y(e,u),u&&h(l),~t&&c[t].d(u),u&&h(a),i=!1,n()}}}function Ce(o,e,l){let t,s,a,f,i,n;x(o,be,u=>l(8,f=u)),x(o,te,u=>l(6,i=u)),x(o,te,u=>l(3,n=u));async function r({key:u}){if(u==="L"){const g=await me("api/quiz");console.log(await g.json())}}function c(u){pe("api/quiz",{action:u})}he(()=>{ve("quiz.admin",f)});const _=({detail:u})=>c(u);return o.$$.update=()=>{o.$$.dirty&64&&l(2,t=i==null?void 0:i.state),o.$$.dirty&64&&l(1,s=i==null?void 0:i.activeQuestion),o.$$.dirty&64&&l(0,a=i==null?void 0:i.users),o.$$.dirty&64&&i&&(window.quiz=i)},[a,s,t,n,r,c,i,_]}class Ge extends R{constructor(e){super();I(this,e,Ce,Me,X,{})}}export{Ge as default};
