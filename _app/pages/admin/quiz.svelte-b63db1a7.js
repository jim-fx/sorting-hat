var pe=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(o,e,l)=>e in o?pe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,le=(o,e)=>{for(var l in e||(e={}))me.call(e,l)&&te(o,l,e[l]);if(ee)for(var l of ee(e))ve.call(e,l)&&te(o,l,e[l]);return o};import{S as X,i as I,s as G,e as w,t as D,k as S,c as $,a as y,g as z,d,n as Q,b as A,f as T,G as m,h as H,H as B,X as R,r as K,u as j,w as F,x as O,ak as be,N as L,l as P,O as ke,j as J,m as W,o as Y,v as Z,a9 as se,A as ge,al as Ee}from"../../chunks/vendor-3c54998b.js";import{g as Te,p as we,e as $e}from"../../chunks/index-76bbb2a0.js";import{T as ye}from"../../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{u as Ne,q as De}from"../../chunks/stores-b0045d4a.js";function ne(o,e,l){const t=o.slice();return t[1]=e[l],t}function re(o){let e,l,t=o[1].name+"",s,n,c,r=o[1].house+"",a,i;return{c(){e=w("tr"),l=w("td"),s=D(t),n=S(),c=w("td"),a=D(r),i=S(),this.h()},l(f){e=$(f,"TR",{class:!0});var u=y(e);l=$(u,"TD",{class:!0});var _=y(l);s=z(_,t),_.forEach(d),n=Q(u),c=$(u,"TD",{class:!0});var h=y(c);a=z(h,r),h.forEach(d),i=Q(u),u.forEach(d),this.h()},h(){A(l,"class","svelte-g1t6o9"),A(c,"class","svelte-g1t6o9"),A(e,"class","svelte-g1t6o9")},m(f,u){T(f,e,u),m(e,l),m(l,s),m(e,n),m(e,c),m(c,a),m(e,i)},p(f,u){u&1&&t!==(t=f[1].name+"")&&H(s,t),u&1&&r!==(r=f[1].house+"")&&H(a,r)},d(f){f&&d(e)}}}function ze(o){let e,l,t,s,n,c,r,a,i,f,u=o[0].length+"",_,h,p=o[0],v=[];for(let b=0;b<p.length;b+=1)v[b]=re(ne(o,p,b));return{c(){e=w("table"),l=w("thead"),t=w("td"),s=D("Name"),n=S(),c=w("td"),r=D("House"),a=S();for(let b=0;b<v.length;b+=1)v[b].c();i=S(),f=w("p"),_=D(u),h=D(" registrations"),this.h()},l(b){e=$(b,"TABLE",{class:!0});var E=y(e);l=$(E,"THEAD",{});var N=y(l);t=$(N,"TD",{class:!0});var q=y(t);s=z(q,"Name"),q.forEach(d),n=Q(N),c=$(N,"TD",{class:!0});var g=y(c);r=z(g,"House"),g.forEach(d),N.forEach(d),a=Q(E);for(let k=0;k<v.length;k+=1)v[k].l(E);E.forEach(d),i=Q(b),f=$(b,"P",{});var U=y(f);_=z(U,u),h=z(U," registrations"),U.forEach(d),this.h()},h(){A(t,"class","svelte-g1t6o9"),A(c,"class","svelte-g1t6o9"),A(e,"class","svelte-g1t6o9")},m(b,E){T(b,e,E),m(e,l),m(l,t),m(t,s),m(l,n),m(l,c),m(c,r),m(e,a);for(let N=0;N<v.length;N+=1)v[N].m(e,null);T(b,i,E),T(b,f,E),m(f,_),m(f,h)},p(b,[E]){if(E&1){p=b[0];let N;for(N=0;N<p.length;N+=1){const q=ne(b,p,N);v[N]?v[N].p(q,E):(v[N]=re(q),v[N].c(),v[N].m(e,null))}for(;N<v.length;N+=1)v[N].d(1);v.length=p.length}E&1&&u!==(u=b[0].length+"")&&H(_,u)},i:B,o:B,d(b){b&&d(e),R(v,b),b&&d(i),b&&d(f)}}}function Ae(o,e,l){let{users:t}=e;return o.$$set=s=>{"users"in s&&l(0,t=s.users)},[t]}class qe extends X{constructor(e){super();I(this,e,Ae,ze,G,{users:0})}}function ie(o,e,l){const t=o.slice();return t[3]=e[l],t}function oe(o,e,l){const t=o.slice();return t[6]=e[l],t}function ae(o,e,l){const t=o.slice();return t[9]=e[l],t}function ce(o){let e,l=o[9].value+"",t;return{c(){e=w("td"),t=D(l),this.h()},l(s){e=$(s,"TD",{class:!0});var n=y(e);t=z(n,l),n.forEach(d),this.h()},h(){A(e,"class","svelte-177xkck")},m(s,n){T(s,e,n),m(e,t)},p(s,n){n&2&&l!==(l=s[9].value+"")&&H(t,l)},d(s){s&&d(e)}}}function fe(o){let e,l=(o[6].votes.includes(o[3].id)?"X":" ")+"",t;return{c(){e=w("td"),t=D(l),this.h()},l(s){e=$(s,"TD",{class:!0});var n=y(e);t=z(n,l),n.forEach(d),this.h()},h(){A(e,"class","svelte-177xkck")},m(s,n){T(s,e,n),m(e,t)},p(s,n){n&3&&l!==(l=(s[6].votes.includes(s[3].id)?"X":" ")+"")&&H(t,l)},d(s){s&&d(e)}}}function ue(o){let e,l,t=o[3].name+"",s,n,c,r=o[1],a=[];for(let i=0;i<r.length;i+=1)a[i]=fe(oe(o,r,i));return{c(){e=w("tr"),l=w("td"),s=D(t),n=S();for(let i=0;i<a.length;i+=1)a[i].c();c=S(),this.h()},l(i){e=$(i,"TR",{class:!0});var f=y(e);l=$(f,"TD",{class:!0});var u=y(l);s=z(u,t),u.forEach(d),n=Q(f);for(let _=0;_<a.length;_+=1)a[_].l(f);c=Q(f),f.forEach(d),this.h()},h(){A(l,"class","svelte-177xkck"),A(e,"class","svelte-177xkck")},m(i,f){T(i,e,f),m(e,l),m(l,s),m(e,n);for(let u=0;u<a.length;u+=1)a[u].m(e,null);m(e,c)},p(i,f){if(f&1&&t!==(t=i[3].name+"")&&H(s,t),f&3){r=i[1];let u;for(u=0;u<r.length;u+=1){const _=oe(i,r,u);a[u]?a[u].p(_,f):(a[u]=fe(_),a[u].c(),a[u].m(e,c))}for(;u<a.length;u+=1)a[u].d(1);a.length=r.length}},d(i){i&&d(e),R(a,i)}}}function Se(o){let e,l,t,s,n,c,r,a,i,f=o[2].length+"",u,_,h=Math.floor(o[2].length/o[0].length*100)+"",p,v,b=o[1],E=[];for(let g=0;g<b.length;g+=1)E[g]=ce(ae(o,b,g));let N=o[0],q=[];for(let g=0;g<N.length;g+=1)q[g]=ue(ie(o,N,g));return{c(){e=w("div"),l=w("table"),t=w("thead"),s=w("td"),n=D("User"),c=S();for(let g=0;g<E.length;g+=1)E[g].c();r=S();for(let g=0;g<q.length;g+=1)q[g].c();a=S(),i=w("p"),u=D(f),_=D(" answers ("),p=D(h),v=D("%)"),this.h()},l(g){e=$(g,"DIV",{class:!0});var U=y(e);l=$(U,"TABLE",{class:!0});var k=y(l);t=$(k,"THEAD",{class:!0});var V=y(t);s=$(V,"TD",{class:!0});var x=y(s);n=z(x,"User"),x.forEach(d),c=Q(V);for(let C=0;C<E.length;C+=1)E[C].l(V);V.forEach(d),r=Q(k);for(let C=0;C<q.length;C+=1)q[C].l(k);k.forEach(d),U.forEach(d),a=Q(g),i=$(g,"P",{});var M=y(i);u=z(M,f),_=z(M," answers ("),p=z(M,h),v=z(M,"%)"),M.forEach(d),this.h()},h(){A(s,"class","svelte-177xkck"),A(t,"class","svelte-177xkck"),A(l,"class","svelte-177xkck"),A(e,"class","w-wrapper svelte-177xkck")},m(g,U){T(g,e,U),m(e,l),m(l,t),m(t,s),m(s,n),m(t,c);for(let k=0;k<E.length;k+=1)E[k].m(t,null);m(l,r);for(let k=0;k<q.length;k+=1)q[k].m(l,null);T(g,a,U),T(g,i,U),m(i,u),m(i,_),m(i,p),m(i,v)},p(g,[U]){if(U&2){b=g[1];let k;for(k=0;k<b.length;k+=1){const V=ae(g,b,k);E[k]?E[k].p(V,U):(E[k]=ce(V),E[k].c(),E[k].m(t,null))}for(;k<E.length;k+=1)E[k].d(1);E.length=b.length}if(U&3){N=g[0];let k;for(k=0;k<N.length;k+=1){const V=ie(g,N,k);q[k]?q[k].p(V,U):(q[k]=ue(V),q[k].c(),q[k].m(l,null))}for(;k<q.length;k+=1)q[k].d(1);q.length=N.length}U&1&&h!==(h=Math.floor(g[2].length/g[0].length*100)+"")&&H(p,h)},i:B,o:B,d(g){g&&d(e),R(E,g),R(q,g),g&&d(a),g&&d(i)}}}function Qe(o,e,l){let{users:t}=e,{answers:s}=e;const n=t.map(c=>{if(s.find(a=>a.votes.includes(c.id)))return{name:c.name,uid:c.id}}).filter(c=>!!c);return o.$$set=c=>{"users"in c&&l(0,t=c.users),"answers"in c&&l(1,s=c.answers)},[t,s,n]}class Ue extends X{constructor(e){super();I(this,e,Qe,Se,G,{users:0,answers:1})}}function Be(o){let e,l,t,s,n;function c(i,f){if(i[2]==="open")return Ve;if(i[2]==="voting-open")return je;if(i[2]==="closed")return He}let r=c(o),a=r&&r(o);return{c(){a&&a.c(),e=S(),l=w("button"),t=D("End Quiz"),this.h()},l(i){a&&a.l(i),e=Q(i),l=$(i,"BUTTON",{class:!0});var f=y(l);t=z(f,"End Quiz"),f.forEach(d),this.h()},h(){A(l,"class","svelte-pg62n")},m(i,f){a&&a.m(i,f),T(i,e,f),T(i,l,f),m(l,t),s||(n=L(l,"click",o[12]),s=!0)},p(i,f){r===(r=c(i))&&a?a.p(i,f):(a&&a.d(1),a=r&&r(i),a&&(a.c(),a.m(e.parentNode,e)))},i:B,o:B,d(i){a&&a.d(i),i&&d(e),i&&d(l),s=!1,n()}}}function Oe(o){let e,l,t,s,n,c,r,a,i;const f=[Ce,Le],u=[];function _(h,p){return h[0].startsAt?0:h[0].startsAt?-1:1}return~(s=_(o))&&(n=u[s]=f[s](o)),{c(){e=w("button"),l=D("Start Quiz"),t=S(),n&&n.c(),c=P(),this.h()},l(h){e=$(h,"BUTTON",{class:!0});var p=y(e);l=z(p,"Start Quiz"),p.forEach(d),t=Q(h),n&&n.l(h),c=P(),this.h()},h(){A(e,"class","svelte-pg62n")},m(h,p){T(h,e,p),m(e,l),T(h,t,p),~s&&u[s].m(h,p),T(h,c,p),r=!0,a||(i=L(e,"click",o[5]),a=!0)},p(h,p){let v=s;s=_(h),s===v?~s&&u[s].p(h,p):(n&&(K(),j(u[v],1,1,()=>{u[v]=null}),F()),~s?(n=u[s],n?n.p(h,p):(n=u[s]=f[s](h),n.c()),O(n,1),n.m(c.parentNode,c)):n=null)},i(h){r||(O(n),r=!0)},o(h){j(n),r=!1},d(h){h&&d(e),h&&d(t),~s&&u[s].d(h),h&&d(c),a=!1,i()}}}function He(o){let e,l,t,s;return{c(){e=w("button"),l=D("Next Question"),this.h()},l(n){e=$(n,"BUTTON",{class:!0});var c=y(e);l=z(c,"Next Question"),c.forEach(d),this.h()},h(){A(e,"class","svelte-pg62n")},m(n,c){T(n,e,c),m(e,l),t||(s=L(e,"click",o[11]),t=!0)},p:B,d(n){n&&d(e),t=!1,s()}}}function je(o){let e,l,t,s;return{c(){e=w("button"),l=D("Close Voting"),this.h()},l(n){e=$(n,"BUTTON",{class:!0});var c=y(e);l=z(c,"Close Voting"),c.forEach(d),this.h()},h(){A(e,"class","svelte-pg62n")},m(n,c){T(n,e,c),m(e,l),t||(s=L(e,"click",o[10]),t=!0)},p:B,d(n){n&&d(e),t=!1,s()}}}function Ve(o){var c;let e,l=(((c=o[1])==null?void 0:c.type)==="voting"?"Start Voting":"End Question")+"",t,s,n;return{c(){e=w("button"),t=D(l),this.h()},l(r){e=$(r,"BUTTON",{class:!0});var a=y(e);t=z(a,l),a.forEach(d),this.h()},h(){A(e,"class","svelte-pg62n")},m(r,a){T(r,e,a),m(e,t),s||(n=L(e,"click",o[9]),s=!0)},p(r,a){var i;a&2&&l!==(l=(((i=r[1])==null?void 0:i.type)==="voting"?"Start Voting":"End Question")+"")&&H(t,l)},d(r){r&&d(e),s=!1,n()}}}function Le(o){let e,l,t,s,n,c,r,a,i,f;return{c(){e=w("button"),l=D("Start in 10s"),t=S(),s=w("button"),n=D("Start in 1m"),c=S(),r=w("button"),a=D("Start in 5m"),this.h()},l(u){e=$(u,"BUTTON",{class:!0});var _=y(e);l=z(_,"Start in 10s"),_.forEach(d),t=Q(u),s=$(u,"BUTTON",{class:!0});var h=y(s);n=z(h,"Start in 1m"),h.forEach(d),c=Q(u),r=$(u,"BUTTON",{class:!0});var p=y(r);a=z(p,"Start in 5m"),p.forEach(d),this.h()},h(){A(e,"class","svelte-pg62n"),A(s,"class","svelte-pg62n"),A(r,"class","svelte-pg62n")},m(u,_){T(u,e,_),m(e,l),T(u,t,_),T(u,s,_),m(s,n),T(u,c,_),T(u,r,_),m(r,a),i||(f=[L(e,"click",o[6]),L(s,"click",o[7]),L(r,"click",o[8])],i=!0)},p:B,i:B,o:B,d(u){u&&d(e),u&&d(t),u&&d(s),u&&d(c),u&&d(r),i=!1,ke(f)}}}function Ce(o){let e,l;return e=new ye({props:{endsAt:o[0].startsAt}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const n={};s&1&&(n.endsAt=t[0].startsAt),e.$set(n)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Pe(o){let e,l,t,s=(o[2]?"."+o[2]:"")+"",n,c,r,a,i,f;const u=[Oe,Be],_=[];function h(p,v){return p[3]==="registration"?0:p[3]==="running"?1:-1}return~(a=h(o))&&(i=_[a]=u[a](o)),{c(){e=w("header"),l=w("h1"),t=D(o[3]),n=D(s),c=S(),r=w("div"),i&&i.c(),this.h()},l(p){e=$(p,"HEADER",{class:!0});var v=y(e);l=$(v,"H1",{class:!0});var b=y(l);t=z(b,o[3]),n=z(b,s),b.forEach(d),c=Q(v),r=$(v,"DIV",{class:!0});var E=y(r);i&&i.l(E),E.forEach(d),v.forEach(d),this.h()},h(){A(l,"class","svelte-pg62n"),A(r,"class","scroller svelte-pg62n"),A(e,"class","svelte-pg62n")},m(p,v){T(p,e,v),m(e,l),m(l,t),m(l,n),m(e,c),m(e,r),~a&&_[a].m(r,null),f=!0},p(p,[v]){(!f||v&8)&&H(t,p[3]),(!f||v&4)&&s!==(s=(p[2]?"."+p[2]:"")+"")&&H(n,s);let b=a;a=h(p),a===b?~a&&_[a].p(p,v):(i&&(K(),j(_[b],1,1,()=>{_[b]=null}),F()),~a?(i=_[a],i?i.p(p,v):(i=_[a]=u[a](p),i.c()),O(i,1),i.m(r,null)):i=null)},i(p){f||(O(i),f=!0)},o(p){j(i),f=!1},d(p){p&&d(e),~a&&_[a].d()}}}function Me(o,e,l){let t,s,n;const c=be();let{quiz:r}=e;function a(E,N){c("action",{type:E,data:N})}const i=()=>a("start-quiz"),f=()=>a("start-quiz-timer",{time:10*1e3}),u=()=>a("start-quiz-timer",{time:60*1e3}),_=()=>a("start-quiz-timer",{time:60*1e3*5}),h=()=>a("close-question"),p=()=>a("close-voting"),v=()=>a("end-question"),b=()=>confirm("End Quiz?")&&a("end-quiz");return o.$$set=E=>{"quiz"in E&&l(0,r=E.quiz)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=r==null?void 0:r.activeQuestion),o.$$.dirty&1&&l(3,s=r==null?void 0:r.state),o.$$.dirty&2&&l(2,n=t==null?void 0:t.state)},[r,t,n,s,a,i,f,u,_,h,p,v,b]}class Re extends X{constructor(e){super();I(this,e,Me,Pe,G,{quiz:0})}}const{window:Xe}=Ee;function _e(o,e,l){const t=o.slice();return t[9]=e[l],t}function Ie(o){let e,l;return{c(){e=w("p"),l=D("results")},l(t){e=$(t,"P",{});var s=y(e);l=z(s,"results"),s.forEach(d)},m(t,s){T(t,e,s),m(e,l)},p:B,i:B,o:B,d(t){t&&d(e)}}}function Ge(o){var a,i;let e,l=((a=o[2])==null?void 0:a.description)+"",t,s,n,c,r=((i=o[2])==null?void 0:i.answers)&&he(o);return{c(){e=w("p"),t=D(l),s=S(),r&&r.c(),n=P()},l(f){e=$(f,"P",{});var u=y(e);t=z(u,l),u.forEach(d),s=Q(f),r&&r.l(f),n=P()},m(f,u){T(f,e,u),m(e,t),T(f,s,u),r&&r.m(f,u),T(f,n,u),c=!0},p(f,u){var _,h;(!c||u&4)&&l!==(l=((_=f[2])==null?void 0:_.description)+"")&&H(t,l),((h=f[2])==null?void 0:h.answers)?r?(r.p(f,u),u&4&&O(r,1)):(r=he(f),r.c(),O(r,1),r.m(n.parentNode,n)):r&&(K(),j(r,1,1,()=>{r=null}),F())},i(f){c||(O(r),c=!0)},o(f){j(r),c=!1},d(f){f&&d(e),f&&d(s),r&&r.d(f),f&&d(n)}}}function Ke(o){let e,l,t,s=o[0].types,n=[];for(let c=0;c<s.length;c+=1)n[c]=de(_e(o,s,c));return l=new qe({props:{users:o[1]}}),{c(){for(let c=0;c<n.length;c+=1)n[c].c();e=S(),J(l.$$.fragment)},l(c){for(let r=0;r<n.length;r+=1)n[r].l(c);e=Q(c),W(l.$$.fragment,c)},m(c,r){for(let a=0;a<n.length;a+=1)n[a].m(c,r);T(c,e,r),Y(l,c,r),t=!0},p(c,r){if(r&33){s=c[0].types;let i;for(i=0;i<s.length;i+=1){const f=_e(c,s,i);n[i]?n[i].p(f,r):(n[i]=de(f),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=s.length}const a={};r&2&&(a.users=c[1]),l.$set(a)},i(c){t||(O(l.$$.fragment,c),t=!0)},o(c){j(l.$$.fragment,c),t=!1},d(c){R(n,c),c&&d(e),Z(l,c)}}}function he(o){let e,l;return e=new Ue({props:{answers:o[2].answers,users:o[1]}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const n={};s&4&&(n.answers=t[2].answers),s&2&&(n.users=t[1]),e.$set(n)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function de(o){let e,l,t=o[9]+"",s,n,c;function r(){return o[7](o[9])}return{c(){e=w("button"),l=D("Load "),s=D(t)},l(a){e=$(a,"BUTTON",{});var i=y(e);l=z(i,"Load "),s=z(i,t),i.forEach(d)},m(a,i){T(a,e,i),m(e,l),m(e,s),n||(c=L(e,"click",r),n=!0)},p(a,i){o=a,i&1&&t!==(t=o[9]+"")&&H(s,t)},d(a){a&&d(e),n=!1,c()}}}function Fe(o){let e,l,t,s,n,c,r,a;e=new Re({props:{quiz:o[0]}}),e.$on("action",o[6]);const i=[Ke,Ge,Ie],f=[];function u(_,h){return _[3]==="registration"?0:_[3]==="running"?1:_[3]==="results"?2:-1}return~(t=u(o))&&(s=f[t]=i[t](o)),{c(){J(e.$$.fragment),l=S(),s&&s.c(),n=P()},l(_){W(e.$$.fragment,_),l=Q(_),s&&s.l(_),n=P()},m(_,h){Y(e,_,h),T(_,l,h),~t&&f[t].m(_,h),T(_,n,h),c=!0,r||(a=L(Xe,"keydown",o[4]),r=!0)},p(_,[h]){const p={};h&1&&(p.quiz=_[0]),e.$set(p);let v=t;t=u(_),t===v?~t&&f[t].p(_,h):(s&&(K(),j(f[v],1,1,()=>{f[v]=null}),F()),~t?(s=f[t],s?s.p(_,h):(s=f[t]=i[t](_),s.c()),O(s,1),s.m(n.parentNode,n)):s=null)},i(_){c||(O(e.$$.fragment,_),O(s),c=!0)},o(_){j(e.$$.fragment,_),j(s),c=!1},d(_){Z(e,_),_&&d(l),~t&&f[t].d(_),_&&d(n),r=!1,a()}}}function Je(o,e,l){let t,s,n,c,r;se(o,Ne,_=>l(8,c=_)),se(o,De,_=>l(0,r=_));async function a({key:_}){if(_==="L"){const h=await Te("api/quiz");console.log(await h.json())}}function i(_,h){we("api/quiz",le({action:_},h))}ge(()=>{$e("quiz.admin",c)});const f=({detail:{type:_,data:h}})=>i(_,h),u=_=>i("load-type",{type:_});return o.$$.update=()=>{o.$$.dirty&1&&l(3,t=r==null?void 0:r.state),o.$$.dirty&1&&l(2,s=r==null?void 0:r.activeQuestion),o.$$.dirty&1&&l(1,n=r==null?void 0:r.users),o.$$.dirty&1&&r&&(window.quiz=r)},[r,n,s,t,a,i,f,u]}class tt extends X{constructor(e){super();I(this,e,Je,Fe,G,{})}}export{tt as default};
