var pe=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(o,e,l)=>e in o?pe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[e]=l,le=(o,e)=>{for(var l in e||(e={}))me.call(e,l)&&te(o,l,e[l]);if(ee)for(var l of ee(e))ve.call(e,l)&&te(o,l,e[l]);return o};import{S as X,i as I,s as G,e as w,t as N,k as S,c as T,a as $,g as z,d as h,n as U,b as A,f as D,G as d,h as O,H as B,X as R,r as K,u as j,w as F,x as H,ak as be,N as L,l as P,O as ke,j as J,m as W,o as Y,v as Z,a9 as se,A as ge,al as Ee}from"../../chunks/vendor-3c54998b.js";import{g as we,p as Te,e as $e}from"../../chunks/index-76bbb2a0.js";import{T as ye}from"../../chunks/Crest.svelte_svelte_type_style_lang-451e511b.js";import{u as De,q as Ne}from"../../chunks/stores-b0045d4a.js";function ne(o,e,l){const t=o.slice();return t[1]=e[l],t}function re(o){let e,l,t=o[1].name+"",s,c,i,a=o[1].house+"",n,r;return{c(){e=w("tr"),l=w("td"),s=N(t),c=S(),i=w("td"),n=N(a),r=S(),this.h()},l(u){e=T(u,"TR",{class:!0});var _=$(e);l=T(_,"TD",{class:!0});var f=$(l);s=z(f,t),f.forEach(h),c=U(_),i=T(_,"TD",{class:!0});var g=$(i);n=z(g,a),g.forEach(h),r=U(_),_.forEach(h),this.h()},h(){A(l,"class","svelte-g1t6o9"),A(i,"class","svelte-g1t6o9"),A(e,"class","svelte-g1t6o9")},m(u,_){D(u,e,_),d(e,l),d(l,s),d(e,c),d(e,i),d(i,n),d(e,r)},p(u,_){_&1&&t!==(t=u[1].name+"")&&O(s,t),_&1&&a!==(a=u[1].house+"")&&O(n,a)},d(u){u&&h(e)}}}function ze(o){let e,l,t,s,c,i,a,n,r,u,_=o[0].length+"",f,g,k=o[0],b=[];for(let v=0;v<k.length;v+=1)b[v]=re(ne(o,k,v));return{c(){e=w("table"),l=w("thead"),t=w("td"),s=N("Name"),c=S(),i=w("td"),a=N("House"),n=S();for(let v=0;v<b.length;v+=1)b[v].c();r=S(),u=w("p"),f=N(_),g=N(" registrations"),this.h()},l(v){e=T(v,"TABLE",{class:!0});var E=$(e);l=T(E,"THEAD",{});var y=$(l);t=T(y,"TD",{class:!0});var Q=$(t);s=z(Q,"Name"),Q.forEach(h),c=U(y),i=T(y,"TD",{class:!0});var m=$(i);a=z(m,"House"),m.forEach(h),y.forEach(h),n=U(E);for(let p=0;p<b.length;p+=1)b[p].l(E);E.forEach(h),r=U(v),u=T(v,"P",{});var q=$(u);f=z(q,_),g=z(q," registrations"),q.forEach(h),this.h()},h(){A(t,"class","svelte-g1t6o9"),A(i,"class","svelte-g1t6o9"),A(e,"class","svelte-g1t6o9")},m(v,E){D(v,e,E),d(e,l),d(l,t),d(t,s),d(l,c),d(l,i),d(i,a),d(e,n);for(let y=0;y<b.length;y+=1)b[y].m(e,null);D(v,r,E),D(v,u,E),d(u,f),d(u,g)},p(v,[E]){if(E&1){k=v[0];let y;for(y=0;y<k.length;y+=1){const Q=ne(v,k,y);b[y]?b[y].p(Q,E):(b[y]=re(Q),b[y].c(),b[y].m(e,null))}for(;y<b.length;y+=1)b[y].d(1);b.length=k.length}E&1&&_!==(_=v[0].length+"")&&O(f,_)},i:B,o:B,d(v){v&&h(e),R(b,v),v&&h(r),v&&h(u)}}}function Ae(o,e,l){let{users:t}=e;return o.$$set=s=>{"users"in s&&l(0,t=s.users)},[t]}class Qe extends X{constructor(e){super();I(this,e,Ae,ze,G,{users:0})}}function ie(o,e,l){const t=o.slice();return t[3]=e[l],t}function oe(o,e,l){const t=o.slice();return t[6]=e[l],t}function ae(o,e,l){const t=o.slice();return t[9]=e[l],t}function ce(o){let e,l=o[9].value+"",t;return{c(){e=w("td"),t=N(l),this.h()},l(s){e=T(s,"TD",{class:!0});var c=$(e);t=z(c,l),c.forEach(h),this.h()},h(){A(e,"class","svelte-177xkck")},m(s,c){D(s,e,c),d(e,t)},p(s,c){c&2&&l!==(l=s[9].value+"")&&O(t,l)},d(s){s&&h(e)}}}function ue(o){let e,l=(o[6].votes.includes(o[3].id)?"X":" ")+"",t;return{c(){e=w("td"),t=N(l),this.h()},l(s){e=T(s,"TD",{class:!0});var c=$(e);t=z(c,l),c.forEach(h),this.h()},h(){A(e,"class","svelte-177xkck")},m(s,c){D(s,e,c),d(e,t)},p(s,c){c&3&&l!==(l=(s[6].votes.includes(s[3].id)?"X":" ")+"")&&O(t,l)},d(s){s&&h(e)}}}function fe(o){let e,l,t=o[3].name+"",s,c,i,a=o[1],n=[];for(let r=0;r<a.length;r+=1)n[r]=ue(oe(o,a,r));return{c(){e=w("tr"),l=w("td"),s=N(t),c=S();for(let r=0;r<n.length;r+=1)n[r].c();i=S(),this.h()},l(r){e=T(r,"TR",{class:!0});var u=$(e);l=T(u,"TD",{class:!0});var _=$(l);s=z(_,t),_.forEach(h),c=U(u);for(let f=0;f<n.length;f+=1)n[f].l(u);i=U(u),u.forEach(h),this.h()},h(){A(l,"class","svelte-177xkck"),A(e,"class","svelte-177xkck")},m(r,u){D(r,e,u),d(e,l),d(l,s),d(e,c);for(let _=0;_<n.length;_+=1)n[_].m(e,null);d(e,i)},p(r,u){if(u&1&&t!==(t=r[3].name+"")&&O(s,t),u&3){a=r[1];let _;for(_=0;_<a.length;_+=1){const f=oe(r,a,_);n[_]?n[_].p(f,u):(n[_]=ue(f),n[_].c(),n[_].m(e,i))}for(;_<n.length;_+=1)n[_].d(1);n.length=a.length}},d(r){r&&h(e),R(n,r)}}}function qe(o){let e,l,t,s,c,i,a,n,r,u=o[2].length+"",_,f,g=Math.floor(o[2].length/o[0].length*100)+"",k,b,v=o[1],E=[];for(let m=0;m<v.length;m+=1)E[m]=ce(ae(o,v,m));let y=o[0],Q=[];for(let m=0;m<y.length;m+=1)Q[m]=fe(ie(o,y,m));return{c(){e=w("div"),l=w("table"),t=w("thead"),s=w("td"),c=N("User"),i=S();for(let m=0;m<E.length;m+=1)E[m].c();a=S();for(let m=0;m<Q.length;m+=1)Q[m].c();n=S(),r=w("p"),_=N(u),f=N(" answers ("),k=N(g),b=N("%)"),this.h()},l(m){e=T(m,"DIV",{class:!0});var q=$(e);l=T(q,"TABLE",{class:!0});var p=$(l);t=T(p,"THEAD",{class:!0});var V=$(t);s=T(V,"TD",{class:!0});var x=$(s);c=z(x,"User"),x.forEach(h),i=U(V);for(let C=0;C<E.length;C+=1)E[C].l(V);V.forEach(h),a=U(p);for(let C=0;C<Q.length;C+=1)Q[C].l(p);p.forEach(h),q.forEach(h),n=U(m),r=T(m,"P",{});var M=$(r);_=z(M,u),f=z(M," answers ("),k=z(M,g),b=z(M,"%)"),M.forEach(h),this.h()},h(){A(s,"class","svelte-177xkck"),A(t,"class","svelte-177xkck"),A(l,"class","svelte-177xkck"),A(e,"class","w-wrapper svelte-177xkck")},m(m,q){D(m,e,q),d(e,l),d(l,t),d(t,s),d(s,c),d(t,i);for(let p=0;p<E.length;p+=1)E[p].m(t,null);d(l,a);for(let p=0;p<Q.length;p+=1)Q[p].m(l,null);D(m,n,q),D(m,r,q),d(r,_),d(r,f),d(r,k),d(r,b)},p(m,[q]){if(q&2){v=m[1];let p;for(p=0;p<v.length;p+=1){const V=ae(m,v,p);E[p]?E[p].p(V,q):(E[p]=ce(V),E[p].c(),E[p].m(t,null))}for(;p<E.length;p+=1)E[p].d(1);E.length=v.length}if(q&3){y=m[0];let p;for(p=0;p<y.length;p+=1){const V=ie(m,y,p);Q[p]?Q[p].p(V,q):(Q[p]=fe(V),Q[p].c(),Q[p].m(l,null))}for(;p<Q.length;p+=1)Q[p].d(1);Q.length=y.length}q&1&&g!==(g=Math.floor(m[2].length/m[0].length*100)+"")&&O(k,g)},i:B,o:B,d(m){m&&h(e),R(E,m),R(Q,m),m&&h(n),m&&h(r)}}}function Se(o,e,l){let{users:t}=e,{answers:s}=e;const c=t.map(i=>{if(s.find(n=>n.votes.includes(i.id)))return{name:i.name,uid:i.id}}).filter(i=>!!i);return o.$$set=i=>{"users"in i&&l(0,t=i.users),"answers"in i&&l(1,s=i.answers)},[t,s,c]}class Ue extends X{constructor(e){super();I(this,e,Se,qe,G,{users:0,answers:1})}}function Be(o){let e,l,t,s,c;function i(r,u){if(r[2]==="open")return Ve;if(r[2]==="voting-open")return je;if(r[2]==="closed")return Oe}let a=i(o),n=a&&a(o);return{c(){n&&n.c(),e=S(),l=w("button"),t=N("End Quiz"),this.h()},l(r){n&&n.l(r),e=U(r),l=T(r,"BUTTON",{class:!0});var u=$(l);t=z(u,"End Quiz"),u.forEach(h),this.h()},h(){A(l,"class","svelte-pg62n")},m(r,u){n&&n.m(r,u),D(r,e,u),D(r,l,u),d(l,t),s||(c=L(l,"click",o[10]),s=!0)},p(r,u){a===(a=i(r))&&n?n.p(r,u):(n&&n.d(1),n=a&&a(r),n&&(n.c(),n.m(e.parentNode,e)))},i:B,o:B,d(r){n&&n.d(r),r&&h(e),r&&h(l),s=!1,c()}}}function He(o){let e,l,t,s;const c=[Ce,Le],i=[];function a(n,r){return n[0].startsAt?0:1}return e=a(o),l=i[e]=c[e](o),{c(){l.c(),t=P()},l(n){l.l(n),t=P()},m(n,r){i[e].m(n,r),D(n,t,r),s=!0},p(n,r){let u=e;e=a(n),e===u?i[e].p(n,r):(K(),j(i[u],1,1,()=>{i[u]=null}),F(),l=i[e],l?l.p(n,r):(l=i[e]=c[e](n),l.c()),H(l,1),l.m(t.parentNode,t))},i(n){s||(H(l),s=!0)},o(n){j(l),s=!1},d(n){i[e].d(n),n&&h(t)}}}function Oe(o){let e,l,t,s;return{c(){e=w("button"),l=N("Next Question"),this.h()},l(c){e=T(c,"BUTTON",{class:!0});var i=$(e);l=z(i,"Next Question"),i.forEach(h),this.h()},h(){A(e,"class","svelte-pg62n")},m(c,i){D(c,e,i),d(e,l),t||(s=L(e,"click",o[9]),t=!0)},p:B,d(c){c&&h(e),t=!1,s()}}}function je(o){let e,l,t,s;return{c(){e=w("button"),l=N("Close Voting"),this.h()},l(c){e=T(c,"BUTTON",{class:!0});var i=$(e);l=z(i,"Close Voting"),i.forEach(h),this.h()},h(){A(e,"class","svelte-pg62n")},m(c,i){D(c,e,i),d(e,l),t||(s=L(e,"click",o[8]),t=!0)},p:B,d(c){c&&h(e),t=!1,s()}}}function Ve(o){var i;let e,l=(((i=o[1])==null?void 0:i.type)==="voting"?"Start Voting":"End Question")+"",t,s,c;return{c(){e=w("button"),t=N(l),this.h()},l(a){e=T(a,"BUTTON",{class:!0});var n=$(e);t=z(n,l),n.forEach(h),this.h()},h(){A(e,"class","svelte-pg62n")},m(a,n){D(a,e,n),d(e,t),s||(c=L(e,"click",o[7]),s=!0)},p(a,n){var r;n&2&&l!==(l=(((r=a[1])==null?void 0:r.type)==="voting"?"Start Voting":"End Question")+"")&&O(t,l)},d(a){a&&h(e),s=!1,c()}}}function Le(o){let e,l,t,s,c,i,a;return{c(){e=w("button"),l=N("Start Quiz"),t=S(),s=w("button"),c=N("Start Quiz Timer"),this.h()},l(n){e=T(n,"BUTTON",{class:!0});var r=$(e);l=z(r,"Start Quiz"),r.forEach(h),t=U(n),s=T(n,"BUTTON",{class:!0});var u=$(s);c=z(u,"Start Quiz Timer"),u.forEach(h),this.h()},h(){A(e,"class","svelte-pg62n"),A(s,"class","svelte-pg62n")},m(n,r){D(n,e,r),d(e,l),D(n,t,r),D(n,s,r),d(s,c),i||(a=[L(e,"click",o[5]),L(s,"click",o[6])],i=!0)},p:B,i:B,o:B,d(n){n&&h(e),n&&h(t),n&&h(s),i=!1,ke(a)}}}function Ce(o){let e,l;return e=new ye({props:{endsAt:o[0].startsAt}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const c={};s&1&&(c.endsAt=t[0].startsAt),e.$set(c)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function Pe(o){let e,l,t,s=(o[2]?"."+o[2]:"")+"",c,i,a,n,r,u;const _=[He,Be],f=[];function g(k,b){return k[3]==="registration"?0:k[3]==="running"?1:-1}return~(n=g(o))&&(r=f[n]=_[n](o)),{c(){e=w("header"),l=w("h1"),t=N(o[3]),c=N(s),i=S(),a=w("div"),r&&r.c(),this.h()},l(k){e=T(k,"HEADER",{class:!0});var b=$(e);l=T(b,"H1",{class:!0});var v=$(l);t=z(v,o[3]),c=z(v,s),v.forEach(h),i=U(b),a=T(b,"DIV",{class:!0});var E=$(a);r&&r.l(E),E.forEach(h),b.forEach(h),this.h()},h(){A(l,"class","svelte-pg62n"),A(a,"class","scroller svelte-pg62n"),A(e,"class","svelte-pg62n")},m(k,b){D(k,e,b),d(e,l),d(l,t),d(l,c),d(e,i),d(e,a),~n&&f[n].m(a,null),u=!0},p(k,[b]){(!u||b&8)&&O(t,k[3]),(!u||b&4)&&s!==(s=(k[2]?"."+k[2]:"")+"")&&O(c,s);let v=n;n=g(k),n===v?~n&&f[n].p(k,b):(r&&(K(),j(f[v],1,1,()=>{f[v]=null}),F()),~n?(r=f[n],r?r.p(k,b):(r=f[n]=_[n](k),r.c()),H(r,1),r.m(a,null)):r=null)},i(k){u||(H(r),u=!0)},o(k){j(r),u=!1},d(k){k&&h(e),~n&&f[n].d()}}}function Me(o,e,l){let t,s,c;const i=be();let{quiz:a}=e;const n=()=>{i("action","start-quiz")},r=()=>{i("action","start-quiz-timer")},u=()=>{i("action","close-question")},_=()=>{i("action","close-voting")},f=()=>{i("action","end-question")},g=()=>{confirm("End Quiz?")&&i("action","end-quiz")};return o.$$set=k=>{"quiz"in k&&l(0,a=k.quiz)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a==null?void 0:a.activeQuestion),o.$$.dirty&1&&l(3,s=a==null?void 0:a.state),o.$$.dirty&2&&l(2,c=t==null?void 0:t.state)},[a,t,c,s,i,n,r,u,_,f,g]}class Re extends X{constructor(e){super();I(this,e,Me,Pe,G,{quiz:0})}}const{window:Xe}=Ee;function _e(o,e,l){const t=o.slice();return t[9]=e[l],t}function Ie(o){let e,l;return{c(){e=w("p"),l=N("results")},l(t){e=T(t,"P",{});var s=$(e);l=z(s,"results"),s.forEach(h)},m(t,s){D(t,e,s),d(e,l)},p:B,i:B,o:B,d(t){t&&h(e)}}}function Ge(o){var n,r;let e,l=((n=o[2])==null?void 0:n.description)+"",t,s,c,i,a=((r=o[2])==null?void 0:r.answers)&&he(o);return{c(){e=w("p"),t=N(l),s=S(),a&&a.c(),c=P()},l(u){e=T(u,"P",{});var _=$(e);t=z(_,l),_.forEach(h),s=U(u),a&&a.l(u),c=P()},m(u,_){D(u,e,_),d(e,t),D(u,s,_),a&&a.m(u,_),D(u,c,_),i=!0},p(u,_){var f,g;(!i||_&4)&&l!==(l=((f=u[2])==null?void 0:f.description)+"")&&O(t,l),((g=u[2])==null?void 0:g.answers)?a?(a.p(u,_),_&4&&H(a,1)):(a=he(u),a.c(),H(a,1),a.m(c.parentNode,c)):a&&(K(),j(a,1,1,()=>{a=null}),F())},i(u){i||(H(a),i=!0)},o(u){j(a),i=!1},d(u){u&&h(e),u&&h(s),a&&a.d(u),u&&h(c)}}}function Ke(o){let e,l,t,s=o[0].types,c=[];for(let i=0;i<s.length;i+=1)c[i]=de(_e(o,s,i));return l=new Qe({props:{users:o[1]}}),{c(){for(let i=0;i<c.length;i+=1)c[i].c();e=S(),J(l.$$.fragment)},l(i){for(let a=0;a<c.length;a+=1)c[a].l(i);e=U(i),W(l.$$.fragment,i)},m(i,a){for(let n=0;n<c.length;n+=1)c[n].m(i,a);D(i,e,a),Y(l,i,a),t=!0},p(i,a){if(a&33){s=i[0].types;let r;for(r=0;r<s.length;r+=1){const u=_e(i,s,r);c[r]?c[r].p(u,a):(c[r]=de(u),c[r].c(),c[r].m(e.parentNode,e))}for(;r<c.length;r+=1)c[r].d(1);c.length=s.length}const n={};a&2&&(n.users=i[1]),l.$set(n)},i(i){t||(H(l.$$.fragment,i),t=!0)},o(i){j(l.$$.fragment,i),t=!1},d(i){R(c,i),i&&h(e),Z(l,i)}}}function he(o){let e,l;return e=new Ue({props:{answers:o[2].answers,users:o[1]}}),{c(){J(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),l=!0},p(t,s){const c={};s&4&&(c.answers=t[2].answers),s&2&&(c.users=t[1]),e.$set(c)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){j(e.$$.fragment,t),l=!1},d(t){Z(e,t)}}}function de(o){let e,l,t=o[9]+"",s,c,i;function a(){return o[7](o[9])}return{c(){e=w("button"),l=N("Load "),s=N(t)},l(n){e=T(n,"BUTTON",{});var r=$(e);l=z(r,"Load "),s=z(r,t),r.forEach(h)},m(n,r){D(n,e,r),d(e,l),d(e,s),c||(i=L(e,"click",a),c=!0)},p(n,r){o=n,r&1&&t!==(t=o[9]+"")&&O(s,t)},d(n){n&&h(e),c=!1,i()}}}function Fe(o){let e,l,t,s,c,i,a,n;e=new Re({props:{quiz:o[0]}}),e.$on("action",o[6]);const r=[Ke,Ge,Ie],u=[];function _(f,g){return f[3]==="registration"?0:f[3]==="running"?1:f[3]==="results"?2:-1}return~(t=_(o))&&(s=u[t]=r[t](o)),{c(){J(e.$$.fragment),l=S(),s&&s.c(),c=P()},l(f){W(e.$$.fragment,f),l=U(f),s&&s.l(f),c=P()},m(f,g){Y(e,f,g),D(f,l,g),~t&&u[t].m(f,g),D(f,c,g),i=!0,a||(n=L(Xe,"keydown",o[4]),a=!0)},p(f,[g]){const k={};g&1&&(k.quiz=f[0]),e.$set(k);let b=t;t=_(f),t===b?~t&&u[t].p(f,g):(s&&(K(),j(u[b],1,1,()=>{u[b]=null}),F()),~t?(s=u[t],s?s.p(f,g):(s=u[t]=r[t](f),s.c()),H(s,1),s.m(c.parentNode,c)):s=null)},i(f){i||(H(e.$$.fragment,f),H(s),i=!0)},o(f){j(e.$$.fragment,f),j(s),i=!1},d(f){Z(e,f),f&&h(l),~t&&u[t].d(f),f&&h(c),a=!1,n()}}}function Je(o,e,l){let t,s,c,i,a;se(o,De,f=>l(8,i=f)),se(o,Ne,f=>l(0,a=f));async function n({key:f}){if(f==="L"){const g=await we("api/quiz");console.log(await g.json())}}function r(f,g){Te("api/quiz",le({action:f},g))}ge(()=>{$e("quiz.admin",i)});const u=({detail:f})=>r(f),_=f=>r("load-type",{type:f});return o.$$.update=()=>{o.$$.dirty&1&&l(3,t=a==null?void 0:a.state),o.$$.dirty&1&&l(2,s=a==null?void 0:a.activeQuestion),o.$$.dirty&1&&l(1,c=a==null?void 0:a.users),o.$$.dirty&1&&a&&(window.quiz=a)},[a,c,s,t,n,r,u,_]}class tt extends X{constructor(e){super();I(this,e,Je,Fe,G,{})}}export{tt as default};
