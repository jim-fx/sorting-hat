var gt=Object.defineProperty,mt=Object.defineProperties;var vt=Object.getOwnPropertyDescriptors;var Ne=Object.getOwnPropertySymbols;var wt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var Ce=(s,e,t)=>e in s?gt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,be=(s,e)=>{for(var t in e||(e={}))wt.call(e,t)&&Ce(s,t,e[t]);if(Ne)for(var t of Ne(e))yt.call(e,t)&&Ce(s,t,e[t]);return s},Be=(s,e)=>mt(s,vt(e));import{S as U,i as G,s as W,e as w,c as y,a as k,d as h,b as g,f as b,I as x,t as C,k as S,g as B,n as L,H as v,J as Fe,K as q,L as Oe,h as ke,M as bt,l as j,N as kt,x as A,u as R,A as de,O as te,P as _e,Q as Pe,R as ie,T as Ee,U as xe,V as Et,W as se,X as Ae,j as K,m as Y,Y as X,o as J,Z as qe,v as Q,C as pe,_ as xt,$ as At,a0 as zt,a1 as $t,a2 as Tt,a3 as Mt,a4 as It,a5 as Ue,a6 as Dt,a7 as ge,a8 as ze,a9 as Ge,aa as ne,ab as We,ac as je,ad as me,ae as ve,af as St,ag as Lt,w as oe,ah as Rt,r as re,ai as Vt,aj as Ht}from"../chunks/vendor-4e9872db.js";function Nt(s){let e,t,n,i,o,r,l,a,u,d,c;return{c(){e=w("p"),t=C("Ganzen Namen eingeben:"),n=S(),i=w("input"),o=S(),r=w("br"),l=S(),a=w("button"),u=C("fertig"),this.h()},l(f){e=y(f,"P",{});var _=k(e);t=B(_,"Ganzen Namen eingeben:"),_.forEach(h),n=L(f),i=y(f,"INPUT",{placeholder:!0,type:!0}),o=L(f),r=y(f,"BR",{}),l=L(f),a=y(f,"BUTTON",{});var p=k(a);u=B(p,"fertig"),p.forEach(h),this.h()},h(){g(i,"placeholder","Namen..."),g(i,"type","text")},m(f,_){b(f,e,_),v(e,t),b(f,n,_),b(f,i,_),Fe(i,s[1]),b(f,o,_),b(f,r,_),b(f,l,_),b(f,a,_),v(a,u),d||(c=[q(i,"input",s[6]),q(i,"keydown",s[3]),q(a,"click",s[7])],d=!0)},p(f,_){_&2&&i.value!==f[1]&&Fe(i,f[1])},d(f){f&&h(e),f&&h(n),f&&h(i),f&&h(o),f&&h(r),f&&h(l),f&&h(a),d=!1,Oe(c)}}}function Ct(s){let e,t,n,i,o,r,l,a,u,d,c,f,_,p,m,z;return{c(){e=w("p"),t=C("Alles klar, "),n=w("b"),i=C(s[1]),o=C(", ist das der richtige Name?"),r=S(),l=w("br"),a=S(),u=w("div"),d=w("button"),c=C("Ja"),f=S(),_=w("button"),p=C("Nein")},l($){e=y($,"P",{});var E=k(e);t=B(E,"Alles klar, "),n=y(E,"B",{});var N=k(n);i=B(N,s[1]),N.forEach(h),o=B(E,", ist das der richtige Name?"),E.forEach(h),r=L($),l=y($,"BR",{}),a=L($),u=y($,"DIV",{});var T=k(u);d=y(T,"BUTTON",{});var I=k(d);c=B(I,"Ja"),I.forEach(h),f=L(T),_=y(T,"BUTTON",{});var O=k(_);p=B(O,"Nein"),O.forEach(h),T.forEach(h)},m($,E){b($,e,E),v(e,t),v(e,n),v(n,i),v(e,o),b($,r,E),b($,l,E),b($,a,E),b($,u,E),v(u,d),v(d,c),v(u,f),v(u,_),v(_,p),m||(z=[q(d,"click",s[4]),q(_,"click",s[5])],m=!0)},p($,E){E&2&&ke(i,$[1])},d($){$&&h(e),$&&h(r),$&&h(l),$&&h(a),$&&h(u),m=!1,Oe(z)}}}function Bt(s){let e;function t(o,r){return o[2]?Ct:Nt}let n=t(s),i=n(s);return{c(){e=w("div"),i.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var r=k(e);i.l(r),r.forEach(h),this.h()},h(){g(e,"class","wrapper svelte-1terpu9")},m(o,r){b(o,e,r),i.m(e,null)},p(o,[r]){n===(n=t(o))&&i?i.p(o,r):(i.d(1),i=n(o),i&&(i.c(),i.m(e,null)))},i:x,o:x,d(o){o&&h(e),i.d()}}}function Ft(s,e,t){let{callback:n}=e,i,o=!1;function r({key:c}){c==="Enter"&&t(2,o=!0)}const l=()=>n(i),a=()=>{t(2,o=!1)};function u(){i=this.value,t(1,i)}const d=()=>{t(2,o=!0)};return s.$$set=c=>{"callback"in c&&t(0,n=c.callback)},[n,i,o,r,l,a,u,d]}class Ot extends U{constructor(e){super();G(this,e,Ft,Bt,W,{callback:0})}}const{VITE_API_URL:Ke=""}={VITE_API_URL:"https://si21.herokuapp.com",VITE_SVELTEKIT_AMP:"",BASE_URL:"/_app/",MODE:"production",DEV:!1,PROD:!0};async function Je(s,e,t){const n={method:e};t&&(n.body=JSON.stringify(t));const i=(Ke?Ke+"/":"")+s;return fetch(i,n)}function Pt(s){return Je(s,"GET")}function qt(s,e){return Je(s,"POST",e)}function Ut(s){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function Gt(s){let e,t=s[6]+"",n,i,o,r,l,a,u,d,c,f,_;function p(){return s[3](s[6])}return{c(){e=w("h1"),n=C(t),i=S(),o=w("img"),a=S(),u=w("button"),d=C("Okay"),this.h()},l(m){e=y(m,"H1",{class:!0});var z=k(e);n=B(z,t),z.forEach(h),i=L(m),o=y(m,"IMG",{src:!0,alt:!0,class:!0}),a=L(m),u=y(m,"BUTTON",{});var $=k(u);d=B($,"Okay"),$.forEach(h),this.h()},h(){g(e,"class","svelte-16th1rs"),te(o.src,r="icons/"+s[6]+".svg")||g(o,"src",r),g(o,"alt","crest of house "+s[1]),g(o,"class","svelte-16th1rs")},m(m,z){b(m,e,z),v(e,n),b(m,i,z),b(m,o,z),b(m,a,z),b(m,u,z),v(u,d),c=!0,f||(_=q(u,"click",p),f=!0)},p(m,z){s=m},i(m){c||(_e(()=>{l||(l=Pe(o,ie,{},!0)),l.run(1)}),c=!0)},o(m){l||(l=Pe(o,ie,{},!1)),l.run(0),c=!1},d(m){m&&h(e),m&&h(i),m&&h(o),m&&l&&l.end(),m&&h(a),m&&h(u),f=!1,_()}}}function Wt(s){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function jt(s){let e,t,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Wt,then:Gt,catch:Ut,value:6,blocks:[,,,]};return bt(s[1],n),{c(){e=j(),n.block.c()},l(i){e=j(),n.block.l(i)},m(i,o){b(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(i,[o]){s=i,kt(n,s,o)},i(i){t||(A(n.block),t=!0)},o(i){for(let o=0;o<3;o+=1){const r=n.blocks[o];R(r)}t=!1},d(i){i&&h(e),n.block.d(i),n.token=null,n=null}}}function Kt(s,e,t){const n=!1,i=["ravenclaw","gryffindor","slytherin","hufflepuff"];async function o(){const u=await(await Pt("api/houses")).text();return u.length>20?i[Math.floor(Math.random()*i.length)]:u}let r=o(),{callback:l}=e;de(async()=>{const u=await r,d=new Audio("audio/"+u+".mp3");d.play();const c=new Audio("audio/cheers.mp3"),f=setInterval(()=>{d.currentTime/d.duration>.2&&c.paused&&(c.play(),clearInterval(f))},50);d.addEventListener("progress",()=>{})});const a=u=>l(u);return s.$$set=u=>{"callback"in u&&t(0,l=u.callback)},[l,r,n,a]}class Jt extends U{constructor(e){super();G(this,e,Kt,jt,W,{showText:2,callback:0})}get showText(){return this.$$.ctx[2]}}function Qe(s,e,t){const n=s.slice();return n[4]=e[t],n[6]=t,n}function Ye(s){let e,t,n,i,o,r;function l(){return s[3](s[4])}return{c(){e=w("img"),this.h()},l(a){e=y(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){te(e.src,t="icons/"+s[4]+".svg")||g(e,"src",t),g(e,"alt",n="crest of house "+s[4]),g(e,"class","svelte-16fuc7d")},m(a,u){b(a,e,u),o||(r=q(e,"click",l),o=!0)},p(a,u){s=a},i(a){i||_e(()=>{i=Ee(e,ie,{delay:s[6]*200,duration:1200}),i.start()})},o:x,d(a){a&&h(e),o=!1,r()}}}function Qt(s){let e,t=s[0],n=[];for(let i=0;i<t.length;i+=1)n[i]=Ye(Qe(s,t,i));return{c(){e=w("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=y(i,"DIV",{class:!0});var o=k(e);for(let r=0;r<n.length;r+=1)n[r].l(o);o.forEach(h),this.h()},h(){g(e,"class","wrapper svelte-16fuc7d")},m(i,o){b(i,e,o);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(i,[o]){if(o&3){t=i[0];let r;for(r=0;r<t.length;r+=1){const l=Qe(i,t,r);n[r]?(n[r].p(l,o),A(n[r],1)):(n[r]=Ye(l),n[r].c(),A(n[r],1),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i(i){for(let o=0;o<t.length;o+=1)A(n[o])},o:x,d(i){i&&h(e),xe(n,i)}}}function Yt(s,e,t){let{callback:n}=e;const i=["ravenclaw","gryffindor","slytherin","hufflepuff"];function o(l){const a=new Audio("audio/"+l+".mp3");a.play(),a.addEventListener("ended",()=>{setTimeout(()=>{n(l)},200)})}const r=l=>o(l);return s.$$set=l=>{"callback"in l&&t(2,n=l.callback)},[i,o,n,r]}class Xt extends U{constructor(e){super();G(this,e,Yt,Qt,W,{callback:2})}}function Zt(s){let e,t,n,i,o,r,l,a,u,d,c;function f(p){s[3](p)}let _={max:10,pips:!0,id:"range-slider",all:"label"};return s[1]!==void 0&&(_.values=s[1]),n=new Et({props:_}),se.push(()=>Ae(n,"values",f)),{c(){e=w("div"),t=w("div"),i=w("div"),K(n.$$.fragment),r=S(),l=w("button"),a=C("Okay"),this.h()},l(p){e=y(p,"DIV",{class:!0});var m=k(e);t=y(m,"DIV",{class:!0});var z=k(t);i=y(z,"DIV",{style:!0});var $=k(i);Y(n.$$.fragment,$),z.forEach(h),r=L(m),l=y(m,"BUTTON",{});var E=k(l);a=B(E,"Okay"),E.forEach(h),m.forEach(h),this.h()},h(){X(i,"display","contents"),X(i,"--handle-focus","white"),X(i,"--range-slider","black"),X(i,"--range-handle","black"),X(i,"--range-float-text","white"),g(t,"class","range-wrapper svelte-1ni4obk"),g(e,"class","wrapper svelte-1ni4obk")},m(p,m){b(p,e,m),v(e,t),v(t,i),J(n,i,null),v(e,r),v(e,l),v(l,a),u=!0,d||(c=q(l,"click",s[4]),d=!0)},p(p,[m]){const z={};!o&&m&2&&(o=!0,z.values=p[1],qe(()=>o=!1)),n.$set(z)},i(p){u||(A(n.$$.fragment,p),u=!0)},o(p){R(n.$$.fragment,p),u=!1},d(p){p&&h(e),Q(n),d=!1,c()}}}function en(s,e,t){let{callback:n}=e;const i=!0;let o=[5];function r(a){o=a,t(1,o)}const l=()=>n(o[0]);return s.$$set=a=>{"callback"in a&&t(0,n=a.callback)},[n,o,i,r,l]}class tn extends U{constructor(e){super();G(this,e,en,Zt,W,{callback:0,showText:2})}get showText(){return this.$$.ctx[2]}}function nn(s){let e,t,n,i,o,r;return{c(){e=w("video"),t=w("source"),i=w("source"),r=w("track"),this.h()},l(l){e=y(l,"VIDEO",{width:!0,height:!0,class:!0});var a=k(e);t=y(a,"SOURCE",{src:!0,type:!0}),i=y(a,"SOURCE",{src:!0,type:!0}),r=y(a,"TRACK",{kind:!0}),a.forEach(h),this.h()},h(){te(t.src,n=""+(s[0]+"video/video.webm"))||g(t,"src",n),g(t,"type","video/webm"),te(i.src,o=""+(s[0]+"video/video.mp4"))||g(i,"src",o),g(i,"type","video/mp4"),g(r,"kind","captions"),g(e,"width","500"),g(e,"height","281"),e.controls=!0,e.autoplay=!0,g(e,"class","svelte-k2j555")},m(l,a){b(l,e,a),v(e,t),v(e,i),v(e,r)},p(l,[a]){a&1&&!te(t.src,n=""+(l[0]+"video/video.webm"))&&g(t,"src",n),a&1&&!te(i.src,o=""+(l[0]+"video/video.mp4"))&&g(i,"src",o)},i:x,o:x,d(l){l&&h(e)}}}function sn(s,e,t){const n=!1;let i="";return de(()=>{t(0,i=window.location.pathname)}),[i,n]}class on extends U{constructor(e){super();G(this,e,sn,nn,W,{showText:1})}get showText(){return this.$$.ctx[1]}}var rn=(s,e)=>{s="local-store-"+s;{let t=e;if(s in localStorage)try{t=JSON.parse(localStorage.getItem(s))}catch(i){console.log(i)}const n=pe(t);return n.subscribe(i=>{localStorage.setItem(s,JSON.stringify(i))}),n}};const Z=rn("user-data",{name:"",confidence:"",house:""}),Xe=pe(!1),Ze=pe();class F{constructor({audioFile:e,element:t,text:n}){this.duration=5,this.isLast=!0,this.state=pe("suspended"),this.nextActions=[],this.events={},this.text=n,this.element=t,e&&(this.audio=new Audio("audio/"+e))}async start(){if(this.setActive(),await xt(),this.emit("start"),this.audio){this.duration=this.audio.duration,this.state.set("running"),this.audio.play(),F.anim.params.wiggleMouth=1;const e=setInterval(()=>{this.emit("progress",this.audio.currentTime/this.audio.duration)},200);this.audio.addEventListener("ended",()=>{clearInterval(e),setTimeout(()=>{this.speechEnded()},500)},{once:!0})}else this.duration=5,this.text&&(this.duration=Math.max(this.text.split(" ").length*.08,2),console.log(this.duration)),this.state.set("running"),setTimeout(()=>{this.speechEnded()},this.duration*1e3)}speechEnded(){this.emit("speech-ended"),F.anim.params.wiggleMouth=0,this.element?this.state.set("input"):this.finish()}handleElementCallback(e){console.log("Got Data: ",e),this.data=e,this.emit("data",e),this.finish()}finish(){this.state.set("finished"),this.emit("end"),console.log("Finished",this.nextActions),this.nextActions.length===1&&!("name"in this.nextActions[0])&&this.nextActions[0].action.start(),this.nextActions.length||Xe.set(!0)}emit(e,t){e in this.events&&this.events[e].forEach(n=>n(t))}addEventListener(e,t){return this.events[e]=e in this.events?[...this.events[e],t]:[t],()=>{this.events[e]=this.events[e].filter(n=>n!==t)}}setActive(){Ze.set(this)}addAction(e,t){this.isLast=!1,typeof e!="string"?this.nextActions.push({action:e}):this.nextActions.push({name:e,action:t})}}function an(s){F.anim=s;const e=new F({audioFile:"teilnehmen.mp3",text:"So so, du willst also an der Silvesterparty im Dungeon teilnehmen?"});e.addEventListener("start",()=>{s.params.wiggleMouth=1}),e.addEventListener("end",()=>{s.params.wiggleMouth=0,s.params.wiggleEyes=1});const t=new F({audioFile:"namen.mp3",text:"Sehr sch\xF6n, verstanden, jetzt br\xE4uchte ich noch deinen Namen?",element:Ot});t.addEventListener("data",c=>{console.log("Got Name",c),Z.update(f=>(f.name=c,f))});const n=new F({audioFile:"unterhaltung.mp3",text:"Das ist nat\xFCrlich auch in Ordnung, damit du aber trotzdem nicht leer ausgehst habe ich hier etwas Unterhaltung f\xFCr dich:",element:on}),i=new F({audioFile:"exzellenter_gast.mp3",text:"Naja, okay, wenn das sooo ist? Dann werden wir mal schauen... Verstanden, du siehst wie ein exzellenter Gast aus."}),o=new F({audioFile:"welches_haus.mp3",text:"Weisst du den schon zu welchem der vier H\xE4user du geh\xF6rst?"});o.addEventListener("data",c=>{Z.update(f=>(f.house=c,f))});const r=new F({audioFile:"random_haus.mp3",text:"Okay, um das herauszufinden bin ich ja hier. Dann werde ich mal  schauen, hmm, ich sehe Mut, aber auch Intelligenz, oh, und hier ist auch noch Empathie. Schwierige Entscheidung, aber ich denke:",element:Jt});r.addEventListener("start",()=>{s.params.wiggleMouth=1}),r.addEventListener("progress",c=>{c>.34&&(s.params.wiggleRim=2,s.params.wiggleHat=2,s.params.wiggleEyes=1)}),r.addEventListener("speech-ended",()=>{s.params.wiggleMouth=0,s.params.wiggleHat=.2,s.params.wiggleEyes=0,s.params.wiggleRim=.2}),r.addEventListener("data",c=>{Z.update(f=>(f.house=c,f))});const l=new F({text:"W\xE4hle nun dein Haus aus:",element:Xt});l.addEventListener("data",c=>{Z.update(f=>(f.house=c,f))});const a=new F({audioFile:"sicherheit.mp3",text:"Nun zu letzten Frage, auf einer Skala von 0 bis 10, wie sicher k\xF6nnen wir mit deinem Erscheinen rechnen?",element:tn});a.addEventListener("data",c=>{Z.update(f=>(f.confidence=c/10,qt("api",f),f))});const u=new F({audioFile:"final.mp3",text:"So, das war auch schon alles. Wir freuen uns, dich am 31.12 willkommen zu hei\xDFen, und w\xFCnschen dir bis dahin eine sch\xF6ne Weihnachtszeit."});e.addAction("Auf jeden Fall!",t),e.addAction("Ne, eher nicht",n),t.addAction(i),i.addAction(o),o.addAction("Aber nat\xFCrlich!",l),o.addAction("Nein, dass wei\xDF ich noch nicht...",r),r.addAction(a),l.addAction(a),a.addAction(u);const d=At(Z);return d.name&&d.house&&"confidence"in d?u:e}function et(s,e=[]){return s.type==="Bone"&&!e.includes(s)&&e.push(s),s.children.forEach(t=>{t.type==="Bone"&&!e.includes(t)&&e.push(t),t.children.length&&et(t,e)}),e}function V(s,e,t){return s*t+e*(1-t)}function ln(s){const e={};return s.forEach(t=>{const{userData:{name:n}={}}=t;if(n){e[n]=t;const[i,o]=n.toLowerCase().split("_");o&&(e[i]=i in e?Be(be({},e[i]),{[o]:t}):{[o]:t},e[i+"Array"]=i+"Array"in e?[...e[i+"Array"],t]:[t])}}),e}function cn(s){let e=!1;return{name:s.name,get dirty(){return e},clear:()=>{e=!1},rotation:{_x:0,ox:s.rotation.x,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,e=!0)},_y:0,oy:s.rotation.y,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,this._dirty=!0)},_z:0,oz:s.rotation.z,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,e=!0)}},position:{ox:s.position.x,_x:0,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,e=!0)},oy:s.position.y,_y:0,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,e=!0)},oz:s.position.z,_z:0,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,e=!0)}},scale:{ox:s.scale.x,_x:0,get x(){return this.ox+this._x},set x(t){t!==this._x&&(this._x=t,e=!0)},oy:s.scale.y,_y:0,get y(){return this.oy+this._y},set y(t){t!==this._y&&(this._y=t,e=!0)},oz:s.scale.z,_z:0,get z(){return this.oz+this._z},set z(t){t!==this._z&&(this._z=t,e=!0)}},id:s.uuid}}function $e(s,e={bones:{}},t=0){if(s instanceof zt){if(s.uuid in e)return e[s.uuid];e.bones[s.uuid]=s;const o=cn(s);return e[s.uuid]=o,o}if(Array.isArray(s))return s.map(o=>$e(o,e,t+1));const n={},i=Object.keys(s);return i.length&&i.forEach(o=>{n[o]=$e(s[o],e,t+1)}),t===0?{obj:n,cache:e}:n}function un(s){const{obj:e,cache:t}=$e(s);return e._bones=t.bones,delete t.bones,e._all=Object.values(t),e}function fn({_all:s,_bones:e}){s.forEach(t=>{if(!t.dirty)return;const n=e[t.id];!n||(n.rotation.x=V(t.rotation.x,n.rotation.x,.9),n.rotation.y=V(t.rotation.y,n.rotation.y,.9),n.rotation.z=V(t.rotation.z,n.rotation.z,.9),n.position.x=V(t.position.x,n.position.x,.9),n.position.y=V(t.position.y,n.position.y,.9),n.position.z=V(t.position.z,n.position.z,.9),n.scale.x=V(t.scale.x,n.scale.x,.9),n.scale.y=V(t.scale.y,n.scale.y,.9),n.scale.z=V(t.scale.z,n.scale.z,.9),t.clear())})}class hn{constructor({scene:e,camera:t,renderer:n}){this.boneArray=[],this._bones={circleArray:[],spineArray:[],mouthArray:[]},this.bones={},this.loaded=!1,this.conf={wiggleRim:.05,wiggleHat:.05,wiggleMouth:.05,wiggleEyes:.05},this.confKeys=[],this.controls=new $t(t,n.domElement),e.add(this.controls),this.params=be({},this.conf),this.confKeys=Object.keys(this.conf),window.c=this.controls,this.setActiveBone=this.setActiveBone.bind(this)}setActiveBone(e){const t=this.boneArray.find(n=>n.userData.name===e);this.controls.attach(t)}setSkeleton(e){!e||(this.boneArray=et(e),this._bones=ln(this.boneArray),this.bones=un(this._bones),this.loaded=!!this.boneArray.length)}update(e){if(!this.loaded)return;const{bones:t,conf:n,confKeys:i,params:o}=this;if(i.forEach(r=>{o[r]!==n[r]&&(n[r]=V(o[r],n[r],.05))}),n.wiggleRim&&t.circleArray.forEach((r,l)=>{r.position.y=Math.sin(e/300+l*2)/100*n.wiggleRim}),n.wiggleHat&&t.spineArray.forEach((r,l)=>{r.rotation.x=Math.sin(e/300+l*2)/100*n.wiggleHat,r.rotation.y=Math.sin(e/300+l*1)/100*n.wiggleHat,r.rotation.z=Math.sin(e/300+l*0)/100*n.wiggleHat}),n.wiggleMouth&&(t.mouth.r1.scale.x=Math.sin(e/100+10)/10*n.wiggleMouth,t.mouth.l2.scale.x=Math.sin(e/100+5)/10*n.wiggleMouth,t.mouth.l1.scale.x=Math.sin(e/100+1)/4*n.wiggleMouth-.2,t.mouth.r2.scale.x=Math.sin(e/100+2)/4*n.wiggleMouth-.2,t.mouth.l1.position.y=Math.sin(e/100)/300*n.wiggleMouth-.01,t.mouth.r1.position.y=Math.sin(e/100)/300*n.wiggleMouth-.01),n.wiggleEyes){const r=e/400;t.eyes.l1.scale.x=Math.sin(r+1)/4*n.wiggleEyes-.2,t.eyes.r2.scale.x=Math.sin(r+2)/4*n.wiggleEyes-.2,t.eyes.l1.position.y=Math.sin(r)/300*n.wiggleEyes+.01,t.eyes.r1.position.y=Math.sin(e/200)/300*n.wiggleEyes+.01}fn(this.bones)}}const tt=new Tt,dn=new Mt,nt=new It;nt.setDecoderPath("draco/");tt.setDRACOLoader(nt);function _n(s){return dn.load(s)}function it(s,e){return tt.loadAsync(s,e)}async function pn(){const s=_n("textures/SortingHat_col.jpg");s.flipY=!1;const e=new Ue({map:s}),t=await it("sorting_hat.glb",i=>{console.log(i.loaded/i.total*100+"% loaded")}),n=t.scene.children[0].children[1];return n.material=e,t}function st(s){return new Promise((e,t)=>{const n=new Image;n.src=s,n.onerror=i=>t(i),n.onload=()=>e(n)})}async function gn(s,e){const t=new FontFace(s,`url(${e})`);return await t.loaded,t}async function mn({name:s="",house:e=""}={}){console.log(s,e);const t=document.createElement("canvas");t.width=512,t.height=512;const n=t.getContext("2d"),i=new Dt(t);i.flipY=!1;function o(){n.textAlign="center",n.font="10px Chantelli",n.fillText("Herzlich Willkommen",325,390),n.font="15px Chantelli bold",n.fillText(s,325,420),i.needsUpdate=!0}gn("Chantelli","fonts/Chantelli_Antiqua-webfont.woff").then(()=>o()),st("textures/book_col.jpg").then(async u=>{n.drawImage(u,0,0,512,512),o();const d=await st(`icons/${e}.svg`);n.drawImage(d,270,240,120,120),o()});const r=new Ue({map:i}),l=await it("book.glb",u=>{console.log(u.loaded/u.total*100+"% loaded")}),a=l.scene.children[0].children[1];return a.material=r,l}var ot={loadHat:pn,loadBook:mn};let Te=0,Me=0,Ie=500,De=500,Se,Le;function Re({alpha:s,beta:e}){Se||(Se=s),Le||(Le=e),Te=(Le-e)/80*-1,Me=(Se-s)/80*-2}function vn(){Ie=window.innerHeight,De=window.innerWidth}function wn({clientX:s,clientY:e}){Te=s/De*2-1,Me=e/Ie*2-1}var ae={get x(){return Te},get y(){return Me},init(){Ie=window.innerHeight,De=window.innerWidth,window.addEventListener("resize",vn),window.addEventListener("mousemove",wn),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",Re,!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",function(s){Re({alpha:s.acceleration.x*2,beta:s.acceleration.y*2})},!0):window.addEventListener("MozOrientation",function(){Re({alpha:orientation.x*50,beta:orientation.y*50})},!0)}};function yn(s){let e,t;return{c(){e=w("canvas"),this.h()},l(n){e=y(n,"CANVAS",{style:!0,class:!0}),k(e).forEach(h),this.h()},h(){g(e,"style",t=`visibility:${s[1]!=="loading"?"visible":"hidden"}`),g(e,"class","svelte-rl5rk3"),ge(e,"loaded",s[1]!=="loading")},m(n,i){b(n,e,i),s[2](e)},p(n,[i]){i&2&&t!==(t=`visibility:${n[1]!=="loading"?"visible":"hidden"}`)&&g(e,"style",t),i&2&&ge(e,"loaded",n[1]!=="loading")},i:x,o:x,d(n){n&&h(e),s[2](null)}}}const Ve=500;function rt(s){return s<.5?16*s*s*s*s*s:1-Math.pow(-2*s+2,5)/2}function bn(s,e,t){let n;ze(s,Z,E=>t(8,n=E));let i;const o=new Ge,r=new ne(12626431,.8);r.position.set(2.5,2.5,2),o.add(r);const l=new ne(16765393,.8);l.position.set(-2.5,2.5,2),o.add(l);const a=new ne(16777215,1);a.position.set(1,1,-1.5),o.add(a);const u=Ve;let d=0,c=0,f="loading";const _=new We(50,Ve/u,.1,1e3);_.position.set(-.2,.8,-.1);const p={};async function m(){const E=await ot.loadBook(n);E.scene.children[0].children[1].skeleton.bones.forEach(T=>{p[T.userData.name]=T}),console.log(p),p.Left.rotation.z=0,console.log(p.Left.position.x),p.Left.position.x=-.02,p.Right.rotation.z=0,p.Right.position.x=.02,p.Root.rotation.z=-1.5-Math.PI*2,o.add(E.scene.children[0]),setTimeout(()=>{t(1,f="rotating")},500),window.skeleton=p}let z=0;de(()=>{m();const E=new je({canvas:i,alpha:!0});E.setSize(Ve,u);function N(I){switch(requestAnimationFrame(N),d=V(ae.x/-5,d,.1),c=V(ae.y/-5,c,.1)+.03,_.position.x=d,_.position.z=c,_.lookAt(0,0,0),f){case"rotating":z++;const O=rt(z/120);p.Root.rotation.z=V(-1.5-Math.PI*2,0,1-O),z>120&&(z=0,t(1,f="opening"));break;case"opening":z++;const P=rt(z/120);p.Left.rotation.z=V(1.67,0,P),p.Left.position.x=V(-.05,-.02,P),p.Right.rotation.z=V(-1.67,0,P),p.Right.position.x=V(.05,.02,P),z>120&&t(1,f="opened");break}T()}function T(){E.render(o,_)}N()});function $(E){se[E?"unshift":"push"](()=>{i=E,t(0,i)})}return[i,f,$]}class kn extends U{constructor(e){super();G(this,e,bn,yn,W,{})}}function En(s){let e,t,n,i;return{c(){e=me("svg"),t=me("path"),n=me("path"),i=me("path"),this.h()},l(o){e=ve(o,"svg",{viewBox:!0,style:!0,fill:!0,xmlns:!0});var r=k(e);t=ve(r,"path",{d:!0,stroke:!0,"stroke-width":!0}),k(t).forEach(h),n=ve(r,"path",{d:!0,stroke:!0,"stroke-width":!0}),k(n).forEach(h),i=ve(r,"path",{d:!0,stroke:!0,"stroke-width":!0}),k(i).forEach(h),r.forEach(h),this.h()},h(){g(t,"d","M68.8424 -13.5778V5.30176H27.4473C27.4473 18.0806 27.4473 24.2029 27.4473 35.5006C21.9253 42.4032 19.5381 59.3721 19.0348 66.9937V5.30176H7.17095V16.7342C32.6243 16.7342 80.1659 16.7342 66.7059 16.7342C53.2458 16.7342 41.684 22.6302 37.5855 25.5781H7.17095V66.9937H-15.0309"),g(t,"stroke","black"),g(t,"stroke-width","1"),g(n,"d","M55.6489 17.8342C55.6489 36.7637 40.3035 52.1091 21.374 52.1091"),g(n,"stroke","black"),g(n,"stroke-width","1"),g(i,"d","M41.8151 23.0153V39.6404H25.19"),g(i,"stroke","black"),g(i,"stroke-width","1"),g(e,"viewBox","0 0 70 68"),X(e,"transform","rotate("+s[0]+")"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg")},m(o,r){b(o,e,r),v(e,t),v(e,n),v(e,i)},p(o,[r]){r&1&&X(e,"transform","rotate("+o[0]+")")},i:x,o:x,d(o){o&&h(e)}}}function xn(s,e,t){let{rotate:n="0deg"}=e;return s.$$set=i=>{"rotate"in i&&t(0,n=i.rotate)},[n]}class we extends U{constructor(e){super();G(this,e,xn,En,W,{rotate:0})}}function An(s){let e,t,n,i,o,r,l,a,u,d,c,f,_,p,m,z,$,E,N,T,I,O,P;return n=new we({}),r=new we({props:{rotate:"90deg"}}),u=new we({props:{rotate:"180deg"}}),f=new we({props:{rotate:"-90deg"}}),{c(){e=w("div"),t=w("div"),K(n.$$.fragment),i=S(),o=w("div"),K(r.$$.fragment),l=S(),a=w("div"),K(u.$$.fragment),d=S(),c=w("div"),K(f.$$.fragment),_=S(),p=w("div"),m=S(),z=w("div"),$=S(),E=w("div"),N=S(),T=w("div"),I=S(),O=w("div"),this.h()},l(H){e=y(H,"DIV",{class:!0});var D=k(e);t=y(D,"DIV",{class:!0});var le=k(t);Y(n.$$.fragment,le),le.forEach(h),i=L(D),o=y(D,"DIV",{class:!0});var ce=k(o);Y(r.$$.fragment,ce),ce.forEach(h),l=L(D),a=y(D,"DIV",{class:!0});var ue=k(a);Y(u.$$.fragment,ue),ue.forEach(h),d=L(D),c=y(D,"DIV",{class:!0});var M=k(c);Y(f.$$.fragment,M),M.forEach(h),_=L(D),p=y(D,"DIV",{class:!0}),k(p).forEach(h),m=L(D),z=y(D,"DIV",{class:!0}),k(z).forEach(h),$=L(D),E=y(D,"DIV",{class:!0}),k(E).forEach(h),N=L(D),T=y(D,"DIV",{class:!0}),k(T).forEach(h),I=L(D),O=y(D,"DIV",{class:!0}),k(O).forEach(h),D.forEach(h),this.h()},h(){g(t,"class","pattern-wrapper svelte-1qzm7t1"),g(o,"class","pattern-wrapper p-tr svelte-1qzm7t1"),g(a,"class","pattern-wrapper p-br svelte-1qzm7t1"),g(c,"class","pattern-wrapper p-bl svelte-1qzm7t1"),g(p,"class","bar b-t svelte-1qzm7t1"),g(z,"class","bar b-r svelte-1qzm7t1"),g(E,"class","bar b-l svelte-1qzm7t1"),g(T,"class","bar b-b svelte-1qzm7t1"),g(O,"class","overlay svelte-1qzm7t1"),g(e,"class","wrapper svelte-1qzm7t1")},m(H,D){b(H,e,D),v(e,t),J(n,t,null),v(e,i),v(e,o),J(r,o,null),v(e,l),v(e,a),J(u,a,null),v(e,d),v(e,c),J(f,c,null),v(e,_),v(e,p),v(e,m),v(e,z),v(e,$),v(e,E),v(e,N),v(e,T),v(e,I),v(e,O),P=!0},p:x,i(H){P||(A(n.$$.fragment,H),A(r.$$.fragment,H),A(u.$$.fragment,H),A(f.$$.fragment,H),P=!0)},o(H){R(n.$$.fragment,H),R(r.$$.fragment,H),R(u.$$.fragment,H),R(f.$$.fragment,H),P=!1},d(H){H&&h(e),Q(n),Q(r),Q(u),Q(f)}}}class zn extends U{constructor(e){super();G(this,e,null,An,W,{})}}function at(s,e,t){const n=s.slice();return n[5]=e[t],n[7]=t,n}function lt(s){let e,t=s[0],n=[];for(let i=0;i<t.length;i+=1)n[i]=ct(at(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=j()},l(i){for(let o=0;o<n.length;o+=1)n[o].l(i);e=j()},m(i,o){for(let r=0;r<n.length;r+=1)n[r].m(i,o);b(i,e,o)},p(i,o){if(o&1){t=i[0];let r;for(r=0;r<t.length;r+=1){const l=at(i,t,r);n[r]?(n[r].p(l,o),A(n[r],1)):(n[r]=ct(l),n[r].c(),A(n[r],1),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i(i){for(let o=0;o<t.length;o+=1)A(n[o])},o:x,d(i){xe(n,i),i&&h(e)}}}function ct(s){let e,t=s[5]+"",n,i;return{c(){e=w("span"),n=C(t)},l(o){e=y(o,"SPAN",{});var r=k(e);n=B(r,t),r.forEach(h)},m(o,r){b(o,e,r),v(e,n)},p(o,r){s=o,r&1&&t!==(t=s[5]+"")&&ke(n,t)},i(o){i||_e(()=>{i=Ee(e,St,{duration:s[2],delay:s[7]*s[2]}),i.start()})},o:x,d(o){o&&h(e)}}}function $n(s){let e,t=s[1]&&lt(s);return{c(){e=w("div"),t&&t.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var i=k(e);t&&t.l(i),i.forEach(h),this.h()},h(){g(e,"class","wrapper svelte-zdezep")},m(n,i){b(n,e,i),t&&t.m(e,null)},p(n,[i]){n[1]?t?(t.p(n,i),i&2&&A(t,1)):(t=lt(n),t.c(),A(t,1),t.m(e,null)):t&&(t.d(1),t=null)},i(n){A(t)},o:x,d(n){n&&h(e),t&&t.d()}}}function Tn(s,e,t){let n,i,o,{text:r}=e,{duration:l}=e;return s.$$set=a=>{"text"in a&&t(3,r=a.text),"duration"in a&&t(4,l=a.duration)},s.$$.update=()=>{s.$$.dirty&8&&t(0,n=r.split(" ").map(a=>" "+a)),s.$$.dirty&17&&t(2,i=(l-.5)/n.length*1e3),s.$$.dirty&1&&t(1,o=!(n==null?void 0:n.length)),s.$$.dirty&1&&n.length&&setTimeout(()=>{t(1,o=!0)},200)},[n,o,i,r,l]}class Mn extends U{constructor(e){super();G(this,e,Tn,$n,W,{text:3,duration:4})}}function ut(s,e,t){const n=s.slice();return n[24]=e[t],n[26]=t,n}function In(s){var f;let e,t,n,i,o,r,l,a,u,d=((f=s[1])==null?void 0:f.text)&&(s[8]==="running"||s[8]==="finished"||s[8]==="input")&&s[6]&&ft(s),c=s[8]&&ht(s);return{c(){e=w("canvas"),i=S(),o=w("div"),d&&d.c(),r=S(),c&&c.c(),this.h()},l(_){e=y(_,"CANVAS",{style:!0,class:!0}),k(e).forEach(h),i=L(_),o=y(_,"DIV",{class:!0});var p=k(o);d&&d.l(p),r=L(p),c&&c.l(p),p.forEach(h),this.h()},h(){g(e,"style",t=`visibility:${s[3]?"visible":"hidden"}`),g(e,"class","svelte-5os1af"),ge(e,"loaded",s[3]),g(o,"class","content svelte-5os1af")},m(_,p){b(_,e,p),s[9](e),b(_,i,p),b(_,o,p),d&&d.m(o,null),v(o,r),c&&c.m(o,null),l=!0,a||(u=q(e,"click",s[10]),a=!0)},p(_,p){var m;(!l||p&8&&t!==(t=`visibility:${_[3]?"visible":"hidden"}`))&&g(e,"style",t),p&8&&ge(e,"loaded",_[3]),((m=_[1])==null?void 0:m.text)&&(_[8]==="running"||_[8]==="finished"||_[8]==="input")&&_[6]?d?(d.p(_,p),p&322&&A(d,1)):(d=ft(_),d.c(),A(d,1),d.m(o,r)):d&&(re(),R(d,1,1,()=>{d=null}),oe()),_[8]?c?(c.p(_,p),p&256&&A(c,1)):(c=ht(_),c.c(),A(c,1),c.m(o,null)):c&&(re(),R(c,1,1,()=>{c=null}),oe())},i(_){l||(n&&n.end(1),A(d),A(c),l=!0)},o(_){n=Vt(e,ie,{}),R(d),R(c),l=!1},d(_){_&&h(e),s[9](null),_&&n&&n.end(),_&&h(i),_&&h(o),d&&d.d(),c&&c.d(),a=!1,u()}}}function Dn(s){let e,t;return e=new kn({}),{c(){K(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,i){J(e,n,i),t=!0},p:x,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function ft(s){let e,t;return e=new Mn({props:{text:s[1].text,duration:s[1].duration}}),{c(){K(e.$$.fragment)},l(n){Y(e.$$.fragment,n)},m(n,i){J(e,n,i),t=!0},p(n,i){const o={};i&2&&(o.text=n[1].text),i&2&&(o.duration=n[1].duration),e.$set(o)},i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function ht(s){let e,t,n,i;const o=[Rn,Ln,Sn],r=[];function l(a,u){return a[8]==="suspended"?0:a[8]==="finished"?1:a[8]==="input"?2:-1}return~(e=l(s))&&(t=r[e]=o[e](s)),{c(){t&&t.c(),n=j()},l(a){t&&t.l(a),n=j()},m(a,u){~e&&r[e].m(a,u),b(a,n,u),i=!0},p(a,u){let d=e;e=l(a),e===d?~e&&r[e].p(a,u):(t&&(re(),R(r[d],1,1,()=>{r[d]=null}),oe()),~e?(t=r[e],t?t.p(a,u):(t=r[e]=o[e](a),t.c()),A(t,1),t.m(n.parentNode,n)):t=null)},i(a){i||(A(t),i=!0)},o(a){R(t),i=!1},d(a){~e&&r[e].d(a),a&&h(n)}}}function Sn(s){let e,t,n,i;function o(a){s[14](a)}var r=s[1].element;function l(a){let u={callback:a[13]};return a[0]!==void 0&&(u.showText=a[0]),{props:u}}return r&&(e=new r(l(s)),se.push(()=>Ae(e,"showText",o))),{c(){e&&K(e.$$.fragment),n=j()},l(a){e&&Y(e.$$.fragment,a),n=j()},m(a,u){e&&J(e,a,u),b(a,n,u),i=!0},p(a,u){const d={};if(u&2&&(d.callback=a[13]),!t&&u&1&&(t=!0,d.showText=a[0],qe(()=>t=!1)),r!==(r=a[1].element)){if(e){re();const c=e;R(c.$$.fragment,1,0,()=>{Q(c,1)}),oe()}r?(e=new r(l(a)),se.push(()=>Ae(e,"showText",o)),K(e.$$.fragment),A(e.$$.fragment,1),J(e,n.parentNode,n)):e=null}else r&&e.$set(d)},i(a){i||(e&&A(e.$$.fragment,a),i=!0)},o(a){e&&R(e.$$.fragment,a),i=!1},d(a){a&&h(n),e&&Q(e,a)}}}function Ln(s){var n,i;let e,t=((i=(n=s[1])==null?void 0:n.nextActions)==null?void 0:i.length)&&dt(s);return{c(){t&&t.c(),e=j()},l(o){t&&t.l(o),e=j()},m(o,r){t&&t.m(o,r),b(o,e,r)},p(o,r){var l,a;((a=(l=o[1])==null?void 0:l.nextActions)==null?void 0:a.length)?t?(t.p(o,r),r&2&&A(t,1)):(t=dt(o),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i(o){A(t)},o:x,d(o){t&&t.d(o),o&&h(e)}}}function Rn(s){let e,t,n,i;return{c(){e=w("button"),t=C("Starten")},l(o){e=y(o,"BUTTON",{});var r=k(e);t=B(r,"Starten"),r.forEach(h)},m(o,r){b(o,e,r),v(e,t),n||(i=q(e,"click",s[11]),n=!0)},p:x,i:x,o:x,d(o){o&&h(e),n=!1,i()}}}function dt(s){let e,t=s[1].nextActions,n=[];for(let i=0;i<t.length;i+=1)n[i]=_t(ut(s,t,i));return{c(){e=w("div");for(let i=0;i<n.length;i+=1)n[i].c()},l(i){e=y(i,"DIV",{});var o=k(e);for(let r=0;r<n.length;r+=1)n[r].l(o);o.forEach(h)},m(i,o){b(i,e,o);for(let r=0;r<n.length;r+=1)n[r].m(e,null)},p(i,o){if(o&2){t=i[1].nextActions;let r;for(r=0;r<t.length;r+=1){const l=ut(i,t,r);n[r]?(n[r].p(l,o),A(n[r],1)):(n[r]=_t(l),n[r].c(),A(n[r],1),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i(i){for(let o=0;o<t.length;o+=1)A(n[o])},o:x,d(i){i&&h(e),xe(n,i)}}}function _t(s){let e,t=s[24].name+"",n,i,o,r;function l(){return s[12](s[24])}return{c(){e=w("button"),n=C(t)},l(a){e=y(a,"BUTTON",{});var u=k(e);n=B(u,t),u.forEach(h)},m(a,u){b(a,e,u),v(e,n),o||(r=q(e,"click",l),o=!0)},p(a,u){s=a,u&2&&t!==(t=s[24].name+"")&&ke(n,t)},i(a){i||_e(()=>{i=Ee(e,ie,{duration:200,delay:200*s[26]}),i.start()})},o:x,d(a){a&&h(e),o=!1,r()}}}function Vn(s){let e,t,n,i,o,r,l;t=new zn({});const a=[Dn,In],u=[];function d(c,f){return c[7]?0:1}return o=d(s),r=u[o]=a[o](s),{c(){e=S(),K(t.$$.fragment),n=S(),i=w("main"),r.c(),this.h()},l(c){Lt('[data-svelte="svelte-tqpvny"]',document.head).forEach(h),e=L(c),Y(t.$$.fragment,c),n=L(c),i=y(c,"MAIN",{class:!0});var _=k(i);r.l(_),_.forEach(h),this.h()},h(){document.title="Dungeon Entry",g(i,"class","svelte-5os1af")},m(c,f){b(c,e,f),J(t,c,f),b(c,n,f),b(c,i,f),u[o].m(i,null),l=!0},p(c,[f]){let _=o;o=d(c),o===_?u[o].p(c,f):(re(),R(u[_],1,1,()=>{u[_]=null}),oe(),r=u[o],r?r.p(c,f):(r=u[o]=a[o](c),r.c()),A(r,1),r.m(i,null))},i(c){l||(A(t.$$.fragment,c),A(r),l=!0)},o(c){R(t.$$.fragment,c),R(r),l=!1},d(c){c&&h(e),Q(t,c),c&&h(n),c&&h(i),u[o].d()}}}const He=500;function Hn(s,e,t){let n,i,o,r,l,a=x,u=()=>(a(),a=Rt(i,M=>t(8,l=M)),i);ze(s,Ze,M=>t(1,o=M)),ze(s,Xe,M=>t(7,r=M)),s.$$.on_destroy.push(()=>a());let d;const c=new Ge,f=new ne(12626431,.8);f.position.set(2.5,2.5,2),c.add(f);const _=new ne(16765393,.8);_.position.set(-2.5,2.5,2),c.add(_);const p=new ne(16777215,1);p.position.set(1,1,-1.5),c.add(p);let m=!0;const z=He;let $=0,E=0,N=!1;const T=new We(50,He/z,.1,1e3);T.position.set(0,0,1);let I;async function O(){const M=await ot.loadHat(),ye=M.scene.children[0].children[1],fe=M.scene.children[0].children[0];I.setSkeleton(fe),ye.geometry.computeBoundingBox();const ee=new Ht,he=ye.geometry.boundingBox;he.getCenter(ee),T.position.x=ee.x,T.position.y=ee.y;const pt=(he.max.y-ee.y)*4/2/Math.tan(Math.PI*T.fov/360);T.position.z=pt,c.add(M.scene),t(3,N=!0)}de(()=>{ae.init(),O();const M=new je({canvas:d,alpha:!0});M.setSize(He,z),t(4,I=new hn({scene:c,renderer:M,camera:T})),an(I).setActive();function fe(he){requestAnimationFrame(fe),I==null||I.update(he),$=V(ae.x,$,.1),E=V(ae.y,E,.1),T.position.x=$*-.8,T.position.y=E*.3+.1,T.lookAt(0,.2,0),ee()}function ee(){M.render(c,T)}fe(0)});function P(M){se[M?"unshift":"push"](()=>{d=M,t(2,d)})}const H=()=>{I.params.wiggleRim<1&&(t(4,I.params.wiggleRim=5,I),t(4,I.params.wiggleEyes=1,I),setTimeout(()=>{t(4,I.params.wiggleRim=0,I),t(4,I.params.wiggleEyes=0,I)},1e3))},D=()=>o.start(),le=M=>M.action.start(),ce=M=>{o.handleElementCallback(M)};function ue(M){m=M,t(0,m)}return s.$$.update=()=>{s.$$.dirty&1&&t(6,n=m===!0||m===void 0),s.$$.dirty&2&&u(t(5,i=o&&o.state))},[m,o,d,N,I,i,n,r,l,P,H,D,le,ce,ue]}class Fn extends U{constructor(e){super();G(this,e,Hn,Vn,W,{})}}export{Fn as default};
